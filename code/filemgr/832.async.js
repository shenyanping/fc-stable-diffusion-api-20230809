(self.webpackChunk=self.webpackChunk||[]).push([[832],{89629:function(){"use strict"},83204:function(ie,V,N){"use strict";var Q=N(3930),ee=N(48002),P=N(59682);function j(R,w,h){h===void 0&&(h={});var g=(0,Q.Z)(w);(0,P.Z)(function(){var l=(0,ee.n)(h.target,window);if(l!=null&&l.addEventListener){var p=function(c){return g.current(c)};return l.addEventListener(R,p,{capture:h.capture,once:h.once,passive:h.passive}),function(){l.removeEventListener(R,p,{capture:h.capture})}}},[R,h.capture,h.once,h.passive],h.target)}V.Z=j},3930:function(ie,V,N){"use strict";var Q=N(62435);function ee(P){var j=(0,Q.useRef)(P);return j.current=P,j}V.Z=ee},22638:function(ie,V,N){"use strict";var Q=N(62435),ee=N(92770),P=N(31663);function j(R){P.Z&&((0,ee.mf)(R)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof R)));var w=(0,Q.useRef)(R);w.current=(0,Q.useMemo)(function(){return R},[R]);var h=(0,Q.useRef)();return h.current||(h.current=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];return w.current.apply(this,g)}),h.current}V.Z=j},45210:function(ie,V,N){"use strict";var Q=N(62435),ee=N(3930),P=N(92770),j=N(31663),R=function(w){j.Z&&((0,P.mf)(w)||console.error("useUnmount expected parameter is a function, got ".concat(typeof w)));var h=(0,ee.Z)(w);(0,Q.useEffect)(function(){return function(){h.current()}},[])};V.Z=R},77348:function(ie,V,N){"use strict";N.d(V,{Z:function(){return h}});var Q=N(97582),ee=N(62435),P=N(3930),j=N(22638),R=N(45210),w;(function(g){g[g.Connecting=0]="Connecting",g[g.Open=1]="Open",g[g.Closing=2]="Closing",g[g.Closed=3]="Closed"})(w||(w={}));function h(g,l){l===void 0&&(l={});var p=l.reconnectLimit,c=p===void 0?3:p,f=l.reconnectInterval,u=f===void 0?3*1e3:f,_=l.manual,t=_===void 0?!1:_,r=l.onOpen,o=l.onClose,i=l.onMessage,n=l.onError,e=l.protocols,a=(0,P.Z)(r),s=(0,P.Z)(o),d=(0,P.Z)(i),v=(0,P.Z)(n),m=(0,ee.useRef)(0),S=(0,ee.useRef)(),L=(0,ee.useRef)(),T=(0,ee.useRef)(!1),I=(0,Q.__read)((0,ee.useState)(),2),A=I[0],C=I[1],y=(0,Q.__read)((0,ee.useState)(w.Closed),2),b=y[0],x=y[1],M=function(){var J;m.current<c&&((J=L.current)===null||J===void 0?void 0:J.readyState)!==w.Open&&(S.current&&clearTimeout(S.current),S.current=setTimeout(function(){D(),m.current++},u))},D=function(){S.current&&clearTimeout(S.current),L.current&&L.current.close();var J=new WebSocket(g,e);x(w.Connecting),J.onerror=function(K){var E;T.current||(M(),(E=v.current)===null||E===void 0||E.call(v,K,J),x(J.readyState||w.Closed))},J.onopen=function(K){var E;T.current||((E=a.current)===null||E===void 0||E.call(a,K,J),m.current=0,x(J.readyState||w.Open))},J.onmessage=function(K){var E;T.current||((E=d.current)===null||E===void 0||E.call(d,K,J),C(K))},J.onclose=function(K){var E;T.current||(M(),(E=s.current)===null||E===void 0||E.call(s,K,J),x(J.readyState||w.Closed))},L.current=J},F=function(J){var K;if(b===w.Open)(K=L.current)===null||K===void 0||K.send(J);else throw new Error("WebSocket disconnected")},z=function(){m.current=0,D()},X=function(){var J;S.current&&clearTimeout(S.current),m.current=c,(J=L.current)===null||J===void 0||J.close()};return(0,ee.useEffect)(function(){t||z()},[g,t]),(0,R.Z)(function(){T.current=!0,X()}),{latestMessage:A,sendMessage:(0,j.Z)(F),connect:(0,j.Z)(z),disconnect:(0,j.Z)(X),readyState:b,webSocketIns:L.current}}},40351:function(ie,V,N){"use strict";var Q=N(62435),ee=N(45210),P=N(8224),j=N(48002),R=function(w){var h=function(g,l,p){var c=(0,Q.useRef)(!1),f=(0,Q.useRef)([]),u=(0,Q.useRef)([]),_=(0,Q.useRef)();w(function(){var t,r=Array.isArray(p)?p:[p],o=r.map(function(i){return(0,j.n)(i)});if(!c.current){c.current=!0,f.current=o,u.current=l,_.current=g();return}(o.length!==f.current.length||!(0,P.Z)(o,f.current)||!(0,P.Z)(l,u.current))&&((t=_.current)===null||t===void 0||t.call(_),f.current=o,u.current=l,_.current=g())}),(0,ee.Z)(function(){var t;(t=_.current)===null||t===void 0||t.call(_),c.current=!1})};return h};V.Z=R},8224:function(ie,V,N){"use strict";N.d(V,{Z:function(){return Q}});function Q(ee,P){if(ee===P)return!0;for(var j=0;j<ee.length;j++)if(!Object.is(ee[j],P[j]))return!1;return!0}},48002:function(ie,V,N){"use strict";N.d(V,{n:function(){return P}});var Q=N(92770),ee=N(52982);function P(j,R){if(ee.Z){if(!j)return R;var w;return(0,Q.mf)(j)?w=j():"current"in j?w=j.current:w=j,w}}},92770:function(ie,V,N){"use strict";N.d(V,{G7:function(){return w},hj:function(){return R},mf:function(){return ee}});var Q=function(h){return h!==null&&typeof h=="object"},ee=function(h){return typeof h=="function"},P=function(h){return typeof h=="string"},j=function(h){return typeof h=="boolean"},R=function(h){return typeof h=="number"},w=function(h){return typeof h=="undefined"}},52982:function(ie,V){"use strict";var N=!!(typeof window!="undefined"&&window.document&&window.document.createElement);V.Z=N},31663:function(ie,V){"use strict";var N=!1;V.Z=N},59682:function(ie,V,N){"use strict";var Q=N(62435),ee=N(40351),P=(0,ee.Z)(Q.useEffect);V.Z=P},53291:function(ie,V,N){"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var Q=N(62435);function ee(j){var R=(0,Q.useRef)(j);return R.current=j,R}var P=ee;V.default=P},70717:function(ie,V,N){"use strict";var Q=N(64836);Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var ee=Q(N(18698)),P=N(62435),j=N(51390),R=Q(N(526));function w(g){R.default&&((0,j.isFunction)(g)||console.error("useMemoizedFn expected parameter is a function, got ".concat((0,ee.default)(g))));var l=(0,P.useRef)(g);l.current=(0,P.useMemo)(function(){return g},[g]);var p=(0,P.useRef)();return p.current||(p.current=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return l.current.apply(this,c)}),p.current}var h=w;V.default=h},51040:function(ie,V,N){"use strict";var Q=N(64836);Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var ee=Q(N(18698)),P=N(62435),j=Q(N(53291)),R=N(51390),w=Q(N(526)),h=function(p){w.default&&((0,R.isFunction)(p)||console.error("useUnmount expected parameter is a function, got ".concat((0,ee.default)(p))));var c=(0,j.default)(p);(0,P.useEffect)(function(){return function(){c.current()}},[])},g=h;V.default=g},66898:function(ie,V,N){"use strict";var Q,ee=N(64836);Q={value:!0},V.kQ=void 0,Q=l;var P=N(97582),j=N(62435),R=ee(N(53291)),w=ee(N(70717)),h=ee(N(51040)),g;V.kQ=g,function(p){p[p.Connecting=0]="Connecting",p[p.Open=1]="Open",p[p.Closing=2]="Closing",p[p.Closed=3]="Closed"}(g||(V.kQ=g={}));function l(p,c){c===void 0&&(c={});var f=c.reconnectLimit,u=f===void 0?3:f,_=c.reconnectInterval,t=_===void 0?3*1e3:_,r=c.manual,o=r===void 0?!1:r,i=c.onOpen,n=c.onClose,e=c.onMessage,a=c.onError,s=c.protocols,d=(0,R.default)(i),v=(0,R.default)(n),m=(0,R.default)(e),S=(0,R.default)(a),L=(0,j.useRef)(0),T=(0,j.useRef)(),I=(0,j.useRef)(),A=(0,j.useRef)(!1),C=(0,P.__read)((0,j.useState)(),2),y=C[0],b=C[1],x=(0,P.__read)((0,j.useState)(g.Closed),2),M=x[0],D=x[1],F=function(){var G;L.current<u&&((G=I.current)===null||G===void 0?void 0:G.readyState)!==g.Open&&(T.current&&clearTimeout(T.current),T.current=setTimeout(function(){z(),L.current++},t))},z=function(){T.current&&clearTimeout(T.current),I.current&&I.current.close();var G=new WebSocket(p,s);D(g.Connecting),G.onerror=function(B){var W;A.current||(F(),(W=S.current)===null||W===void 0||W.call(S,B,G),D(G.readyState||g.Closed))},G.onopen=function(B){var W;A.current||((W=d.current)===null||W===void 0||W.call(d,B,G),L.current=0,D(G.readyState||g.Open))},G.onmessage=function(B){var W;A.current||((W=m.current)===null||W===void 0||W.call(m,B,G),b(B))},G.onclose=function(B){var W;A.current||(F(),(W=v.current)===null||W===void 0||W.call(v,B,G),D(G.readyState||g.Closed))},I.current=G},X=function(G){var B;if(M===g.Open)(B=I.current)===null||B===void 0||B.send(G);else throw new Error("WebSocket disconnected")},J=function(){L.current=0,z()},K=function(){var G;T.current&&clearTimeout(T.current),L.current=u,(G=I.current)===null||G===void 0||G.close()};return(0,j.useEffect)(function(){o||J()},[p,o]),(0,h.default)(function(){A.current=!0,K()}),{latestMessage:y,sendMessage:(0,w.default)(X),connect:(0,w.default)(J),disconnect:(0,w.default)(K),readyState:M,webSocketIns:I.current}}},51390:function(ie,V,N){"use strict";var Q=N(64836);Object.defineProperty(V,"__esModule",{value:!0}),V.isUndef=V.isString=V.isObject=V.isNumber=V.isFunction=V.isBoolean=void 0;var ee=Q(N(18698)),P=function(p){return p!==null&&(0,ee.default)(p)==="object"};V.isObject=P;var j=function(p){return typeof p=="function"};V.isFunction=j;var R=function(p){return typeof p=="string"};V.isString=R;var w=function(p){return typeof p=="boolean"};V.isBoolean=w;var h=function(p){return typeof p=="number"};V.isNumber=h;var g=function(p){return typeof p=="undefined"};V.isUndef=g},526:function(ie,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var N=!1,Q=N;V.default=Q},12617:function(ie){(function(V,N){ie.exports=N()})(self,function(){return(()=>{"use strict";var V={775:(Q,ee)=>{Object.defineProperty(ee,"__esModule",{value:!0}),ee.FitAddon=void 0;var P=function(){function j(){}return j.prototype.activate=function(R){this._terminal=R},j.prototype.dispose=function(){},j.prototype.fit=function(){var R=this.proposeDimensions();if(R&&this._terminal){var w=this._terminal._core;this._terminal.rows===R.rows&&this._terminal.cols===R.cols||(w._renderService.clear(),this._terminal.resize(R.cols,R.rows))}},j.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var R=this._terminal._core;if(R._renderService.dimensions.actualCellWidth!==0&&R._renderService.dimensions.actualCellHeight!==0){var w=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(w.getPropertyValue("height")),g=Math.max(0,parseInt(w.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),p=h-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),c=g-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-R.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(c/R._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(p/R._renderService.dimensions.actualCellHeight))}}}},j}();ee.FitAddon=P}},N={};return function Q(ee){if(N[ee])return N[ee].exports;var P=N[ee]={exports:{}};return V[ee](P,P.exports,Q),P.exports}(775)})()})},88830:function(ie,V,N){"use strict";N.d(V,{O:function(){return ee}});var Q=function(P){var j={};function R(w){if(j[w])return j[w].exports;var h=j[w]={i:w,l:!1,exports:{}};return P[w].call(h.exports,h,h.exports,R),h.l=!0,h.exports}return R.m=P,R.c=j,R.d=function(w,h,g){R.o(w,h)||Object.defineProperty(w,h,{enumerable:!0,get:g})},R.r=function(w){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},R.t=function(w,h){if(1&h&&(w=R(w)),8&h||4&h&&typeof w=="object"&&w&&w.__esModule)return w;var g=Object.create(null);if(R.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:w}),2&h&&typeof w!="string")for(var l in w)R.d(g,l,function(p){return w[p]}.bind(null,l));return g},R.n=function(w){var h=w&&w.__esModule?function(){return w.default}:function(){return w};return R.d(h,"a",h),h},R.o=function(w,h){return Object.prototype.hasOwnProperty.call(w,h)},R.p="",R(R.s=70)}([function(P,j,R){P.exports=R(64)()},function(P,j,R){(function(w){var h=function(g){return g&&g.Math==Math&&g};P.exports=h(typeof globalThis=="object"&&globalThis)||h(typeof window=="object"&&window)||h(typeof self=="object"&&self)||h(typeof w=="object"&&w)||Function("return this")()}).call(this,R(31))},function(P,j){P.exports=function(R){try{return!!R()}catch(w){return!0}}},function(P,j){var R={}.hasOwnProperty;P.exports=function(w,h){return R.call(w,h)}},function(P,j,R){var w=R(2);P.exports=!w(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(P,j){P.exports=function(R){return typeof R=="object"?R!==null:typeof R=="function"}},function(P,j,R){var w=R(4),h=R(17),g=R(11);P.exports=w?function(l,p,c){return h.f(l,p,g(1,c))}:function(l,p,c){return l[p]=c,l}},function(P,j,R){"use strict";P.exports=R(62)},function(P,j,R){var w=R(12),h=R(14);P.exports=function(g){return w(h(g))}},function(P,j,R){var w=R(1),h=R(6);P.exports=function(g,l){try{h(w,g,l)}catch(p){w[g]=l}return l}},function(P,j,R){var w=R(4),h=R(32),g=R(11),l=R(8),p=R(15),c=R(3),f=R(16),u=Object.getOwnPropertyDescriptor;j.f=w?u:function(_,t){if(_=l(_),t=p(t,!0),f)try{return u(_,t)}catch(r){}if(c(_,t))return g(!h.f.call(_,t),_[t])}},function(P,j){P.exports=function(R,w){return{enumerable:!(1&R),configurable:!(2&R),writable:!(4&R),value:w}}},function(P,j,R){var w=R(2),h=R(13),g="".split;P.exports=w(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return h(l)=="String"?g.call(l,""):Object(l)}:Object},function(P,j){var R={}.toString;P.exports=function(w){return R.call(w).slice(8,-1)}},function(P,j){P.exports=function(R){if(R==null)throw TypeError("Can't call method on "+R);return R}},function(P,j,R){var w=R(5);P.exports=function(h,g){if(!w(h))return h;var l,p;if(g&&typeof(l=h.toString)=="function"&&!w(p=l.call(h))||typeof(l=h.valueOf)=="function"&&!w(p=l.call(h))||!g&&typeof(l=h.toString)=="function"&&!w(p=l.call(h)))return p;throw TypeError("Can't convert object to primitive value")}},function(P,j,R){var w=R(4),h=R(2),g=R(33);P.exports=!w&&!h(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},function(P,j,R){var w=R(4),h=R(16),g=R(18),l=R(15),p=Object.defineProperty;j.f=w?p:function(c,f,u){if(g(c),f=l(f,!0),g(u),h)try{return p(c,f,u)}catch(_){}if("get"in u||"set"in u)throw TypeError("Accessors not supported");return"value"in u&&(c[f]=u.value),c}},function(P,j,R){var w=R(5);P.exports=function(h){if(!w(h))throw TypeError(String(h)+" is not an object");return h}},function(P,j,R){var w=R(20),h=Function.toString;typeof w.inspectSource!="function"&&(w.inspectSource=function(g){return h.call(g)}),P.exports=w.inspectSource},function(P,j,R){var w=R(1),h=R(9),g=w["__core-js_shared__"]||h("__core-js_shared__",{});P.exports=g},function(P,j,R){var w=R(38),h=R(20);(P.exports=function(g,l){return h[g]||(h[g]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:w?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(P,j){var R=0,w=Math.random();P.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++R+w).toString(36)}},function(P,j){P.exports={}},function(P,j,R){var w=R(25),h=Math.min;P.exports=function(g){return g>0?h(w(g),9007199254740991):0}},function(P,j){var R=Math.ceil,w=Math.floor;P.exports=function(h){return isNaN(h=+h)?0:(h>0?w:R)(h)}},function(P,j,R){"use strict";var w=R(50).forEach,h=R(58),g=R(59),l=h("forEach"),p=g("forEach");P.exports=l&&p?[].forEach:function(c){return w(this,c,arguments.length>1?arguments[1]:void 0)}},function(P,j,R){var w=R(2);P.exports=!!Object.getOwnPropertySymbols&&!w(function(){return!String(Symbol())})},function(P,j,R){P.exports=function(w){var h={};function g(l){if(h[l])return h[l].exports;var p=h[l]={i:l,l:!1,exports:{}};return w[l].call(p.exports,p,p.exports,g),p.l=!0,p.exports}return g.m=w,g.c=h,g.d=function(l,p,c){g.o(l,p)||Object.defineProperty(l,p,{enumerable:!0,get:c})},g.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},g.t=function(l,p){if(1&p&&(l=g(l)),8&p||4&p&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(g.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),2&p&&typeof l!="string")for(var f in l)g.d(c,f,function(u){return l[u]}.bind(null,f));return c},g.n=function(l){var p=l&&l.__esModule?function(){return l.default}:function(){return l};return g.d(p,"a",p),p},g.o=function(l,p){return Object.prototype.hasOwnProperty.call(l,p)},g.p="",g(g.s=32)}([function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this._listeners=[],this._disposed=!1}return Object.defineProperty(p.prototype,"event",{get:function(){var c=this;return this._event||(this._event=function(f){return c._listeners.push(f),{dispose:function(){if(!c._disposed){for(var u=0;u<c._listeners.length;u++)if(c._listeners[u]===f)return void c._listeners.splice(u,1)}}}}),this._event},enumerable:!0,configurable:!0}),p.prototype.fire=function(c,f){for(var u=[],_=0;_<this._listeners.length;_++)u.push(this._listeners[_]);for(_=0;_<u.length;_++)u[_].call(void 0,c,f)},p.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},p}();h.EventEmitter=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(14);h.IBufferService=l.createDecorator("BufferService"),h.ICoreMouseService=l.createDecorator("CoreMouseService"),h.ICoreService=l.createDecorator("CoreService"),h.ICharsetService=l.createDecorator("CharsetService"),h.IDirtyRowService=l.createDecorator("DirtyRowService"),h.IInstantiationService=l.createDecorator("InstantiationService"),h.ILogService=l.createDecorator("LogService"),h.IOptionsService=l.createDecorator("OptionsService"),h.IUnicodeService=l.createDecorator("UnicodeService")},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(c){return c.dispose()}),this._disposables.length=0},p.prototype.register=function(c){this._disposables.push(c)},p.prototype.unregister=function(c){var f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)},p}();h.Disposable=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.DEFAULT_COLOR=256,h.DEFAULT_ATTR=256|h.DEFAULT_COLOR<<9,h.CHAR_DATA_ATTR_INDEX=0,h.CHAR_DATA_CHAR_INDEX=1,h.CHAR_DATA_WIDTH_INDEX=2,h.CHAR_DATA_CODE_INDEX=3,h.NULL_CELL_CHAR="",h.NULL_CELL_WIDTH=1,h.NULL_CELL_CODE=0,h.WHITESPACE_CELL_CHAR=" ",h.WHITESPACE_CELL_WIDTH=1,h.WHITESPACE_CELL_CODE=32},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(14);h.ICharSizeService=l.createDecorator("CharSizeService"),h.ICoreBrowserService=l.createDecorator("CoreBrowserService"),h.IMouseService=l.createDecorator("MouseService"),h.IRenderService=l.createDecorator("RenderService"),h.ISelectionService=l.createDecorator("SelectionService"),h.ISoundService=l.createDecorator("SoundService")},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(_,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])})(_,t)},function(_,t){function r(){this.constructor=_}l(_,t),_.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(7),f=g(3),u=function(_){function t(){var r=_!==null&&_.apply(this,arguments)||this;return r.content=0,r.fg=0,r.bg=0,r.combinedData="",r}return p(t,_),t.fromCharData=function(r){var o=new t;return o.setFromCharData(r),o},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?c.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(r){this.fg=r[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(r[f.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(r[f.CHAR_DATA_CHAR_INDEX].length===2){var i=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var n=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(i-55296)+n-56320+65536|r[f.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[f.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=r[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|r[f.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(g(6).AttributeData);h.CellData=u},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this.fg=0,this.bg=0}return p.toColorRGB=function(c){return[c>>>16&255,c>>>8&255,255&c]},p.fromColorRGB=function(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]},p.prototype.clone=function(){var c=new p;return c.fg=this.fg,c.bg=this.bg,c},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},p.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},p.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},p.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},p.prototype.isFgDefault=function(){return(50331648&this.fg)==0},p.prototype.isBgDefault=function(){return(50331648&this.bg)==0},p.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p}();h.AttributeData=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},h.utf32ToString=function(c,f,u){f===void 0&&(f=0),u===void 0&&(u=c.length);for(var _="",t=f;t<u;++t){var r=c[t];r>65535?(r-=65536,_+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):_+=String.fromCharCode(r)}return _};var l=function(){function c(){this._interim=0}return c.prototype.clear=function(){this._interim=0},c.prototype.decode=function(f,u){var _=f.length;if(!_)return 0;var t=0,r=0;this._interim&&(56320<=(n=f.charCodeAt(r++))&&n<=57343?u[t++]=1024*(this._interim-55296)+n-56320+65536:(u[t++]=this._interim,u[t++]=n),this._interim=0);for(var o=r;o<_;++o){var i=f.charCodeAt(o);if(55296<=i&&i<=56319){if(++o>=_)return this._interim=i,t;var n;56320<=(n=f.charCodeAt(o))&&n<=57343?u[t++]=1024*(i-55296)+n-56320+65536:(u[t++]=i,u[t++]=n)}else u[t++]=i}return t},c}();h.StringToUtf32=l;var p=function(){function c(){this.interim=new Uint8Array(3)}return c.prototype.clear=function(){this.interim.fill(0)},c.prototype.decode=function(f,u){var _=f.length;if(!_)return 0;var t,r,o,i,n=0,e=0,a=0;if(this.interim[0]){var s=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;for(var v=0,m=void 0;(m=63&this.interim[++v])&&v<4;)d<<=6,d|=m;for(var S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=S-v;a<L;){if(a>=_)return 0;if((192&(m=f[a++]))!=128){a--,s=!0;break}this.interim[v++]=m,d<<=6,d|=63&m}s||(S===2?d<128?a--:u[n++]=d:S===3?d<2048||d>=55296&&d<=57343||(u[n++]=d):d<65536||d>1114111||(u[n++]=d)),this.interim.fill(0)}for(var T=_-4,I=a;I<_;){for(;!(!(I<T)||128&(t=f[I])||128&(r=f[I+1])||128&(o=f[I+2])||128&(i=f[I+3]));)u[n++]=t,u[n++]=r,u[n++]=o,u[n++]=i,I+=4;if((t=f[I++])<128)u[n++]=t;else if((224&t)==192){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if((e=(31&t)<<6|63&r)<128){I--;continue}u[n++]=e}else if((240&t)==224){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,n;if((192&(o=f[I++]))!=128){I--;continue}if((e=(15&t)<<12|(63&r)<<6|63&o)<2048||e>=55296&&e<=57343)continue;u[n++]=e}else if((248&t)==240){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,n;if((192&(o=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,this.interim[2]=o,n;if((192&(i=f[I++]))!=128){I--;continue}if((e=(7&t)<<18|(63&r)<<12|(63&o)<<6|63&i)<65536||e>1114111)continue;u[n++]=e}}return n},c}();h.Utf8ToUtf32=p},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.addDisposableDomListener=function(l,p,c,f){l.addEventListener(p,c,f);var u=!1;return{dispose:function(){u||(u=!0,l.removeEventListener(p,c,f))}}}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.INVERTED_DEFAULT_COLOR=257,h.DIM_OPACITY=.5,h.CHAR_ATLAS_CELL_SPACING=1},function(w,h,g){"use strict";var l,p,c,f;function u(t){var r=t.toString(16);return r.length<2?"0"+r:r}function _(t,r){return t<r?(r+.05)/(t+.05):(t+.05)/(r+.05)}Object.defineProperty(h,"__esModule",{value:!0}),function(t){t.toCss=function(r,o,i,n){return n!==void 0?"#"+u(r)+u(o)+u(i)+u(n):"#"+u(r)+u(o)+u(i)},t.toRgba=function(r,o,i,n){return n===void 0&&(n=255),(r<<24|o<<16|i<<8|n)>>>0}}(l=h.channels||(h.channels={})),(p=h.color||(h.color={})).blend=function(t,r){var o=(255&r.rgba)/255;if(o===1)return{css:r.css,rgba:r.rgba};var i=r.rgba>>24&255,n=r.rgba>>16&255,e=r.rgba>>8&255,a=t.rgba>>24&255,s=t.rgba>>16&255,d=t.rgba>>8&255,v=a+Math.round((i-a)*o),m=s+Math.round((n-s)*o),S=d+Math.round((e-d)*o);return{css:l.toCss(v,m,S),rgba:l.toRgba(v,m,S)}},p.ensureContrastRatio=function(t,r,o){var i=f.ensureContrastRatio(t.rgba,r.rgba,o);if(i)return f.toColor(i>>24&255,i>>16&255,i>>8&255)},p.opaque=function(t){var r=(255|t.rgba)>>>0,o=f.toChannels(r),i=o[0],n=o[1],e=o[2];return{css:l.toCss(i,n,e),rgba:r}},(h.css||(h.css={})).toColor=function(t){return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0}},function(t){function r(o,i,n){var e=o/255,a=i/255,s=n/255;return .2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}t.relativeLuminance=function(o){return r(o>>16&255,o>>8&255,255&o)},t.relativeLuminance2=r}(c=h.rgb||(h.rgb={})),function(t){function r(i,n,e){for(var a=i>>24&255,s=i>>16&255,d=i>>8&255,v=n>>24&255,m=n>>16&255,S=n>>8&255,L=_(c.relativeLuminance2(v,S,m),c.relativeLuminance2(a,s,d));L<e&&(v>0||m>0||S>0);)v-=Math.max(0,Math.ceil(.1*v)),m-=Math.max(0,Math.ceil(.1*m)),S-=Math.max(0,Math.ceil(.1*S)),L=_(c.relativeLuminance2(v,S,m),c.relativeLuminance2(a,s,d));return(v<<24|m<<16|S<<8|255)>>>0}function o(i,n,e){for(var a=i>>24&255,s=i>>16&255,d=i>>8&255,v=n>>24&255,m=n>>16&255,S=n>>8&255,L=_(c.relativeLuminance2(v,S,m),c.relativeLuminance2(a,s,d));L<e&&(v<255||m<255||S<255);)v=Math.min(255,v+Math.ceil(.1*(255-v))),m=Math.min(255,m+Math.ceil(.1*(255-m))),S=Math.min(255,S+Math.ceil(.1*(255-S))),L=_(c.relativeLuminance2(v,S,m),c.relativeLuminance2(a,s,d));return(v<<24|m<<16|S<<8|255)>>>0}t.ensureContrastRatio=function(i,n,e){var a=c.relativeLuminance(i>>8),s=c.relativeLuminance(n>>8);if(_(a,s)<e)return s<a?r(i,n,e):o(i,n,e)},t.reduceLuminance=r,t.increaseLuminance=o,t.toChannels=function(i){return[i>>24&255,i>>16&255,i>>8&255,255&i]},t.toColor=function(i,n,e){return{css:l.toCss(i,n,e),rgba:l.toRgba(i,n,e)}}}(f=h.rgba||(h.rgba={})),h.toPaddedHex=u,h.contrastRatio=_},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=typeof navigator=="undefined",p=l?"node":navigator.userAgent,c=l?"node":navigator.platform;function f(u,_){return u.indexOf(_)>=0}h.isFirefox=!!~p.indexOf("Firefox"),h.isSafari=/^((?!chrome|android).)*safari/i.test(p),h.isMac=f(["Macintosh","MacIntel","MacPPC","Mac68K"],c),h.isIpad=c==="iPad",h.isIphone=c==="iPhone",h.isWindows=f(["Windows","Win16","Win32","WinCE"],c),h.isLinux=c.indexOf("Linux")>=0},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"}(h.C0||(h.C0={})),function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"}(h.C1||(h.C1={}))},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(3),p=g(9),c=g(23),f=g(6),u=g(26),_=g(10),t=function(){function r(o,i,n,e,a,s,d,v){this._container=o,this._alpha=e,this._colors=a,this._rendererId=s,this._bufferService=d,this._optionsService=v,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+i+"-layer"),this._canvas.style.zIndex=n.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return r.prototype.dispose=function(){var o;this._container.removeChild(this._canvas),(o=this._charAtlas)===null||o===void 0||o.dispose()},r.prototype._initCanvas=function(){this._ctx=u.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},r.prototype.onOptionsChanged=function(){},r.prototype.onBlur=function(){},r.prototype.onFocus=function(){},r.prototype.onCursorMove=function(){},r.prototype.onGridChanged=function(o,i){},r.prototype.onSelectionChanged=function(o,i,n){n===void 0&&(n=!1)},r.prototype.setColors=function(o){this._refreshCharAtlas(o)},r.prototype._setTransparency=function(o){if(o!==this._alpha){var i=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},r.prototype._refreshCharAtlas=function(o){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=c.acquireCharAtlas(this._optionsService.options,this._rendererId,o,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},r.prototype.resize=function(o){this._scaledCellWidth=o.scaledCellWidth,this._scaledCellHeight=o.scaledCellHeight,this._scaledCharWidth=o.scaledCharWidth,this._scaledCharHeight=o.scaledCharHeight,this._scaledCharLeft=o.scaledCharLeft,this._scaledCharTop=o.scaledCharTop,this._canvas.width=o.scaledCanvasWidth,this._canvas.height=o.scaledCanvasHeight,this._canvas.style.width=o.canvasWidth+"px",this._canvas.style.height=o.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},r.prototype._fillCells=function(o,i,n,e){this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight)},r.prototype._fillBottomLineAtCells=function(o,i,n){n===void 0&&(n=1),this._ctx.fillRect(o*this._scaledCellWidth,(i+1)*this._scaledCellHeight-window.devicePixelRatio-1,n*this._scaledCellWidth,window.devicePixelRatio)},r.prototype._fillLeftLineAtCell=function(o,i,n){this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,window.devicePixelRatio*n,this._scaledCellHeight)},r.prototype._strokeRectAtCell=function(o,i,n,e){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(o*this._scaledCellWidth+window.devicePixelRatio/2,i*this._scaledCellHeight+window.devicePixelRatio/2,n*this._scaledCellWidth-window.devicePixelRatio,e*this._scaledCellHeight-window.devicePixelRatio)},r.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},r.prototype._clearCells=function(o,i,n,e){this._alpha?this._ctx.clearRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight))},r.prototype._fillCharTrueColor=function(o,i,n){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(n),this._ctx.fillText(o.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},r.prototype._drawChars=function(o,i,n){var e,a,s=this._getContrastColor(o);s||o.isFgRGB()||o.isBgRGB()?this._drawUncachedChars(o,i,n,s):(o.isInverse()?(e=o.isBgDefault()?p.INVERTED_DEFAULT_COLOR:o.getBgColor(),a=o.isFgDefault()?p.INVERTED_DEFAULT_COLOR:o.getFgColor()):(a=o.isBgDefault()?l.DEFAULT_COLOR:o.getBgColor(),e=o.isFgDefault()?l.DEFAULT_COLOR:o.getFgColor()),e+=this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&e<8?8:0,this._currentGlyphIdentifier.chars=o.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=o.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=a,this._currentGlyphIdentifier.fg=e,this._currentGlyphIdentifier.bold=!!o.isBold(),this._currentGlyphIdentifier.dim=!!o.isDim(),this._currentGlyphIdentifier.italic=!!o.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(o,i,n))},r.prototype._drawUncachedChars=function(o,i,n,e){if(this._ctx.save(),this._ctx.font=this._getFont(!!o.isBold(),!!o.isItalic()),this._ctx.textBaseline="middle",o.isInverse())if(e)this._ctx.fillStyle=e.css;else if(o.isBgDefault())this._ctx.fillStyle=_.color.opaque(this._colors.background).css;else if(o.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(o.getBgColor()).join(",")+")";else{var a=o.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}else if(e)this._ctx.fillStyle=e.css;else if(o.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(o.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(o.getFgColor()).join(",")+")";else{var s=o.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(n),o.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY),this._ctx.fillText(o.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},r.prototype._clipRow=function(o){this._ctx.beginPath(),this._ctx.rect(0,o*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},r.prototype._getFont=function(o,i){return(i?"italic":"")+" "+(o?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},r.prototype._getContrastColor=function(o){if(this._optionsService.options.minimumContrastRatio!==1){var i=this._colors.contrastCache.getColor(o.bg,o.fg);if(i!==void 0)return i||void 0;var n=o.getFgColor(),e=o.getFgColorMode(),a=o.getBgColor(),s=o.getBgColorMode(),d=!!o.isInverse(),v=!!o.isInverse();if(d){var m=n;n=a,a=m;var S=e;e=s,s=S}var L=this._resolveBackgroundRgba(s,a,d),T=this._resolveForegroundRgba(e,n,d,v),I=_.rgba.ensureContrastRatio(L,T,this._optionsService.options.minimumContrastRatio);if(I){var A={css:_.channels.toCss(I>>24&255,I>>16&255,I>>8&255),rgba:I};return this._colors.contrastCache.setColor(o.bg,o.fg,A),A}this._colors.contrastCache.setColor(o.bg,o.fg,null)}},r.prototype._resolveBackgroundRgba=function(o,i,n){switch(o){case 16777216:case 33554432:return this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.foreground.rgba:this._colors.background.rgba}},r.prototype._resolveForegroundRgba=function(o,i,n,e){switch(o){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&e&&i<8&&(i+=8),this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.background.rgba:this._colors.foreground.rgba}},r}();h.BaseRenderLayer=t},function(w,h,g){"use strict";function l(p,c,f){c.di$target===c?c.di$dependencies.push({id:p,index:f}):(c.di$dependencies=[{id:p,index:f}],c.di$target=c)}Object.defineProperty(h,"__esModule",{value:!0}),h.serviceRegistry=new Map,h.getServiceDependencies=function(p){return p.di$dependencies||[]},h.createDecorator=function(p){if(h.serviceRegistry.has(p))return h.serviceRegistry.get(p);var c=function(f,u,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");l(c,f,_)};return c.toString=function(){return p},h.serviceRegistry.set(p,c),c}},function(w,h,g){"use strict";function l(p,c,f,u){if(f===void 0&&(f=0),u===void 0&&(u=p.length),f>=p.length)return p;f=(p.length+f)%p.length,u=u>=p.length?p.length:(p.length+u)%p.length;for(var _=f;_<u;++_)p[_]=c;return p}Object.defineProperty(h,"__esModule",{value:!0}),h.fill=function(p,c,f,u){return p.fill?p.fill(c,f,u):l(p,c,f,u)},h.fillFallback=l,h.concat=function(p,c){var f=new p.constructor(p.length+c.length);return f.set(p),f.set(c,p.length),f}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(7),p=g(3),c=g(5),f=g(6);h.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var u=function(){function _(t,r,o){o===void 0&&(o=!1),this.isWrapped=o,this._combined={},this._data=new Uint32Array(3*t);for(var i=r||c.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),n=0;n<t;++n)this.setCell(n,i);this.length=t}return _.prototype.get=function(t){var r=this._data[3*t+0],o=2097151&r;return[this._data[3*t+1],2097152&r?this._combined[t]:o?l.stringFromCodePoint(o):"",r>>22,2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):o]},_.prototype.set=function(t,r){this._data[3*t+1]=r[p.CHAR_DATA_ATTR_INDEX],r[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=r[1],this._data[3*t+0]=2097152|t|r[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=r[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[p.CHAR_DATA_WIDTH_INDEX]<<22},_.prototype.getWidth=function(t){return this._data[3*t+0]>>22},_.prototype.hasWidth=function(t){return 12582912&this._data[3*t+0]},_.prototype.getFg=function(t){return this._data[3*t+1]},_.prototype.getBg=function(t){return this._data[3*t+2]},_.prototype.hasContent=function(t){return 4194303&this._data[3*t+0]},_.prototype.getCodePoint=function(t){var r=this._data[3*t+0];return 2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&r},_.prototype.isCombined=function(t){return 2097152&this._data[3*t+0]},_.prototype.getString=function(t){var r=this._data[3*t+0];return 2097152&r?this._combined[t]:2097151&r?l.stringFromCodePoint(2097151&r):""},_.prototype.loadCell=function(t,r){var o=3*t;return r.content=this._data[o+0],r.fg=this._data[o+1],r.bg=this._data[o+2],2097152&r.content&&(r.combinedData=this._combined[t]),r},_.prototype.setCell=function(t,r){2097152&r.content&&(this._combined[t]=r.combinedData),this._data[3*t+0]=r.content,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg},_.prototype.setCellFromCodePoint=function(t,r,o,i,n){this._data[3*t+0]=r|o<<22,this._data[3*t+1]=i,this._data[3*t+2]=n},_.prototype.addCodepointToCell=function(t,r){var o=this._data[3*t+0];2097152&o?this._combined[t]+=l.stringFromCodePoint(r):(2097151&o?(this._combined[t]=l.stringFromCodePoint(2097151&o)+l.stringFromCodePoint(r),o&=-2097152,o|=2097152):o=r|1<<22,this._data[3*t+0]=o)},_.prototype.insertCells=function(t,r,o,i){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),r<this.length-t){for(var n=new c.CellData,e=this.length-t-r-1;e>=0;--e)this.setCell(t+r+e,this.loadCell(t+e,n));for(e=0;e<r;++e)this.setCell(t+e,o)}else for(e=t;e<this.length;++e)this.setCell(e,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0)},_.prototype.deleteCells=function(t,r,o,i){if(t%=this.length,r<this.length-t){for(var n=new c.CellData,e=0;e<this.length-t-r;++e)this.setCell(t+e,this.loadCell(t+r+e,n));for(e=this.length-r;e<this.length;++e)this.setCell(e,o)}else for(e=t;e<this.length;++e)this.setCell(e,o);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0)},_.prototype.replaceCells=function(t,r,o,i){for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0);t<r&&t<this.length;)this.setCell(t++,o)},_.prototype.resize=function(t,r){if(t!==this.length){if(t>this.length){var o=new Uint32Array(3*t);this.length&&(3*t<this._data.length?o.set(this._data.subarray(0,3*t)):o.set(this._data)),this._data=o;for(var i=this.length;i<t;++i)this.setCell(i,r)}else if(t){(o=new Uint32Array(3*t)).set(this._data.subarray(0,3*t)),this._data=o;var n=Object.keys(this._combined);for(i=0;i<n.length;i++){var e=parseInt(n[i],10);e>=t&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=t}},_.prototype.fill=function(t){this._combined={};for(var r=0;r<this.length;++r)this.setCell(r,t)},_.prototype.copyFrom=function(t){for(var r in this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={},t._combined)this._combined[r]=t._combined[r];this.isWrapped=t.isWrapped},_.prototype.clone=function(){var t=new _(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];return t.isWrapped=this.isWrapped,t},_.prototype.getTrimmedLength=function(){for(var t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0},_.prototype.copyCellsFrom=function(t,r,o,i,n){var e=t._data;if(n)for(var a=i-1;a>=0;a--)for(var s=0;s<3;s++)this._data[3*(o+a)+s]=e[3*(r+a)+s];else for(a=0;a<i;a++)for(s=0;s<3;s++)this._data[3*(o+a)+s]=e[3*(r+a)+s];var d=Object.keys(t._combined);for(s=0;s<d.length;s++){var v=parseInt(d[s],10);v>=r&&(this._combined[v-r+o]=t._combined[v])}},_.prototype.translateToString=function(t,r,o){t===void 0&&(t=!1),r===void 0&&(r=0),o===void 0&&(o=this.length),t&&(o=Math.min(o,this.getTrimmedLength()));for(var i="";r<o;){var n=this._data[3*r+0],e=2097151&n;i+=2097152&n?this._combined[r]:e?l.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,r+=n>>22||1}return i},_}();h.BufferLine=u},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.promptLabel="Terminal input",h.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.CHARSETS={},h.DEFAULT_CHARSET=h.CHARSETS.B,h.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},h.CHARSETS.A={"#":"\xA3"},h.CHARSETS.B=null,h.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},h.CHARSETS.C=h.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},h.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},h.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},h.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},h.CHARSETS.E=h.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},h.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},h.CHARSETS.H=h.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},h.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c,f){if(c===void 0&&(c=32),f===void 0&&(f=32),this.maxLength=c,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(c){var f=new p;if(!c.length)return f;for(var u=c[0]instanceof Array?1:0;u<c.length;++u){var _=c[u];if(_ instanceof Array)for(var t=0;t<_.length;++t)f.addSubParam(_[t]);else f.addParam(_)}return f},p.prototype.clone=function(){var c=new p(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c},p.prototype.toArray=function(){for(var c=[],f=0;f<this.length;++f){c.push(this.params[f]);var u=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-u>0&&c.push(Array.prototype.slice.call(this._subParams,u,_))}return c},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>2147483647?2147483647:c}},p.prototype.addSubParam=function(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>2147483647?2147483647:c,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0},p.prototype.getSubParams=function(c){var f=this._subParamsIdx[c]>>8,u=255&this._subParamsIdx[c];return u-f>0?this._subParams.subarray(f,u):null},p.prototype.getSubParamsAll=function(){for(var c={},f=0;f<this.length;++f){var u=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-u>0&&(c[f]=this._subParams.slice(u,_))}return c},p.prototype.addDigit=function(c){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var u=this._digitIsSub?this._subParams:this.params,_=u[f-1];u[f-1]=~_?Math.min(10*_+c,2147483647):c}},p}();h.Params=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(21),p=g(7),c=function(){function u(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return u.prototype.addHandler=function(_,t){this._handlers[_]===void 0&&(this._handlers[_]=[]);var r=this._handlers[_];return r.push(t),{dispose:function(){var o=r.indexOf(t);o!==-1&&r.splice(o,1)}}},u.prototype.setHandler=function(_,t){this._handlers[_]=[t]},u.prototype.clearHandler=function(_){this._handlers[_]&&delete this._handlers[_]},u.prototype.setHandlerFallback=function(_){this._handlerFb=_},u.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},u.prototype.reset=function(){this._state===2&&this.end(!1),this._id=-1,this._state=0},u.prototype._start=function(){var _=this._handlers[this._id];if(_)for(var t=_.length-1;t>=0;t--)_[t].start();else this._handlerFb(this._id,"START")},u.prototype._put=function(_,t,r){var o=this._handlers[this._id];if(o)for(var i=o.length-1;i>=0;i--)o[i].put(_,t,r);else this._handlerFb(this._id,"PUT",p.utf32ToString(_,t,r))},u.prototype._end=function(_){var t=this._handlers[this._id];if(t){for(var r=t.length-1;r>=0&&t[r].end(_)===!1;r--);for(r--;r>=0;r--)t[r].end(!1)}else this._handlerFb(this._id,"END",_)},u.prototype.start=function(){this.reset(),this._id=-1,this._state=1},u.prototype.put=function(_,t,r){if(this._state!==3){if(this._state===1)for(;t<r;){var o=_[t++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&r-t>0&&this._put(_,t,r)}},u.prototype.end=function(_){this._state!==0&&(this._state!==3&&(this._state===1&&this._start(),this._end(_)),this._id=-1,this._state=0)},u}();h.OscParser=c;var f=function(){function u(_){this._handler=_,this._data="",this._hitLimit=!1}return u.prototype.start=function(){this._data="",this._hitLimit=!1},u.prototype.put=function(_,t,r){this._hitLimit||(this._data+=p.utf32ToString(_,t,r),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},u.prototype.end=function(_){var t;return this._hitLimit?t=!1:_&&(t=this._handler(this._data)),this._data="",this._hitLimit=!1,t},u}();h.OscHandler=f},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.PAYLOAD_LIMIT=1e7},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(7),p=g(19),c=g(21),f=[],u=function(){function t(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){}}return t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},t.prototype.addHandler=function(r,o){this._handlers[r]===void 0&&(this._handlers[r]=[]);var i=this._handlers[r];return i.push(o),{dispose:function(){var n=i.indexOf(o);n!==-1&&i.splice(n,1)}}},t.prototype.setHandler=function(r,o){this._handlers[r]=[o]},t.prototype.clearHandler=function(r){this._handlers[r]&&delete this._handlers[r]},t.prototype.setHandlerFallback=function(r){this._handlerFb=r},t.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=f,this._ident=0},t.prototype.hook=function(r,o){if(this.reset(),this._ident=r,this._active=this._handlers[r]||f,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(o);else this._handlerFb(this._ident,"HOOK",o)},t.prototype.put=function(r,o,i){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(r,o,i);else this._handlerFb(this._ident,"PUT",l.utf32ToString(r,o,i))},t.prototype.unhook=function(r){if(this._active.length){for(var o=this._active.length-1;o>=0&&this._active[o].unhook(r)===!1;o--);for(o--;o>=0;o--)this._active[o].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",r);this._active=f,this._ident=0},t}();h.DcsParser=u;var _=function(){function t(r){this._handler=r,this._data="",this._hitLimit=!1}return t.prototype.hook=function(r){this._params=r.clone(),this._data="",this._hitLimit=!1},t.prototype.put=function(r,o,i){this._hitLimit||(this._data+=l.utf32ToString(r,o,i),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.unhook=function(r){var o;return this._hitLimit?o=!1:r&&(o=this._handler(this._data,this._params?this._params:new p.Params)),this._params=void 0,this._data="",this._hitLimit=!1,o},t}();h.DcsHandler=_},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(24),p=g(42),c=[];h.acquireCharAtlas=function(f,u,_,t,r){for(var o=l.generateConfig(t,r,f,_),i=0;i<c.length;i++){var n=(e=c[i]).ownedBy.indexOf(u);if(n>=0){if(l.configEquals(e.config,o))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),c.splice(i,1)):e.ownedBy.splice(n,1);break}}for(i=0;i<c.length;i++){var e=c[i];if(l.configEquals(e.config,o))return e.ownedBy.push(u),e.atlas}var a={atlas:new p.DynamicCharAtlas(document,o),config:o,ownedBy:[u]};return c.push(a),a.atlas},h.removeTerminalFromCache=function(f){for(var u=0;u<c.length;u++){var _=c[u].ownedBy.indexOf(f);if(_!==-1){c[u].ownedBy.length===1?(c[u].atlas.dispose(),c.splice(u,1)):c[u].ownedBy.splice(_,1);break}}}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(3);h.generateConfig=function(p,c,f,u){var _={foreground:u.foreground,background:u.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:u.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:c,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:_}},h.configEquals=function(p,c){for(var f=0;f<p.colors.ansi.length;f++)if(p.colors.ansi[f].rgba!==c.colors.ansi[f].rgba)return!1;return p.devicePixelRatio===c.devicePixelRatio&&p.fontFamily===c.fontFamily&&p.fontSize===c.fontSize&&p.fontWeight===c.fontWeight&&p.fontWeightBold===c.fontWeightBold&&p.allowTransparency===c.allowTransparency&&p.scaledCharWidth===c.scaledCharWidth&&p.scaledCharHeight===c.scaledCharHeight&&p.colors.foreground===c.colors.foreground&&p.colors.background===c.colors.background},h.is256Color=function(p){return p<l.DEFAULT_COLOR}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(10),p=g(44),c=l.css.toColor("#ffffff"),f=l.css.toColor("#000000"),u=l.css.toColor("#ffffff"),_=l.css.toColor("#000000"),t={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};h.DEFAULT_ANSI_COLORS=function(){for(var o=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],n=0;n<216;n++){var e=i[n/36%6|0],a=i[n/6%6|0],s=i[n%6];o.push({css:l.channels.toCss(e,a,s),rgba:l.channels.toRgba(e,a,s)})}for(n=0;n<24;n++){var d=8+10*n;o.push({css:l.channels.toCss(d,d,d),rgba:l.channels.toRgba(d,d,d)})}return o}();var r=function(){function o(i,n){this.allowTransparency=n;var e=i.createElement("canvas");e.width=1,e.height=1;var a=e.getContext("2d");if(!a)throw new Error("Could not get rendering context");this._ctx=a,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:c,background:f,cursor:u,cursorAccent:_,selection:t,selectionOpaque:l.color.blend(f,t),ansi:h.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return o.prototype.onOptionsChange=function(i){i==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(i){i===void 0&&(i={}),this.colors.foreground=this._parseColor(i.foreground,c),this.colors.background=this._parseColor(i.background,f),this.colors.cursor=this._parseColor(i.cursor,u,!0),this.colors.cursorAccent=this._parseColor(i.cursorAccent,_,!0),this.colors.selection=this._parseColor(i.selection,t,!0),this.colors.selectionOpaque=l.color.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(i.black,h.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(i.red,h.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(i.green,h.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(i.yellow,h.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(i.blue,h.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(i.magenta,h.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(i.cyan,h.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(i.white,h.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(i.brightBlack,h.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(i.brightRed,h.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(i.brightGreen,h.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(i.brightYellow,h.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(i.brightBlue,h.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(i.brightMagenta,h.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(i.brightCyan,h.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(i.brightWhite,h.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},o.prototype._parseColor=function(i,n,e){if(e===void 0&&(e=this.allowTransparency),i===void 0)return n;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=i,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+i+" is invalid using fallback "+n.css),n;this._ctx.fillRect(0,0,1,1);var a=this._ctx.getImageData(0,0,1,1).data;if(a[3]!==255){if(!e)return console.warn("Color: "+i+" is using transparency, but allowTransparency is false. Using fallback "+n.css+"."),n;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(T){return Number(T)}),d=s[0],v=s[1],m=s[2],S=s[3],L=Math.round(255*S);return{rgba:l.channels.toRgba(d,v,m,L),css:i}}return{css:this._ctx.fillStyle,rgba:l.channels.toRgba(a[0],a[1],a[2],a[3])}},o}();h.ColorManager=r},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l}},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(r,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)n.hasOwnProperty(e)&&(i[e]=n[e])})(r,o)},function(r,o){function i(){this.constructor=r}l(r,o),r.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(6),f=g(3),u=g(5),_=function(r){function o(i,n,e){var a=r.call(this)||this;return a.content=0,a.combinedData="",a.fg=i.fg,a.bg=i.bg,a.combinedData=n,a._width=e,a}return p(o,r),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(i){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(c.AttributeData);h.JoinedCellData=_;var t=function(){function r(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new u.CellData}return r.prototype.registerCharacterJoiner=function(o){var i={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(i),i.id},r.prototype.deregisterCharacterJoiner=function(o){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===o)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(o);if(!i||i.length===0)return[];for(var n=[],e=i.translateToString(!0),a=0,s=0,d=0,v=i.getFg(0),m=i.getBg(0),S=0;S<i.getTrimmedLength();S++)if(i.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==v||this._workCell.bg!==m){if(S-a>1)for(var L=this._getJoinedRanges(e,d,s,i,a),T=0;T<L.length;T++)n.push(L[T]);a=S,d=s,v=this._workCell.fg,m=this._workCell.bg}s+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-a>1)for(L=this._getJoinedRanges(e,d,s,i,a),T=0;T<L.length;T++)n.push(L[T]);return n},r.prototype._getJoinedRanges=function(o,i,n,e,a){for(var s=o.substring(i,n),d=this._characterJoiners[0].handler(s),v=1;v<this._characterJoiners.length;v++)for(var m=this._characterJoiners[v].handler(s),S=0;S<m.length;S++)r._mergeRanges(d,m[S]);return this._stringRangesToCellRanges(d,e,a),d},r.prototype._stringRangesToCellRanges=function(o,i,n){var e=0,a=!1,s=0,d=o[e];if(d){for(var v=n;v<this._bufferService.cols;v++){var m=i.getWidth(v),S=i.getString(v).length||f.WHITESPACE_CELL_CHAR.length;if(m!==0){if(!a&&d[0]<=s&&(d[0]=v,a=!0),d[1]<=s){if(d[1]=v,!(d=o[++e]))break;d[0]<=s?(d[0]=v,a=!0):a=!1}s+=S}}d&&(d[1]=this._bufferService.cols)}},r._mergeRanges=function(o,i){for(var n=!1,e=0;e<o.length;e++){var a=o[e];if(n){if(i[1]<=a[0])return o[e-1][1]=i[1],o;if(i[1]<=a[1])return o[e-1][1]=Math.max(i[1],a[1]),o.splice(e,1),o;o.splice(e,1),e--}else{if(i[1]<=a[0])return o.splice(e,0,i),o;if(i[1]<=a[1])return a[0]=Math.min(i[0],a[0]),o;i[0]<a[1]&&(a[0]=Math.min(i[0],a[0]),n=!0)}}return n?o[o.length-1][1]=i[1]:o.push(i),o},r}();h.CharacterJoinerRegistry=t},function(w,h,g){"use strict";function l(p,c){var f=c.getBoundingClientRect();return[p.clientX-f.left,p.clientY-f.top]}Object.defineProperty(h,"__esModule",{value:!0}),h.getCoordsRelativeToElement=l,h.getCoords=function(p,c,f,u,_,t,r,o){if(_){var i=l(p,c);if(i)return i[0]=Math.ceil((i[0]+(o?t/2:0))/t),i[1]=Math.ceil(i[1]/r),i[0]=Math.min(Math.max(i[0],1),f+(o?1:0)),i[1]=Math.min(Math.max(i[1],1),u),i}},h.getRawByteCoords=function(p){if(p)return{x:p[0]+32,y:p[1]+32}}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c){this._renderCallback=c}return p.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},p.prototype.refresh=function(c,f,u){var _=this;this._rowCount=u,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return _._innerRefresh()}))},p.prototype._innerRefresh=function(){this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},p}();h.RenderDebouncer=l},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(f,u){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,t){_.__proto__=t}||function(_,t){for(var r in t)t.hasOwnProperty(r)&&(_[r]=t[r])})(f,u)},function(f,u){function _(){this.constructor=f}l(f,u),f.prototype=u===null?Object.create(u):(_.prototype=u.prototype,new _)});Object.defineProperty(h,"__esModule",{value:!0});var c=function(f){function u(){var _=f!==null&&f.apply(this,arguments)||this;return _._currentDevicePixelRatio=window.devicePixelRatio,_}return p(u,f),u.prototype.setListener=function(_){var t=this;this._listener&&this.clearListener(),this._listener=_,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},u.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},u.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},u.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},u}(g(2).Disposable);h.ScreenDprMonitor=c},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.clone=function l(p,c){if(c===void 0&&(c=5),typeof p!="object")return p;var f=Array.isArray(p)?[]:{};for(var u in p)f[u]=c<=1?p[u]:p[u]?l(p[u],c-1):p[u];return f}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(5),p=g(33),c=g(17),f=g(0),u=g(81),_=function(){function e(a){this._core=new p.Terminal(a),this._addonManager=new u.AddonManager}return Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new i(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return new n(this._core)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return new r(this._core.buffers)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(a,s){this._verifyIntegers(a,s),this._core.resize(a,s)},e.prototype.open=function(a){this._core.open(a)},e.prototype.attachCustomKeyEventHandler=function(a){this._core.attachCustomKeyEventHandler(a)},e.prototype.registerLinkMatcher=function(a,s,d){return this._core.registerLinkMatcher(a,s,d)},e.prototype.deregisterLinkMatcher=function(a){this._core.deregisterLinkMatcher(a)},e.prototype.registerLinkProvider=function(a){return this._core.registerLinkProvider(a)},e.prototype.registerCharacterJoiner=function(a){return this._core.registerCharacterJoiner(a)},e.prototype.deregisterCharacterJoiner=function(a){this._core.deregisterCharacterJoiner(a)},e.prototype.registerMarker=function(a){return this._verifyIntegers(a),this._core.addMarker(a)},e.prototype.addMarker=function(a){return this.registerMarker(a)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(a,s,d){this._verifyIntegers(a,s,d),this._core.select(a,s,d)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(a,s){this._verifyIntegers(a,s),this._core.selectLines(a,s)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(a){this._verifyIntegers(a),this._core.scrollLines(a)},e.prototype.scrollPages=function(a){this._verifyIntegers(a),this._core.scrollPages(a)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(a){this._verifyIntegers(a),this._core.scrollToLine(a)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(a,s){this._core.write(a,s)},e.prototype.writeUtf8=function(a,s){this._core.write(a,s)},e.prototype.writeln=function(a,s){this._core.write(a),this._core.write(`\r
`,s)},e.prototype.paste=function(a){this._core.paste(a)},e.prototype.getOption=function(a){return this._core.optionsService.getOption(a)},e.prototype.setOption=function(a,s){this._core.optionsService.setOption(a,s)},e.prototype.refresh=function(a,s){this._verifyIntegers(a,s),this._core.refresh(a,s)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(a){return this._addonManager.loadAddon(this,a)},Object.defineProperty(e,"strings",{get:function(){return c},enumerable:!0,configurable:!0}),e.prototype._verifyIntegers=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];a.forEach(function(d){if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")})},e}();h.Terminal=_;var t=function(){function e(a,s){this._buffer=a,this.type=s}return e.prototype.init=function(a){return this._buffer=a,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),e.prototype.getLine=function(a){var s=this._buffer.lines.get(a);if(s)return new o(s)},e.prototype.getNullCell=function(){return new l.CellData},e}(),r=function(){function e(a){var s=this;this._buffers=a,this._onBufferChange=new f.EventEmitter,this._normal=new t(this._buffers.normal,"normal"),this._alternate=new t(this._buffers.alt,"alternate"),this._buffers.onBufferActivate(function(){return s._onBufferChange.fire(s.active)})}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!0,configurable:!0}),e}(),o=function(){function e(a){this._line=a}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!0,configurable:!0}),e.prototype.getCell=function(a,s){if(!(a<0||a>=this._line.length))return s?(this._line.loadCell(a,s),s):this._line.loadCell(a,new l.CellData)},e.prototype.translateToString=function(a,s,d){return this._line.translateToString(a,s,d)},e}(),i=function(){function e(a){this._core=a}return e.prototype.registerCsiHandler=function(a,s){return this._core.addCsiHandler(a,function(d){return s(d.toArray())})},e.prototype.addCsiHandler=function(a,s){return this.registerCsiHandler(a,s)},e.prototype.registerDcsHandler=function(a,s){return this._core.addDcsHandler(a,function(d,v){return s(d,v.toArray())})},e.prototype.addDcsHandler=function(a,s){return this.registerDcsHandler(a,s)},e.prototype.registerEscHandler=function(a,s){return this._core.addEscHandler(a,s)},e.prototype.addEscHandler=function(a,s){return this.registerEscHandler(a,s)},e.prototype.registerOscHandler=function(a,s){return this._core.addOscHandler(a,s)},e.prototype.addOscHandler=function(a,s){return this.registerOscHandler(a,s)},e}(),n=function(){function e(a){this._core=a}return e.prototype.register=function(a){this._core.unicodeService.register(a)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(a){this._core.unicodeService.activeVersion=a},enumerable:!0,configurable:!0}),e}()},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(oe,U){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,k){O.__proto__=k}||function(O,k){for(var q in k)k.hasOwnProperty(q)&&(O[q]=k[q])})(oe,U)},function(oe,U){function O(){this.constructor=oe}l(oe,U),oe.prototype=U===null?Object.create(U):(O.prototype=U.prototype,new O)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(34),f=g(35),u=g(36),_=g(12),t=g(37),r=g(39),o=g(49),i=g(50),n=g(11),e=g(8),a=g(17),s=g(53),d=g(54),v=g(55),m=g(56),S=g(58),L=g(0),T=g(16),I=g(59),A=g(25),C=g(60),y=g(1),b=g(61),x=g(4),M=g(62),D=g(63),F=g(2),z=g(69),X=g(70),J=g(71),K=g(72),E=g(73),G=g(74),B=g(75),W=g(76),H=g(77),Y=g(78),Z=g(80),te=typeof window!="undefined"?window.document:null,ae=function(oe){function U(O){O===void 0&&(O={});var k=oe.call(this)||this;return k.browser=n,k.mouseEvents=0,k._keyDownHandled=!1,k._blankLine=null,k._onCursorMove=new L.EventEmitter,k._onData=new L.EventEmitter,k._onBinary=new L.EventEmitter,k._onKey=new L.EventEmitter,k._onLineFeed=new L.EventEmitter,k._onRender=new L.EventEmitter,k._onResize=new L.EventEmitter,k._onScroll=new L.EventEmitter,k._onSelectionChange=new L.EventEmitter,k._onTitleChange=new L.EventEmitter,k._onFocus=new L.EventEmitter,k._onBlur=new L.EventEmitter,k.onA11yCharEmitter=new L.EventEmitter,k.onA11yTabEmitter=new L.EventEmitter,k._instantiationService=new E.InstantiationService,k.optionsService=new b.OptionsService(O),k._instantiationService.setService(y.IOptionsService,k.optionsService),k._bufferService=k._instantiationService.createInstance(D.BufferService),k._instantiationService.setService(y.IBufferService,k._bufferService),k._logService=k._instantiationService.createInstance(J.LogService),k._instantiationService.setService(y.ILogService,k._logService),k._coreService=k._instantiationService.createInstance(X.CoreService,function(){return k.scrollToBottom()}),k._instantiationService.setService(y.ICoreService,k._coreService),k._coreService.onData(function(q){return k._onData.fire(q)}),k._coreService.onBinary(function(q){return k._onBinary.fire(q)}),k._coreMouseService=k._instantiationService.createInstance(G.CoreMouseService),k._instantiationService.setService(y.ICoreMouseService,k._coreMouseService),k._dirtyRowService=k._instantiationService.createInstance(K.DirtyRowService),k._instantiationService.setService(y.IDirtyRowService,k._dirtyRowService),k.unicodeService=k._instantiationService.createInstance(Y.UnicodeService),k._instantiationService.setService(y.IUnicodeService,k.unicodeService),k._charsetService=k._instantiationService.createInstance(Z.CharsetService),k._instantiationService.setService(y.ICharsetService,k._charsetService),k._setupOptionsListeners(),k._setup(),k._writeBuffer=new B.WriteBuffer(function(q){return k._inputHandler.parse(q)}),k}return p(U,oe),Object.defineProperty(U.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),U.prototype.dispose=function(){var O,k,q,ne;this._isDisposed||(oe.prototype.dispose.call(this),(O=this._windowsMode)===null||O===void 0||O.dispose(),this._windowsMode=void 0,(k=this._renderService)===null||k===void 0||k.dispose(),this._customKeyEventHandler=null,this.write=function(){},(ne=(q=this.element)===null||q===void 0?void 0:q.parentNode)===null||ne===void 0||ne.removeChild(this.element))},U.prototype._setup=function(){var O=this;this._customKeyEventHandler=null,this.insertMode=!1,this.bracketedPasteMode=!1,this._userScrolling=!1,this._inputHandler?this._inputHandler.reset():(this._inputHandler=new t.InputHandler(this,this._bufferService,this._charsetService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService,this.unicodeService,this._instantiationService),this._inputHandler.onRequestBell(function(){return O.bell()}),this._inputHandler.onRequestRefreshRows(function(k,q){return O.refresh(k,q)}),this._inputHandler.onRequestReset(function(){return O.reset()}),this._inputHandler.onCursorMove(function(){return O._onCursorMove.fire()}),this._inputHandler.onLineFeed(function(){return O._onLineFeed.fire()}),this.register(this._inputHandler)),this.linkifier||(this.linkifier=new o.Linkifier(this._bufferService,this._logService,this.optionsService,this.unicodeService)),this.linkifier2||(this.linkifier2=new W.Linkifier2(this._bufferService)),this.options.windowsMode&&this._enableWindowsMode()},U.prototype._enableWindowsMode=function(){var O=this;if(!this._windowsMode){var k=[];k.push(this.onLineFeed(I.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.addCsiHandler({final:"H"},function(){return I.updateWindowsModeWrappedState(O._bufferService),!1})),this._windowsMode={dispose:function(){k.forEach(function(q){return q.dispose()})}}}},Object.defineProperty(U.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),U.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},U.prototype._setupOptionsListeners=function(){var O=this;this.optionsService.onOptionChange(function(k){var q,ne,re,se,ce;switch(k){case"fontFamily":case"fontSize":(q=O._renderService)===null||q===void 0||q.clear(),(ne=O._charSizeService)===null||ne===void 0||ne.measure();break;case"cursorBlink":case"cursorStyle":O.refresh(O.buffer.y,O.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":O._renderService&&(O._renderService.clear(),O._renderService.onResize(O.cols,O.rows),O.refresh(0,O.rows-1));break;case"rendererType":O._renderService&&(O._renderService.setRenderer(O._createRenderer()),O._renderService.onResize(O.cols,O.rows));break;case"scrollback":O.buffers.resize(O.cols,O.rows),(re=O.viewport)===null||re===void 0||re.syncScrollArea();break;case"screenReaderMode":O.optionsService.options.screenReaderMode?!O._accessibilityManager&&O._renderService&&(O._accessibilityManager=new v.AccessibilityManager(O,O._renderService)):((se=O._accessibilityManager)===null||se===void 0||se.dispose(),O._accessibilityManager=null);break;case"tabStopWidth":O.buffers.setupTabStops();break;case"theme":O._setTheme(O.optionsService.options.theme);break;case"windowsMode":O.optionsService.options.windowsMode?O._enableWindowsMode():((ce=O._windowsMode)===null||ce===void 0||ce.dispose(),O._windowsMode=void 0)}})},U.prototype._onTextAreaFocus=function(O){this.sendFocus&&this._coreService.triggerDataEvent(_.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},U.prototype.blur=function(){return this.textarea.blur()},U.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(_.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},U.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(q){O.hasSelection()&&u.copyHandler(q,O._selectionService)}));var k=function(q){return u.handlePasteEvent(q,O.textarea,O.bracketedPasteMode,O._coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",k)),this.register(e.addDisposableDomListener(this.element,"paste",k)),n.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(q){q.button===2&&u.rightClickHandler(q,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(q){u.rightClickHandler(q,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),n.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(q){q.button===1&&u.moveTextAreaUnderMouseCursor(q,O.textarea,O.screenElement)}))},U.prototype._bindKeys=function(){var O=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(k){return O._keyUp(k)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(k){return O._keyDown(k)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(k){return O._keyPress(k)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(k){return O._compositionHelper.compositionupdate(k)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(k){return O._queueLinkification(k.start,k.end)}))},U.prototype.open=function(O){var k=this;if(!O)throw new Error("Terminal requires a parent element.");te.body.contains(O)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),O.appendChild(this.element);var q=te.createDocumentFragment();this._viewportElement=te.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=te.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=te.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=te.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=te.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(se){return k._onTextAreaFocus(se)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return k._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var ne=this._instantiationService.createInstance(H.CoreBrowserService,this.textarea);this._instantiationService.setService(x.ICoreBrowserService,ne),this._charSizeService=this._instantiationService.createInstance(M.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._compositionView=te.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new A.ColorManager(te,this.options.allowTransparency),this.optionsService.onOptionChange(function(se){return k._colorManager.onOptionsChange(se)}),this._colorManager.setTheme(this._theme);var re=this._createRenderer();this._renderService=this._instantiationService.createInstance(C.RenderService,re,this.rows,this.screenElement),this._instantiationService.setService(x.IRenderService,this._renderService),this._renderService.onRender(function(se){return k._onRender.fire(se)}),this.onResize(function(se){return k._renderService.resize(se.cols,se.rows)}),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(x.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(z.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(se,ce){return k.scrollLines(se,ce)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove(function(){return k._renderService.onCursorMove()})),this.register(this.onResize(function(){return k._renderService.onResize(k.cols,k.rows)})),this.register(this.onBlur(function(){return k._renderService.onBlur()})),this.register(this.onFocus(function(){return k._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return k.viewport.syncScrollArea()})),this._selectionService=this._instantiationService.createInstance(i.SelectionService,function(se,ce){return k.scrollLines(se,ce)},this.element,this.screenElement),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange(function(){return k._onSelectionChange.fire()})),this.register(this._selectionService.onRedrawRequest(function(se){return k._renderService.onSelectionChanged(se.start,se.end,se.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(se){k.textarea.value=se,k.textarea.focus(),k.textarea.select()})),this.register(this.onScroll(function(){k.viewport.syncScrollArea(),k._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return k._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(d.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return k._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(se){return k._selectionService.onMouseDown(se)})),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new v.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},U.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(r.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(m.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},U.prototype._setTheme=function(O){var k,q,ne;this._theme=O,(k=this._colorManager)===null||k===void 0||k.setTheme(O),(q=this._renderService)===null||q===void 0||q.setColors(this._colorManager.colors),(ne=this.viewport)===null||ne===void 0||ne.onThemeChange(this._colorManager.colors)},U.prototype.bindMouse=function(){var O=this,k=this,q=this.element;function ne($){var le,ue,he=k._mouseService.getRawByteCoords($,k.screenElement,k.cols,k.rows);if(!he)return!1;switch($.overrideType||$.type){case"mousemove":ue=32,$.buttons===void 0?(le=3,$.button!==void 0&&(le=$.button<3?$.button:3)):le=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":ue=0,le=$.button<3?$.button:3;break;case"mousedown":ue=1,le=$.button<3?$.button:3;break;case"wheel":$.deltaY!==0&&(ue=$.deltaY<0?0:1),le=4;break;default:return!1}return!(ue===void 0||le===void 0||le>4)&&k._coreMouseService.triggerMouseEvent({col:he.x-33,row:he.y-33,button:le,action:ue,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}var re={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se=function($){return ne($),$.buttons||(O._document.removeEventListener("mouseup",re.mouseup),re.mousedrag&&O._document.removeEventListener("mousemove",re.mousedrag)),O.cancel($)},ce=function($){return ne($),$.preventDefault(),O.cancel($)},de=function($){$.buttons&&ne($)},fe=function($){$.buttons||ne($)};this._coreMouseService.onProtocolChange(function($){O.mouseEvents=$,$?(O.optionsService.options.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O._coreMouseService.explainEvents($)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&$?re.mousemove||(q.addEventListener("mousemove",fe),re.mousemove=fe):(q.removeEventListener("mousemove",re.mousemove),re.mousemove=null),16&$?re.wheel||(q.addEventListener("wheel",ce),re.wheel=ce):(q.removeEventListener("wheel",re.wheel),re.wheel=null),2&$?re.mouseup||(re.mouseup=se):(O._document.removeEventListener("mouseup",re.mouseup),re.mouseup=null),4&$?re.mousedrag||(re.mousedrag=de):(O._document.removeEventListener("mousemove",re.mousedrag),re.mousedrag=null)}),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(q,"mousedown",function($){if($.preventDefault(),O.focus(),O.mouseEvents&&!O._selectionService.shouldForceSelection($))return ne($),re.mouseup&&O._document.addEventListener("mouseup",re.mouseup),re.mousedrag&&O._document.addEventListener("mousemove",re.mousedrag),O.cancel($)})),this.register(e.addDisposableDomListener(q,"wheel",function($){if(!re.wheel){if(!O.buffer.hasScrollback){var le=O.viewport.getLinesScrolled($);if(le===0)return;for(var ue=_.C0.ESC+(O._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B"),he="",_e=0;_e<Math.abs(le);_e++)he+=ue;O._coreService.triggerDataEvent(he,!0)}}})),this.register(e.addDisposableDomListener(q,"wheel",function($){if(!re.wheel)return O.viewport.onWheel($)?void 0:O.cancel($)})),this.register(e.addDisposableDomListener(q,"touchstart",function($){if(!O.mouseEvents)return O.viewport.onTouchStart($),O.cancel($)})),this.register(e.addDisposableDomListener(q,"touchmove",function($){if(!O.mouseEvents)return O.viewport.onTouchMove($)?void 0:O.cancel($)}))},U.prototype.refresh=function(O,k){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(O,k)},U.prototype._queueLinkification=function(O,k){var q;(q=this.linkifier)===null||q===void 0||q.linkifyRows(O,k)},U.prototype.updateCursorStyle=function(O){this._selectionService&&this._selectionService.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},U.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},U.prototype.scroll=function(O,k){var q;k===void 0&&(k=!1),(q=this._blankLine)&&q.length===this.cols&&q.getFg(0)===O.fg&&q.getBg(0)===O.bg||(q=this.buffer.getBlankLine(O,k),this._blankLine=q),q.isWrapped=k;var ne=this.buffer.ybase+this.buffer.scrollTop,re=this.buffer.ybase+this.buffer.scrollBottom;if(this.buffer.scrollTop===0){var se=this.buffer.lines.isFull;re===this.buffer.lines.length-1?se?this.buffer.lines.recycle().copyFrom(q):this.buffer.lines.push(q.clone()):this.buffer.lines.splice(re+1,0,q.clone()),se?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var ce=re-ne+1;this.buffer.lines.shiftElements(ne+1,ce-1,-1),this.buffer.lines.set(re,q.clone())}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},U.prototype.scrollLines=function(O,k){if(O<0){if(this.buffer.ydisp===0)return;this._userScrolling=!0}else O+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var q=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+O,this.buffer.ybase),0),q!==this.buffer.ydisp&&(k||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},U.prototype.scrollPages=function(O){this.scrollLines(O*(this.rows-1))},U.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},U.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},U.prototype.scrollToLine=function(O){var k=O-this.buffer.ydisp;k!==0&&this.scrollLines(k)},U.prototype.paste=function(O){u.paste(O,this.textarea,this.bracketedPasteMode,this._coreService)},U.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},U.prototype.addEscHandler=function(O,k){return this._inputHandler.addEscHandler(O,k)},U.prototype.addDcsHandler=function(O,k){return this._inputHandler.addDcsHandler(O,k)},U.prototype.addCsiHandler=function(O,k){return this._inputHandler.addCsiHandler(O,k)},U.prototype.addOscHandler=function(O,k){return this._inputHandler.addOscHandler(O,k)},U.prototype.registerLinkMatcher=function(O,k,q){var ne=this.linkifier.registerLinkMatcher(O,k,q);return this.refresh(0,this.rows-1),ne},U.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},U.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},U.prototype.registerCharacterJoiner=function(O){var k=this._renderService.registerCharacterJoiner(O);return this.refresh(0,this.rows-1),k},U.prototype.deregisterCharacterJoiner=function(O){this._renderService.deregisterCharacterJoiner(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(U.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),U.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},U.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},U.prototype.select=function(O,k,q){this._selectionService.setSelection(O,k,q)},U.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},U.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},U.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},U.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},U.prototype.selectLines=function(O,k){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(O,k)},U.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var k=S.evaluateKeyboardEvent(O,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),k.type===3||k.type===2){var q=this.rows-1;return this.scrollLines(k.type===2?-q:q),this.cancel(O,!0)}return k.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(k.cancel&&this.cancel(O,!0),!k.key||(k.key!==_.C0.ETX&&k.key!==_.C0.CR||(this.textarea.value=""),this._onKey.fire({key:k.key,domEvent:O}),this.showCursor(),this._coreService.triggerDataEvent(k.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0)))},U.prototype._isThirdLevelShift=function(O,k){var q=O.isMac&&!this.options.macOptionIsMeta&&k.altKey&&!k.ctrlKey&&!k.metaKey||O.isWindows&&k.altKey&&k.ctrlKey&&!k.metaKey;return k.type==="keypress"?q:q&&(!k.keyCode||k.keyCode>47)},U.prototype._keyUp=function(O){this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(k){return k.keyCode===16||k.keyCode===17||k.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O))},U.prototype._keyPress=function(O){var k;if(this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)k=O.charCode;else if(O.which===null||O.which===void 0)k=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;k=O.which}return!(!k||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(k=String.fromCharCode(k),this._onKey.fire({key:k,domEvent:O}),this.showCursor(),this._coreService.triggerDataEvent(k,!0),0))},U.prototype.bell=function(){var O=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){O.element.classList.remove("visual-bell-active")},200))},U.prototype.resize=function(O,k){var q,ne;isNaN(O)||isNaN(k)||(O!==this.cols||k!==this.rows?(O<D.MINIMUM_COLS&&(O=D.MINIMUM_COLS),k<D.MINIMUM_ROWS&&(k=D.MINIMUM_ROWS),this.buffers.resize(O,k),this._bufferService.resize(O,k),this.buffers.setupTabStops(this.cols),(q=this._charSizeService)===null||q===void 0||q.measure(),(ne=this.viewport)===null||ne===void 0||ne.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:O,rows:k})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},U.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(T.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},U.prototype.is=function(O){return(this.options.termName+"").indexOf(O)===0},U.prototype.handleTitle=function(O){this._onTitleChange.fire(O)},U.prototype.reset=function(){var O,k;this.options.rows=this.rows,this.options.cols=this.cols;var q=this._customKeyEventHandler,ne=this._userScrolling;this._setup(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._customKeyEventHandler=q,this._userScrolling=ne,this.refresh(0,this.rows-1),(k=this.viewport)===null||k===void 0||k.syncScrollArea()},U.prototype.cancel=function(O,k){if(this.options.cancelEvents||k)return O.preventDefault(),O.stopPropagation(),!1},U.prototype._visualBell=function(){return!1},U.prototype._soundBell=function(){return this.options.bellStyle==="sound"},U.prototype.write=function(O,k){this._writeBuffer.write(O,k)},U.prototype.writeSync=function(O){this._writeBuffer.writeSync(O)},U}(F.Disposable);h.Terminal=ae},function(w,h,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(4),f=g(1),u=function(){function _(t,r,o,i,n,e){this._textarea=t,this._compositionView=r,this._bufferService=o,this._optionsService=i,this._charSizeService=n,this._coreService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return _.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},_.prototype.compositionupdate=function(t){var r=this;this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(function(){r._compositionPosition.end=r._textarea.value.length},0)},_.prototype.compositionend=function(){this._finalizeComposition(!0)},_.prototype.keydown=function(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},_.prototype._finalizeComposition=function(t){var r=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),t){var o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var n;r._isSendingComposition&&(r._isSendingComposition=!1,n=r._isComposing?r._textarea.value.substring(o.start,o.end):r._textarea.value.substring(o.start),r._coreService.triggerDataEvent(n,!0))},0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},_.prototype._handleAnyTextareaChanges=function(){var t=this,r=this._textarea.value;setTimeout(function(){if(!t._isComposing){var o=t._textarea.value.replace(r,"");o.length>0&&t._coreService.triggerDataEvent(o,!0)}},0)},_.prototype.updateCompositionElements=function(t){var r=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var o=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),i=this._bufferService.buffer.y*o,n=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var e=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=e.width+"px",this._textarea.style.height=e.height+"px",this._textarea.style.lineHeight=e.height+"px"}t||setTimeout(function(){return r.updateCompositionElements(!0)},0)}},_.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},l([p(2,f.IBufferService),p(3,f.IOptionsService),p(4,c.ICharSizeService),p(5,f.ICoreService)],_)}();h.CompositionHelper=u},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),c=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,v=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,e,a);else for(var m=i.length-1;m>=0;m--)(s=i[m])&&(v=(d<3?s(v):d>3?s(n,e,v):s(n,e))||v);return d>3&&v&&Object.defineProperty(n,e,v),v},f=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(h,"__esModule",{value:!0});var u=g(2),_=g(8),t=g(4),r=g(1),o=function(i){function n(e,a,s,d,v,m,S){var L=i.call(this)||this;return L._scrollLines=e,L._viewportElement=a,L._scrollArea=s,L._bufferService=d,L._optionsService=v,L._charSizeService=m,L._renderService=S,L.scrollBarWidth=0,L._currentRowHeight=0,L._lastRecordedBufferLength=0,L._lastRecordedViewportHeight=0,L._lastRecordedBufferHeight=0,L._lastTouchY=0,L._lastScrollTop=0,L._wheelPartialScroll=0,L._refreshAnimationFrame=null,L._ignoreNextScrollEvent=!1,L.scrollBarWidth=L._viewportElement.offsetWidth-L._scrollArea.offsetWidth||15,L.register(_.addDisposableDomListener(L._viewportElement,"scroll",L._onScroll.bind(L))),setTimeout(function(){return L.syncScrollArea()},0),L}return p(n,i),n.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},n.prototype._refresh=function(e){var a=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return a._innerRefresh()}))},n.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null},n.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===a&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},n.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(a,!0)}},n.prototype._bubbleScroll=function(e,a){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},n.prototype.onWheel=function(e){var a=this._getPixelsScrolled(e);return a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))},n.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a},n.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a},n.prototype._applyScrollModifier=function(e,a){var s=this._optionsService.options.fastScrollModifier;return s==="alt"&&a.altKey||s==="ctrl"&&a.ctrlKey||s==="shift"&&a.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},n.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},n.prototype.onTouchMove=function(e){var a=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))},c([f(3,r.IBufferService),f(4,r.IOptionsService),f(5,t.ICharSizeService),f(6,t.IRenderService)],n)}(u.Disposable);h.Viewport=o},function(w,h,g){"use strict";function l(u){return u.replace(/\r?\n/g,"\r")}function p(u,_){return _?"\x1B[200~"+u+"\x1B[201~":u}function c(u,_,t,r){u=p(u=l(u),t),r.triggerDataEvent(u,!0),_.value=""}function f(u,_,t){var r=t.getBoundingClientRect(),o=u.clientX-r.left-10,i=u.clientY-r.top-10;_.style.position="absolute",_.style.width="20px",_.style.height="20px",_.style.left=o+"px",_.style.top=i+"px",_.style.zIndex="1000",_.focus(),setTimeout(function(){_.style.position="",_.style.width="",_.style.height="",_.style.left="",_.style.top="",_.style.zIndex=""},200)}Object.defineProperty(h,"__esModule",{value:!0}),h.prepareTextForTerminal=l,h.bracketTextForPaste=p,h.copyHandler=function(u,_){u.clipboardData&&u.clipboardData.setData("text/plain",_.selectionText),u.preventDefault()},h.handlePasteEvent=function(u,_,t,r){u.stopPropagation(),u.clipboardData&&c(u.clipboardData.getData("text/plain"),_,t,r)},h.paste=c,h.moveTextAreaUnderMouseCursor=f,h.rightClickHandler=function(u,_,t,r,o){f(u,_,t),o&&!r.isClickInSelection(u)&&r.selectWordAtCursor(u),_.value=r.selectionText,_.select()}},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(I,A){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,y){C.__proto__=y}||function(C,y){for(var b in y)y.hasOwnProperty(b)&&(C[b]=y[b])})(I,A)},function(I,A){function C(){this.constructor=I}l(I,A),I.prototype=A===null?Object.create(A):(C.prototype=A.prototype,new C)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(12),f=g(18),u=g(38),_=g(2),t=g(15),r=g(7),o=g(16),i=g(0),n=g(3),e=g(5),a=g(6),s=g(20),d=g(22),v=g(4),m={"(":0,")":1,"*":2,"+":3,"-":1,".":2};function S(I,A){if(I>24)return A.setWinLines||!1;switch(I){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var L=function(){function I(A,C,y,b){this._bufferService=A,this._coreService=C,this._logService=y,this._optionsService=b,this._data=new Uint32Array(0)}return I.prototype.hook=function(A){this._data=new Uint32Array(0)},I.prototype.put=function(A,C,y){this._data=t.concat(this._data,A.subarray(C,y))},I.prototype.unhook=function(A){if(A){var C=r.utf32ToString(this._data);switch(this._data=new Uint32Array(0),C){case'"q':return this._coreService.triggerDataEvent(c.C0.ESC+'P1$r0"q'+c.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(c.C0.ESC+'P1$r61;1"p'+c.C0.ESC+"\\");case"r":var y=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+y+c.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(c.C0.ESC+"P1$r0m"+c.C0.ESC+"\\");case" q":var b={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return b-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+b+" q"+c.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",C),this._coreService.triggerDataEvent(c.C0.ESC+"P0$r"+c.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},I}(),T=function(I){function A(C,y,b,x,M,D,F,z,X,J,K){K===void 0&&(K=new u.EscapeSequenceParser);var E=I.call(this)||this;E._terminal=C,E._bufferService=y,E._charsetService=b,E._coreService=x,E._dirtyRowService=M,E._logService=D,E._optionsService=F,E._coreMouseService=z,E._unicodeService=X,E._instantiationService=J,E._parser=K,E._parseBuffer=new Uint32Array(4096),E._stringDecoder=new r.StringToUtf32,E._utf8Decoder=new r.Utf8ToUtf32,E._workCell=new e.CellData,E._windowTitle="",E._iconName="",E._windowTitleStack=[],E._iconNameStack=[],E._curAttrData=o.DEFAULT_ATTR_DATA.clone(),E._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),E._onRequestRefreshRows=new i.EventEmitter,E._onRequestReset=new i.EventEmitter,E._onRequestBell=new i.EventEmitter,E._onCursorMove=new i.EventEmitter,E._onLineFeed=new i.EventEmitter,E._onScroll=new i.EventEmitter,E.register(E._parser),E._parser.setCsiHandlerFallback(function(H,Y){E._logService.debug("Unknown CSI code: ",{identifier:E._parser.identToString(H),params:Y.toArray()})}),E._parser.setEscHandlerFallback(function(H){E._logService.debug("Unknown ESC code: ",{identifier:E._parser.identToString(H)})}),E._parser.setExecuteHandlerFallback(function(H){E._logService.debug("Unknown EXECUTE code: ",{code:H})}),E._parser.setOscHandlerFallback(function(H,Y,Z){E._logService.debug("Unknown OSC code: ",{identifier:H,action:Y,data:Z})}),E._parser.setDcsHandlerFallback(function(H,Y,Z){Y==="HOOK"&&(Z=Z.toArray()),E._logService.debug("Unknown DCS code: ",{identifier:E._parser.identToString(H),action:Y,payload:Z})}),E._parser.setPrintHandler(function(H,Y,Z){return E.print(H,Y,Z)}),E._parser.setCsiHandler({final:"@"},function(H){return E.insertChars(H)}),E._parser.setCsiHandler({intermediates:" ",final:"@"},function(H){return E.scrollLeft(H)}),E._parser.setCsiHandler({final:"A"},function(H){return E.cursorUp(H)}),E._parser.setCsiHandler({intermediates:" ",final:"A"},function(H){return E.scrollRight(H)}),E._parser.setCsiHandler({final:"B"},function(H){return E.cursorDown(H)}),E._parser.setCsiHandler({final:"C"},function(H){return E.cursorForward(H)}),E._parser.setCsiHandler({final:"D"},function(H){return E.cursorBackward(H)}),E._parser.setCsiHandler({final:"E"},function(H){return E.cursorNextLine(H)}),E._parser.setCsiHandler({final:"F"},function(H){return E.cursorPrecedingLine(H)}),E._parser.setCsiHandler({final:"G"},function(H){return E.cursorCharAbsolute(H)}),E._parser.setCsiHandler({final:"H"},function(H){return E.cursorPosition(H)}),E._parser.setCsiHandler({final:"I"},function(H){return E.cursorForwardTab(H)}),E._parser.setCsiHandler({final:"J"},function(H){return E.eraseInDisplay(H)}),E._parser.setCsiHandler({prefix:"?",final:"J"},function(H){return E.eraseInDisplay(H)}),E._parser.setCsiHandler({final:"K"},function(H){return E.eraseInLine(H)}),E._parser.setCsiHandler({prefix:"?",final:"K"},function(H){return E.eraseInLine(H)}),E._parser.setCsiHandler({final:"L"},function(H){return E.insertLines(H)}),E._parser.setCsiHandler({final:"M"},function(H){return E.deleteLines(H)}),E._parser.setCsiHandler({final:"P"},function(H){return E.deleteChars(H)}),E._parser.setCsiHandler({final:"S"},function(H){return E.scrollUp(H)}),E._parser.setCsiHandler({final:"T"},function(H){return E.scrollDown(H)}),E._parser.setCsiHandler({final:"X"},function(H){return E.eraseChars(H)}),E._parser.setCsiHandler({final:"Z"},function(H){return E.cursorBackwardTab(H)}),E._parser.setCsiHandler({final:"`"},function(H){return E.charPosAbsolute(H)}),E._parser.setCsiHandler({final:"a"},function(H){return E.hPositionRelative(H)}),E._parser.setCsiHandler({final:"b"},function(H){return E.repeatPrecedingCharacter(H)}),E._parser.setCsiHandler({final:"c"},function(H){return E.sendDeviceAttributesPrimary(H)}),E._parser.setCsiHandler({prefix:">",final:"c"},function(H){return E.sendDeviceAttributesSecondary(H)}),E._parser.setCsiHandler({final:"d"},function(H){return E.linePosAbsolute(H)}),E._parser.setCsiHandler({final:"e"},function(H){return E.vPositionRelative(H)}),E._parser.setCsiHandler({final:"f"},function(H){return E.hVPosition(H)}),E._parser.setCsiHandler({final:"g"},function(H){return E.tabClear(H)}),E._parser.setCsiHandler({final:"h"},function(H){return E.setMode(H)}),E._parser.setCsiHandler({prefix:"?",final:"h"},function(H){return E.setModePrivate(H)}),E._parser.setCsiHandler({final:"l"},function(H){return E.resetMode(H)}),E._parser.setCsiHandler({prefix:"?",final:"l"},function(H){return E.resetModePrivate(H)}),E._parser.setCsiHandler({final:"m"},function(H){return E.charAttributes(H)}),E._parser.setCsiHandler({final:"n"},function(H){return E.deviceStatus(H)}),E._parser.setCsiHandler({prefix:"?",final:"n"},function(H){return E.deviceStatusPrivate(H)}),E._parser.setCsiHandler({intermediates:"!",final:"p"},function(H){return E.softReset(H)}),E._parser.setCsiHandler({intermediates:" ",final:"q"},function(H){return E.setCursorStyle(H)}),E._parser.setCsiHandler({final:"r"},function(H){return E.setScrollRegion(H)}),E._parser.setCsiHandler({final:"s"},function(H){return E.saveCursor(H)}),E._parser.setCsiHandler({final:"t"},function(H){return E.windowOptions(H)}),E._parser.setCsiHandler({final:"u"},function(H){return E.restoreCursor(H)}),E._parser.setCsiHandler({intermediates:"'",final:"}"},function(H){return E.insertColumns(H)}),E._parser.setCsiHandler({intermediates:"'",final:"~"},function(H){return E.deleteColumns(H)}),E._parser.setExecuteHandler(c.C0.BEL,function(){return E.bell()}),E._parser.setExecuteHandler(c.C0.LF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(c.C0.VT,function(){return E.lineFeed()}),E._parser.setExecuteHandler(c.C0.FF,function(){return E.lineFeed()}),E._parser.setExecuteHandler(c.C0.CR,function(){return E.carriageReturn()}),E._parser.setExecuteHandler(c.C0.BS,function(){return E.backspace()}),E._parser.setExecuteHandler(c.C0.HT,function(){return E.tab()}),E._parser.setExecuteHandler(c.C0.SO,function(){return E.shiftOut()}),E._parser.setExecuteHandler(c.C0.SI,function(){return E.shiftIn()}),E._parser.setExecuteHandler(c.C1.IND,function(){return E.index()}),E._parser.setExecuteHandler(c.C1.NEL,function(){return E.nextLine()}),E._parser.setExecuteHandler(c.C1.HTS,function(){return E.tabSet()}),E._parser.setOscHandler(0,new s.OscHandler(function(H){E.setTitle(H),E.setIconName(H)})),E._parser.setOscHandler(1,new s.OscHandler(function(H){return E.setIconName(H)})),E._parser.setOscHandler(2,new s.OscHandler(function(H){return E.setTitle(H)})),E._parser.setEscHandler({final:"7"},function(){return E.saveCursor()}),E._parser.setEscHandler({final:"8"},function(){return E.restoreCursor()}),E._parser.setEscHandler({final:"D"},function(){return E.index()}),E._parser.setEscHandler({final:"E"},function(){return E.nextLine()}),E._parser.setEscHandler({final:"H"},function(){return E.tabSet()}),E._parser.setEscHandler({final:"M"},function(){return E.reverseIndex()}),E._parser.setEscHandler({final:"="},function(){return E.keypadApplicationMode()}),E._parser.setEscHandler({final:">"},function(){return E.keypadNumericMode()}),E._parser.setEscHandler({final:"c"},function(){return E.fullReset()}),E._parser.setEscHandler({final:"n"},function(){return E.setgLevel(2)}),E._parser.setEscHandler({final:"o"},function(){return E.setgLevel(3)}),E._parser.setEscHandler({final:"|"},function(){return E.setgLevel(3)}),E._parser.setEscHandler({final:"}"},function(){return E.setgLevel(2)}),E._parser.setEscHandler({final:"~"},function(){return E.setgLevel(1)}),E._parser.setEscHandler({intermediates:"%",final:"@"},function(){return E.selectDefaultCharset()}),E._parser.setEscHandler({intermediates:"%",final:"G"},function(){return E.selectDefaultCharset()});var G=function(H){B._parser.setEscHandler({intermediates:"(",final:H},function(){return E.selectCharset("("+H)}),B._parser.setEscHandler({intermediates:")",final:H},function(){return E.selectCharset(")"+H)}),B._parser.setEscHandler({intermediates:"*",final:H},function(){return E.selectCharset("*"+H)}),B._parser.setEscHandler({intermediates:"+",final:H},function(){return E.selectCharset("+"+H)}),B._parser.setEscHandler({intermediates:"-",final:H},function(){return E.selectCharset("-"+H)}),B._parser.setEscHandler({intermediates:".",final:H},function(){return E.selectCharset("."+H)}),B._parser.setEscHandler({intermediates:"/",final:H},function(){return E.selectCharset("/"+H)})},B=this;for(var W in f.CHARSETS)G(W);return E._parser.setEscHandler({intermediates:"#",final:"8"},function(){return E.screenAlignmentPattern()}),E._parser.setErrorHandler(function(H){return E._logService.error("Parsing error: ",H),H}),E._parser.setDcsHandler({intermediates:"$",final:"q"},new L(E._bufferService,E._coreService,E._logService,E._optionsService)),E}return p(A,I),Object.defineProperty(A.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),A.prototype.dispose=function(){I.prototype.dispose.call(this)},A.prototype.parse=function(C){var y=this._bufferService.buffer,b=y.x,x=y.y;if(this._logService.debug("parsing data",C),this._parseBuffer.length<C.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(C.length,131072))),this._dirtyRowService.clearRange(),C.length>131072)for(var M=0;M<C.length;M+=131072){var D=M+131072<C.length?M+131072:C.length,F=typeof C=="string"?this._stringDecoder.decode(C.substring(M,D),this._parseBuffer):this._utf8Decoder.decode(C.subarray(M,D),this._parseBuffer);this._parser.parse(this._parseBuffer,F)}else F=typeof C=="string"?this._stringDecoder.decode(C,this._parseBuffer):this._utf8Decoder.decode(C,this._parseBuffer),this._parser.parse(this._parseBuffer,F);(y=this._bufferService.buffer).x===b&&y.y===x||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},A.prototype.print=function(C,y,b){var x,M,D=this._bufferService.buffer,F=this._charsetService.charset,z=this._optionsService.options.screenReaderMode,X=this._bufferService.cols,J=this._coreService.decPrivateModes.wraparound,K=this._terminal.insertMode,E=this._curAttrData,G=D.lines.get(D.y+D.ybase);this._dirtyRowService.markDirty(D.y),D.x&&b-y>0&&G.getWidth(D.x-1)===2&&G.setCellFromCodePoint(D.x-1,0,1,E.fg,E.bg);for(var B=y;B<b;++B){if(x=C[B],M=this._unicodeService.wcwidth(x),x<127&&F){var W=F[String.fromCharCode(x)];W&&(x=W.charCodeAt(0))}if(z&&this._terminal.onA11yCharEmitter.fire(r.stringFromCodePoint(x)),M||!D.x){if(D.x+M-1>=X){if(J)D.x=0,D.y++,D.y===D.scrollBottom+1?(D.y--,this._terminal.scroll(this._eraseAttrData(),!0)):(D.y>=this._bufferService.rows&&(D.y=this._bufferService.rows-1),D.lines.get(D.y).isWrapped=!0),G=D.lines.get(D.y+D.ybase);else if(D.x=X-1,M===2)continue}if(K&&(G.insertCells(D.x,M,D.getNullCell(E),E),G.getWidth(X-1)===2&&G.setCellFromCodePoint(X-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,E.fg,E.bg)),G.setCellFromCodePoint(D.x++,x,M,E.fg,E.bg),M>0)for(;--M;)G.setCellFromCodePoint(D.x++,0,0,E.fg,E.bg)}else G.getWidth(D.x-1)?G.addCodepointToCell(D.x-1,x):G.addCodepointToCell(D.x-2,x)}b-y>0&&(G.loadCell(D.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),D.x<X&&b-y>0&&G.getWidth(D.x)===0&&!G.hasContent(D.x)&&G.setCellFromCodePoint(D.x,0,1,E.fg,E.bg),this._dirtyRowService.markDirty(D.y)},A.prototype.addCsiHandler=function(C,y){var b=this;return C.final!=="t"||C.prefix||C.intermediates?this._parser.addCsiHandler(C,y):this._parser.addCsiHandler(C,function(x){return!S(x.params[0],b._optionsService.options.windowOptions)||y(x)})},A.prototype.addDcsHandler=function(C,y){return this._parser.addDcsHandler(C,new d.DcsHandler(y))},A.prototype.addEscHandler=function(C,y){return this._parser.addEscHandler(C,y)},A.prototype.addOscHandler=function(C,y){return this._parser.addOscHandler(C,new s.OscHandler(y))},A.prototype.bell=function(){this._onRequestBell.fire()},A.prototype.lineFeed=function(){var C=this._bufferService.buffer;this._dirtyRowService.markDirty(C.y),this._optionsService.options.convertEol&&(C.x=0),C.y++,C.y===C.scrollBottom+1?(C.y--,this._terminal.scroll(this._eraseAttrData())):C.y>=this._bufferService.rows&&(C.y=this._bufferService.rows-1),C.x>=this._bufferService.cols&&C.x--,this._dirtyRowService.markDirty(C.y),this._onLineFeed.fire()},A.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},A.prototype.backspace=function(){this._restrictCursor(),this._bufferService.buffer.x>0&&this._bufferService.buffer.x--},A.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var C=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-C)}},A.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},A.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},A.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},A.prototype._setCursor=function(C,y){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=C,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+y):(this._bufferService.buffer.x=C,this._bufferService.buffer.y=y),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},A.prototype._moveCursor=function(C,y){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+C,this._bufferService.buffer.y+y)},A.prototype.cursorUp=function(C){var y=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;y>=0?this._moveCursor(0,-Math.min(y,C.params[0]||1)):this._moveCursor(0,-(C.params[0]||1))},A.prototype.cursorDown=function(C){var y=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;y>=0?this._moveCursor(0,Math.min(y,C.params[0]||1)):this._moveCursor(0,C.params[0]||1)},A.prototype.cursorForward=function(C){this._moveCursor(C.params[0]||1,0)},A.prototype.cursorBackward=function(C){this._moveCursor(-(C.params[0]||1),0)},A.prototype.cursorNextLine=function(C){this.cursorDown(C),this._bufferService.buffer.x=0},A.prototype.cursorPrecedingLine=function(C){this.cursorUp(C),this._bufferService.buffer.x=0},A.prototype.cursorCharAbsolute=function(C){this._setCursor((C.params[0]||1)-1,this._bufferService.buffer.y)},A.prototype.cursorPosition=function(C){this._setCursor(C.length>=2?(C.params[1]||1)-1:0,(C.params[0]||1)-1)},A.prototype.charPosAbsolute=function(C){this._setCursor((C.params[0]||1)-1,this._bufferService.buffer.y)},A.prototype.hPositionRelative=function(C){this._moveCursor(C.params[0]||1,0)},A.prototype.linePosAbsolute=function(C){this._setCursor(this._bufferService.buffer.x,(C.params[0]||1)-1)},A.prototype.vPositionRelative=function(C){this._moveCursor(0,C.params[0]||1)},A.prototype.hVPosition=function(C){this.cursorPosition(C)},A.prototype.tabClear=function(C){var y=C.params[0];y===0?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:y===3&&(this._bufferService.buffer.tabs={})},A.prototype.cursorForwardTab=function(C){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var y=C.params[0]||1;y--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},A.prototype.cursorBackwardTab=function(C){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var y=C.params[0]||1,b=this._bufferService.buffer;y--;)b.x=b.prevStop()},A.prototype._eraseInBufferLine=function(C,y,b,x){x===void 0&&(x=!1);var M=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+C);M.replaceCells(y,b,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),x&&(M.isWrapped=!1)},A.prototype._resetBufferLine=function(C){var y=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+C);y.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),y.isWrapped=!1},A.prototype.eraseInDisplay=function(C){var y;switch(this._restrictCursor(),C.params[0]){case 0:for(y=this._bufferService.buffer.y,this._dirtyRowService.markDirty(y),this._eraseInBufferLine(y++,this._bufferService.buffer.x,this._bufferService.cols,this._bufferService.buffer.x===0);y<this._bufferService.rows;y++)this._resetBufferLine(y);this._dirtyRowService.markDirty(y);break;case 1:for(y=this._bufferService.buffer.y,this._dirtyRowService.markDirty(y),this._eraseInBufferLine(y,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(y+1).isWrapped=!1);y--;)this._resetBufferLine(y);this._dirtyRowService.markDirty(0);break;case 2:for(y=this._bufferService.rows,this._dirtyRowService.markDirty(y-1);y--;)this._resetBufferLine(y);this._dirtyRowService.markDirty(0);break;case 3:var b=this._bufferService.buffer.lines.length-this._bufferService.rows;b>0&&(this._bufferService.buffer.lines.trimStart(b),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-b,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-b,0),this._onScroll.fire(0))}},A.prototype.eraseInLine=function(C){switch(this._restrictCursor(),C.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},A.prototype.insertLines=function(C){this._restrictCursor();var y=C.params[0]||1,b=this._bufferService.buffer;if(!(b.y>b.scrollBottom||b.y<b.scrollTop)){for(var x=b.y+b.ybase,M=this._bufferService.rows-1-b.scrollBottom,D=this._bufferService.rows-1+b.ybase-M+1;y--;)b.lines.splice(D-1,1),b.lines.splice(x,0,b.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(b.y,b.scrollBottom),b.x=0}},A.prototype.deleteLines=function(C){this._restrictCursor();var y=C.params[0]||1,b=this._bufferService.buffer;if(!(b.y>b.scrollBottom||b.y<b.scrollTop)){var x,M=b.y+b.ybase;for(x=this._bufferService.rows-1-b.scrollBottom,x=this._bufferService.rows-1+b.ybase-x;y--;)b.lines.splice(M,1),b.lines.splice(x,0,b.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(b.y,b.scrollBottom),b.x=0}},A.prototype.insertChars=function(C){this._restrictCursor();var y=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);y&&(y.insertCells(this._bufferService.buffer.x,C.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},A.prototype.deleteChars=function(C){this._restrictCursor();var y=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);y&&(y.deleteCells(this._bufferService.buffer.x,C.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},A.prototype.scrollUp=function(C){for(var y=C.params[0]||1,b=this._bufferService.buffer;y--;)b.lines.splice(b.ybase+b.scrollTop,1),b.lines.splice(b.ybase+b.scrollBottom,0,b.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom)},A.prototype.scrollDown=function(C){for(var y=C.params[0]||1,b=this._bufferService.buffer;y--;)b.lines.splice(b.ybase+b.scrollBottom,1),b.lines.splice(b.ybase+b.scrollTop,0,b.getBlankLine(o.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom)},A.prototype.scrollLeft=function(C){var y=this._bufferService.buffer;if(!(y.y>y.scrollBottom||y.y<y.scrollTop)){for(var b=C.params[0]||1,x=y.scrollTop;x<=y.scrollBottom;++x){var M=y.lines.get(y.ybase+x);M.deleteCells(0,b,y.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}this._dirtyRowService.markRangeDirty(y.scrollTop,y.scrollBottom)}},A.prototype.scrollRight=function(C){var y=this._bufferService.buffer;if(!(y.y>y.scrollBottom||y.y<y.scrollTop)){for(var b=C.params[0]||1,x=y.scrollTop;x<=y.scrollBottom;++x){var M=y.lines.get(y.ybase+x);M.insertCells(0,b,y.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}this._dirtyRowService.markRangeDirty(y.scrollTop,y.scrollBottom)}},A.prototype.insertColumns=function(C){var y=this._bufferService.buffer;if(!(y.y>y.scrollBottom||y.y<y.scrollTop)){for(var b=C.params[0]||1,x=y.scrollTop;x<=y.scrollBottom;++x){var M=this._bufferService.buffer.lines.get(y.ybase+x);M.insertCells(y.x,b,y.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}this._dirtyRowService.markRangeDirty(y.scrollTop,y.scrollBottom)}},A.prototype.deleteColumns=function(C){var y=this._bufferService.buffer;if(!(y.y>y.scrollBottom||y.y<y.scrollTop)){for(var b=C.params[0]||1,x=y.scrollTop;x<=y.scrollBottom;++x){var M=y.lines.get(y.ybase+x);M.deleteCells(y.x,b,y.getNullCell(this._eraseAttrData()),this._eraseAttrData()),M.isWrapped=!1}this._dirtyRowService.markRangeDirty(y.scrollTop,y.scrollBottom)}},A.prototype.eraseChars=function(C){this._restrictCursor();var y=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);y&&(y.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(C.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},A.prototype.repeatPrecedingCharacter=function(C){if(this._parser.precedingCodepoint){for(var y=C.params[0]||1,b=new Uint32Array(y),x=0;x<y;++x)b[x]=this._parser.precedingCodepoint;this.print(b,0,b.length)}},A.prototype.sendDeviceAttributesPrimary=function(C){C.params[0]>0||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c"))},A.prototype.sendDeviceAttributesSecondary=function(C){C.params[0]>0||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(C.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c"))},A.prototype.setMode=function(C){for(var y=0;y<C.length;y++)switch(C.params[y]){case 4:this._terminal.insertMode=!0}},A.prototype.setModePrivate=function(C){for(var y,b,x=0;x<C.length;x++)switch(C.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,(y=this._terminal.viewport)===null||y===void 0||y.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),(b=this._terminal.viewport)===null||b===void 0||b.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},A.prototype.resetMode=function(C){for(var y=0;y<C.length;y++)switch(C.params[y]){case 4:this._terminal.insertMode=!1}},A.prototype.resetModePrivate=function(C){for(var y,b,x=0;x<C.length;x++)switch(C.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,(y=this._terminal.viewport)===null||y===void 0||y.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),C.params[x]===1049&&this.restoreCursor(),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),(b=this._terminal.viewport)===null||b===void 0||b.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},A.prototype._extractColor=function(C,y,b){var x=[0,0,-1,0,0,0],M=0,D=0;do{if(x[D+M]=C.params[y+D],C.hasSubParams(y+D)){var F=C.getSubParams(y+D),z=0;do x[1]===5&&(M=1),x[D+z+1+M]=F[z];while(++z<F.length&&z+D+1+M<x.length);break}if(x[1]===5&&D+M>=2||x[1]===2&&D+M>=5)break;x[1]&&(M=1)}while(++D+y<C.length&&D+M<x.length);for(z=2;z<x.length;++z)x[z]===-1&&(x[z]=0);return x[0]===38?x[1]===2?(b.fg|=50331648,b.fg&=-16777216,b.fg|=a.AttributeData.fromColorRGB([x[3],x[4],x[5]])):x[1]===5&&(b.fg&=-50331904,b.fg|=33554432|255&x[3]):x[0]===48&&(x[1]===2?(b.bg|=50331648,b.bg&=-16777216,b.bg|=a.AttributeData.fromColorRGB([x[3],x[4],x[5]])):x[1]===5&&(b.bg&=-50331904,b.bg|=33554432|255&x[3])),D},A.prototype.charAttributes=function(C){if(C.length===1&&C.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg);for(var y,b=C.length,x=this._curAttrData,M=0;M<b;M++)(y=C.params[M])>=30&&y<=37?(x.fg&=-50331904,x.fg|=16777216|y-30):y>=40&&y<=47?(x.bg&=-50331904,x.bg|=16777216|y-40):y>=90&&y<=97?(x.fg&=-50331904,x.fg|=16777224|y-90):y>=100&&y<=107?(x.bg&=-50331904,x.bg|=16777224|y-100):y===0?(x.fg=o.DEFAULT_ATTR_DATA.fg,x.bg=o.DEFAULT_ATTR_DATA.bg):y===1?x.fg|=134217728:y===3?x.bg|=67108864:y===4?x.fg|=268435456:y===5?x.fg|=536870912:y===7?x.fg|=67108864:y===8?x.fg|=1073741824:y===2?x.bg|=134217728:y===22?(x.fg&=-134217729,x.bg&=-134217729):y===23?x.bg&=-67108865:y===24?x.fg&=-268435457:y===25?x.fg&=-536870913:y===27?x.fg&=-67108865:y===28?x.fg&=-1073741825:y===39?(x.fg&=-67108864,x.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):y===49?(x.bg&=-67108864,x.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):y===38||y===48?M+=this._extractColor(C,M,x):y===100?(x.fg&=-67108864,x.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,x.bg&=-67108864,x.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",y)},A.prototype.deviceStatus=function(C){switch(C.params[0]){case 5:this._coreService.triggerDataEvent(c.C0.ESC+"[0n");break;case 6:var y=this._bufferService.buffer.y+1,b=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"["+y+";"+b+"R")}},A.prototype.deviceStatusPrivate=function(C){switch(C.params[0]){case 6:var y=this._bufferService.buffer.y+1,b=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"[?"+y+";"+b+"R")}},A.prototype.softReset=function(C){var y;this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,(y=this._terminal.viewport)===null||y===void 0||y.syncScrollArea(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},A.prototype.setCursorStyle=function(C){var y=C.params[0]||1;switch(y){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var b=y%2==1;this._optionsService.options.cursorBlink=b},A.prototype.setScrollRegion=function(C){var y,b=C.params[0]||1;(C.length<2||(y=C.params[1])>this._bufferService.rows||y===0)&&(y=this._bufferService.rows),y>b&&(this._bufferService.buffer.scrollTop=b-1,this._bufferService.buffer.scrollBottom=y-1,this._setCursor(0,0))},A.prototype.windowOptions=function(C){if(S(C.params[0],this._optionsService.options.windowOptions)){var y=C.length>1?C.params[1]:0,b=this._instantiationService.getService(v.IRenderService);switch(C.params[0]){case 14:if(b&&y!==2){console.log(b.dimensions);var x=b.dimensions.scaledCanvasWidth.toFixed(0),M=b.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(c.C0.ESC+"[4;"+M+";"+x+"t")}break;case 16:b&&(x=b.dimensions.scaledCellWidth.toFixed(0),M=b.dimensions.scaledCellHeight.toFixed(0),this._coreService.triggerDataEvent(c.C0.ESC+"[6;"+M+";"+x+"t"));break;case 18:this._bufferService&&this._coreService.triggerDataEvent(c.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:y!==0&&y!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),y!==0&&y!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:y!==0&&y!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),y!==0&&y!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},A.prototype.saveCursor=function(C){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},A.prototype.restoreCursor=function(C){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},A.prototype.setTitle=function(C){this._windowTitle=C,this._terminal.handleTitle(C)},A.prototype.setIconName=function(C){this._iconName=C},A.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},A.prototype.keypadApplicationMode=function(){var C;this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,(C=this._terminal.viewport)===null||C===void 0||C.syncScrollArea()},A.prototype.keypadNumericMode=function(){var C;this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,(C=this._terminal.viewport)===null||C===void 0||C.syncScrollArea()},A.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET)},A.prototype.selectCharset=function(C){C.length===2?C[0]!=="/"&&this._charsetService.setgCharset(m[C[0]],f.CHARSETS[C[1]]||f.DEFAULT_CHARSET):this.selectDefaultCharset()},A.prototype.index=function(){this._restrictCursor();var C=this._bufferService.buffer;this._bufferService.buffer.y++,C.y===C.scrollBottom+1?(C.y--,this._terminal.scroll(this._eraseAttrData())):C.y>=this._bufferService.rows&&(C.y=this._bufferService.rows-1),this._restrictCursor()},A.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},A.prototype.reverseIndex=function(){this._restrictCursor();var C=this._bufferService.buffer;if(C.y===C.scrollTop){var y=C.scrollBottom-C.scrollTop;C.lines.shiftElements(C.y+C.ybase,y,1),C.lines.set(C.y+C.ybase,C.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(C.scrollTop,C.scrollBottom)}else C.y--,this._restrictCursor()},A.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},A.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},A.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},A.prototype.setgLevel=function(C){this._charsetService.setgLevel(C)},A.prototype.screenAlignmentPattern=function(){var C=new e.CellData;C.content=1<<22|"E".charCodeAt(0),C.fg=this._curAttrData.fg,C.bg=this._curAttrData.bg;var y=this._bufferService.buffer;this._setCursor(0,0);for(var b=0;b<this._bufferService.rows;++b){var x=y.y+y.ybase+b;y.lines.get(x).fill(C),y.lines.get(x).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},A}(_.Disposable);h.InputHandler=T},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(2),f=g(15),u=g(19),_=g(20),t=g(22),r=function(){function i(n){this.table=new Uint8Array(n)}return i.prototype.setDefault=function(n,e){f.fill(this.table,n<<4|e)},i.prototype.add=function(n,e,a,s){this.table[e<<8|n]=a<<4|s},i.prototype.addMany=function(n,e,a,s){for(var d=0;d<n.length;d++)this.table[e<<8|n[d]]=a<<4|s},i}();h.TransitionTable=r,h.VT500_TRANSITION_TABLE=function(){var i=new r(4095),n=Array.apply(null,Array(256)).map(function(m,S){return S}),e=function(m,S){return n.slice(m,S)},a=e(32,127),s=e(0,24);s.push(25),s.push.apply(s,e(28,32));var d,v=e(0,14);for(d in i.setDefault(1,0),i.addMany(a,0,2,0),v)i.addMany([24,26,153,154],d,3,0),i.addMany(e(128,144),d,3,0),i.addMany(e(144,152),d,3,0),i.add(156,d,0,0),i.add(27,d,11,1),i.add(157,d,4,8),i.addMany([152,158,159],d,0,7),i.add(155,d,11,3),i.add(144,d,11,9);return i.addMany(s,0,3,0),i.addMany(s,1,3,1),i.add(127,1,0,1),i.addMany(s,8,0,8),i.addMany(s,3,3,3),i.add(127,3,0,3),i.addMany(s,4,3,4),i.add(127,4,0,4),i.addMany(s,6,3,6),i.addMany(s,5,3,5),i.add(127,5,0,5),i.addMany(s,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(a,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(e(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(a,7,0,7),i.addMany(s,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(e(64,127),3,7,0),i.addMany(e(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(e(48,60),4,8,4),i.addMany(e(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(e(32,64),6,0,6),i.add(127,6,0,6),i.addMany(e(64,127),6,0,0),i.addMany(e(32,48),3,9,5),i.addMany(e(32,48),5,9,5),i.addMany(e(48,64),5,0,6),i.addMany(e(64,127),5,7,0),i.addMany(e(32,48),4,9,5),i.addMany(e(32,48),1,9,2),i.addMany(e(32,48),2,9,2),i.addMany(e(48,127),2,10,0),i.addMany(e(48,80),1,10,0),i.addMany(e(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(e(96,127),1,10,0),i.add(80,1,11,9),i.addMany(s,9,0,9),i.add(127,9,0,9),i.addMany(e(28,32),9,0,9),i.addMany(e(32,48),9,9,12),i.addMany(e(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(s,11,0,11),i.addMany(e(32,128),11,0,11),i.addMany(e(28,32),11,0,11),i.addMany(s,10,0,10),i.add(127,10,0,10),i.addMany(e(28,32),10,0,10),i.addMany(e(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(e(32,48),10,9,12),i.addMany(s,12,0,12),i.add(127,12,0,12),i.addMany(e(28,32),12,0,12),i.addMany(e(32,48),12,9,12),i.addMany(e(48,64),12,0,11),i.addMany(e(64,127),12,12,13),i.addMany(e(64,127),10,12,13),i.addMany(e(64,127),9,12,13),i.addMany(s,13,13,13),i.addMany(a,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(160,0,2,0),i.add(160,8,5,8),i.add(160,6,0,6),i.add(160,11,0,11),i.add(160,13,13,13),i}();var o=function(i){function n(e){e===void 0&&(e=h.VT500_TRANSITION_TABLE);var a=i.call(this)||this;return a._transitions=e,a.initialState=0,a.currentState=a.initialState,a._params=new u.Params,a._params.addParam(0),a._collect=0,a.precedingCodepoint=0,a._printHandlerFb=function(s,d,v){},a._executeHandlerFb=function(s){},a._csiHandlerFb=function(s,d){},a._escHandlerFb=function(s){},a._errorHandlerFb=function(s){return s},a._printHandler=a._printHandlerFb,a._executeHandlers=Object.create(null),a._csiHandlers=Object.create(null),a._escHandlers=Object.create(null),a._oscParser=new _.OscParser,a._dcsParser=new t.DcsParser,a._errorHandler=a._errorHandlerFb,a.setEscHandler({final:"\\"},function(){}),a}return p(n,i),n.prototype._identifier=function(e,a){a===void 0&&(a=[64,126]);var s=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((s=e.prefix.charCodeAt(0))&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<e.intermediates.length;++d){var v=e.intermediates.charCodeAt(d);if(32>v||v>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=v}}if(e.final.length!==1)throw new Error("final must be a single byte");var m=e.final.charCodeAt(0);if(a[0]>m||m>a[1])throw new Error("final must be in range "+a[0]+" .. "+a[1]);return(s<<=8)|m},n.prototype.identToString=function(e){for(var a=[];e;)a.push(String.fromCharCode(255&e)),e>>=8;return a.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(e){this._printHandler=e},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.addEscHandler=function(e,a){var s=this._identifier(e,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);var d=this._escHandlers[s];return d.push(a),{dispose:function(){var v=d.indexOf(a);v!==-1&&d.splice(v,1)}}},n.prototype.setEscHandler=function(e,a){this._escHandlers[this._identifier(e,[48,126])]=[a]},n.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},n.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},n.prototype.setExecuteHandler=function(e,a){this._executeHandlers[e.charCodeAt(0)]=a},n.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},n.prototype.addCsiHandler=function(e,a){var s=this._identifier(e);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);var d=this._csiHandlers[s];return d.push(a),{dispose:function(){var v=d.indexOf(a);v!==-1&&d.splice(v,1)}}},n.prototype.setCsiHandler=function(e,a){this._csiHandlers[this._identifier(e)]=[a]},n.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},n.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},n.prototype.addDcsHandler=function(e,a){return this._dcsParser.addHandler(this._identifier(e),a)},n.prototype.setDcsHandler=function(e,a){this._dcsParser.setHandler(this._identifier(e),a)},n.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},n.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},n.prototype.addOscHandler=function(e,a){return this._oscParser.addHandler(e,a)},n.prototype.setOscHandler=function(e,a){this._oscParser.setHandler(e,a)},n.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},n.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},n.prototype.setErrorHandler=function(e){this._errorHandler=e},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},n.prototype.parse=function(e,a){for(var s=0,d=0,v=this.currentState,m=this._oscParser,S=this._dcsParser,L=this._collect,T=this._params,I=this._transitions.table,A=0;A<a;++A){switch((d=I[v<<8|((s=e[A])<160?s:160)])>>4){case 2:for(var C=A+1;;++C){if(C>=a||(s=e[C])<32||s>126&&s<160){this._printHandler(e,A,C),A=C-1;break}if(++C>=a||(s=e[C])<32||s>126&&s<160){this._printHandler(e,A,C),A=C-1;break}if(++C>=a||(s=e[C])<32||s>126&&s<160){this._printHandler(e,A,C),A=C-1;break}if(++C>=a||(s=e[C])<32||s>126&&s<160){this._printHandler(e,A,C),A=C-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:A,code:s,currentState:v,collect:L,params:T,abort:!1}).abort)return;break;case 7:for(var y=this._csiHandlers[L<<8|s],b=y?y.length-1:-1;b>=0&&y[b](T)===!1;b--);b<0&&this._csiHandlerFb(L<<8|s,T),this.precedingCodepoint=0;break;case 8:do switch(s){case 59:T.addParam(0);break;case 58:T.addSubParam(-1);break;default:T.addDigit(s-48)}while(++A<a&&(s=e[A])>47&&s<60);A--;break;case 9:L<<=8,L|=s;break;case 10:for(var x=this._escHandlers[L<<8|s],M=x?x.length-1:-1;M>=0&&x[M]()===!1;M--);M<0&&this._escHandlerFb(L<<8|s),this.precedingCodepoint=0;break;case 11:T.reset(),T.addParam(0),L=0;break;case 12:S.hook(L<<8|s,T);break;case 13:for(var D=A+1;;++D)if(D>=a||(s=e[D])===24||s===26||s===27||s>127&&s<160){S.put(e,A,D),A=D-1;break}break;case 14:S.unhook(s!==24&&s!==26),s===27&&(d|=1),T.reset(),T.addParam(0),L=0,this.precedingCodepoint=0;break;case 4:m.start();break;case 5:for(var F=A+1;;F++)if(F>=a||(s=e[F])<32||s>127&&s<=159){m.put(e,A,F),A=F-1;break}break;case 6:m.end(s!==24&&s!==26),s===27&&(d|=1),T.reset(),T.addParam(0),L=0,this.precedingCodepoint=0}v=15&d}this._collect=L,this.currentState=v},n}(c.Disposable);h.EscapeSequenceParser=o},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(m,S){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,T){L.__proto__=T}||function(L,T){for(var I in T)T.hasOwnProperty(I)&&(L[I]=T[I])})(m,S)},function(m,S){function L(){this.constructor=m}l(m,S),m.prototype=S===null?Object.create(S):(L.prototype=S.prototype,new L)}),c=this&&this.__decorate||function(m,S,L,T){var I,A=arguments.length,C=A<3?S:T===null?T=Object.getOwnPropertyDescriptor(S,L):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,S,L,T);else for(var y=m.length-1;y>=0;y--)(I=m[y])&&(C=(A<3?I(C):A>3?I(S,L,C):I(S,L))||C);return A>3&&C&&Object.defineProperty(S,L,C),C},f=this&&this.__param||function(m,S){return function(L,T){S(L,T,m)}};Object.defineProperty(h,"__esModule",{value:!0});var u=g(40),_=g(46),t=g(47),r=g(48),o=g(27),i=g(2),n=g(4),e=g(1),a=g(23),s=g(0),d=1,v=function(m){function S(L,T,I,A,C,y,b,x,M){var D=m.call(this)||this;D._colors=L,D._screenElement=T,D.linkifier=I,D.linkifier2=A,D._bufferService=C,D._charSizeService=y,D._optionsService=b,D.coreService=x,D.coreBrowserService=M,D._id=d++,D._onRequestRefreshRows=new s.EventEmitter;var F=D._optionsService.options.allowTransparency;return D._characterJoinerRegistry=new o.CharacterJoinerRegistry(D._bufferService),D._renderLayers=[new u.TextRenderLayer(D._screenElement,0,D._colors,D._characterJoinerRegistry,F,D._id,D._bufferService,b),new _.SelectionRenderLayer(D._screenElement,1,D._colors,D._id,D._bufferService,b),new r.LinkRenderLayer(D._screenElement,2,D._colors,D._id,I,A,D._bufferService,b),new t.CursorRenderLayer(D._screenElement,3,D._colors,D._id,D._onRequestRefreshRows,D._bufferService,b,x,M)],D.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},D._devicePixelRatio=window.devicePixelRatio,D._updateDimensions(),D.onOptionsChanged(),D}return p(S,m),Object.defineProperty(S.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),S.prototype.dispose=function(){m.prototype.dispose.call(this),this._renderLayers.forEach(function(L){return L.dispose()}),a.removeTerminalFromCache(this._id)},S.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},S.prototype.setColors=function(L){var T=this;this._colors=L,this._renderLayers.forEach(function(I){I.setColors(T._colors),I.reset()})},S.prototype.onResize=function(L,T){var I=this;this._updateDimensions(),this._renderLayers.forEach(function(A){return A.resize(I.dimensions)}),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},S.prototype.onBlur=function(){this._runOperation(function(L){return L.onBlur()})},S.prototype.onFocus=function(){this._runOperation(function(L){return L.onFocus()})},S.prototype.onSelectionChanged=function(L,T,I){I===void 0&&(I=!1),this._runOperation(function(A){return A.onSelectionChanged(L,T,I)})},S.prototype.onCursorMove=function(){this._runOperation(function(L){return L.onCursorMove()})},S.prototype.onOptionsChanged=function(){this._runOperation(function(L){return L.onOptionsChanged()})},S.prototype.clear=function(){this._runOperation(function(L){return L.reset()})},S.prototype._runOperation=function(L){this._renderLayers.forEach(function(T){return L(T)})},S.prototype.renderRows=function(L,T){this._renderLayers.forEach(function(I){return I.onGridChanged(L,T)})},S.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},S.prototype.registerCharacterJoiner=function(L){return this._characterJoinerRegistry.registerCharacterJoiner(L)},S.prototype.deregisterCharacterJoiner=function(L){return this._characterJoinerRegistry.deregisterCharacterJoiner(L)},c([f(4,e.IBufferService),f(5,n.ICharSizeService),f(6,e.IOptionsService),f(7,e.ICoreService),f(8,n.ICoreBrowserService)],S)}(i.Disposable);h.Renderer=v},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(41),f=g(13),u=g(6),_=g(3),t=g(27),r=g(5),o=function(i){function n(e,a,s,d,v,m,S,L){var T=i.call(this,e,"text",a,v,s,m,S,L)||this;return T.bufferService=S,T.optionsService=L,T._characterWidth=0,T._characterFont="",T._characterOverlapCache={},T._workCell=new r.CellData,T._state=new c.GridCache,T._characterJoinerRegistry=d,T}return p(n,i),n.prototype.resize=function(e){i.prototype.resize.call(this,e);var a=this._getFont(!1,!1);this._characterWidth===e.scaledCharWidth&&this._characterFont===a||(this._characterWidth=e.scaledCharWidth,this._characterFont=a,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},n.prototype.reset=function(){this._state.clear(),this._clearAll()},n.prototype._forEachCell=function(e,a,s,d){for(var v=e;v<=a;v++)for(var m=v+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.lines.get(m),L=s?s.getJoinedCharacters(m):[],T=0;T<this._bufferService.cols;T++){S.loadCell(T,this._workCell);var I=this._workCell,A=!1,C=T;if(I.getWidth()!==0){if(L.length>0&&T===L[0][0]){A=!0;var y=L.shift();I=new t.JoinedCellData(this._workCell,S.translateToString(!0,y[0],y[1]),y[1]-y[0]),C=y[1]-1}!A&&this._isOverlapping(I)&&C<S.length-1&&S.getCodePoint(C+1)===_.NULL_CELL_CODE&&(I.content&=-12582913,I.content|=2<<22),d(I,T,v),T=C}}},n.prototype._drawBackground=function(e,a){var s=this,d=this._ctx,v=this._bufferService.cols,m=0,S=0,L=null;d.save(),this._forEachCell(e,a,null,function(T,I,A){var C=null;T.isInverse()?C=T.isFgDefault()?s._colors.foreground.css:T.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(T.getFgColor()).join(",")+")":s._colors.ansi[T.getFgColor()].css:T.isBgRGB()?C="rgb("+u.AttributeData.toColorRGB(T.getBgColor()).join(",")+")":T.isBgPalette()&&(C=s._colors.ansi[T.getBgColor()].css),L===null&&(m=I,S=A),A!==S?(d.fillStyle=L||"",s._fillCells(m,S,v-m,1),m=I,S=A):L!==C&&(d.fillStyle=L||"",s._fillCells(m,S,I-m,1),m=I,S=A),L=C}),L!==null&&(d.fillStyle=L,this._fillCells(m,S,v-m,1)),d.restore()},n.prototype._drawForeground=function(e,a){var s=this;this._forEachCell(e,a,this._characterJoinerRegistry,function(d,v,m){if(!d.isInvisible()&&(s._drawChars(d,v,m),d.isUnderline())){if(s._ctx.save(),d.isInverse())if(d.isBgDefault())s._ctx.fillStyle=s._colors.background.css;else if(d.isBgRGB())s._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(d.getBgColor()).join(",")+")";else{var S=d.getBgColor();s._optionsService.options.drawBoldTextInBrightColors&&d.isBold()&&S<8&&(S+=8),s._ctx.fillStyle=s._colors.ansi[S].css}else if(d.isFgDefault())s._ctx.fillStyle=s._colors.foreground.css;else if(d.isFgRGB())s._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(d.getFgColor()).join(",")+")";else{var L=d.getFgColor();s._optionsService.options.drawBoldTextInBrightColors&&d.isBold()&&L<8&&(L+=8),s._ctx.fillStyle=s._colors.ansi[L].css}s._fillBottomLineAtCells(v,m,d.getWidth()),s._ctx.restore()}})},n.prototype.onGridChanged=function(e,a){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,a-e+1),this._drawBackground(e,a),this._drawForeground(e,a))},n.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},n.prototype._isOverlapping=function(e){if(e.getWidth()!==1||e.getCode()<256)return!1;var a=e.getChars();if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save(),this._ctx.font=this._characterFont;var s=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[a]=s,s},n}(f.BaseRenderLayer);h.TextRenderLayer=o},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this.cache=[]}return p.prototype.resize=function(c,f){for(var u=0;u<c;u++){this.cache.length<=u&&this.cache.push([]);for(var _=this.cache[u].length;_<f;_++)this.cache[u].push(void 0);this.cache[u].length=f}this.cache.length=c},p.prototype.clear=function(){for(var c=0;c<this.cache.length;c++)for(var f=0;f<this.cache[c].length;f++)this.cache[c][f]=void 0},p}();h.GridCache=l},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(s,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var S in m)m.hasOwnProperty(S)&&(v[S]=m[S])})(s,d)},function(s,d){function v(){this.constructor=s}l(s,d),s.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(9),f=g(43),u=g(25),_=g(45),t=g(11),r=g(26),o=g(10),i={css:"rgba(0, 0, 0, 0)",rgba:0};function n(s){return s.code<<21|s.bg<<12|s.fg<<3|(s.bold?0:4)+(s.dim?0:2)+(s.italic?0:1)}h.getGlyphCacheKey=n;var e=function(s){function d(v,m){var S=s.call(this)||this;S._config=m,S._drawToCacheCount=0,S._glyphsWaitingOnBitmap=[],S._bitmapCommitTimeout=null,S._bitmap=null,S._cacheCanvas=v.createElement("canvas"),S._cacheCanvas.width=1024,S._cacheCanvas.height=1024,S._cacheCtx=r.throwIfFalsy(S._cacheCanvas.getContext("2d",{alpha:!0}));var L=v.createElement("canvas");L.width=S._config.scaledCharWidth,L.height=S._config.scaledCharHeight,S._tmpCtx=r.throwIfFalsy(L.getContext("2d",{alpha:S._config.allowTransparency})),S._width=Math.floor(1024/S._config.scaledCharWidth),S._height=Math.floor(1024/S._config.scaledCharHeight);var T=S._width*S._height;return S._cacheMap=new _.LRUMap(T),S._cacheMap.prealloc(T),S}return p(d,s),d.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},d.prototype.beginFrame=function(){this._drawToCacheCount=0},d.prototype.draw=function(v,m,S,L){if(m.code===32)return!0;if(!this._canCache(m))return!1;var T=n(m),I=this._cacheMap.get(T);if(I!=null)return this._drawFromCache(v,I,S,L),!0;if(this._drawToCacheCount<100){var A;A=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var C=this._drawToCache(m,A);return this._cacheMap.set(T,C),this._drawFromCache(v,C,S,L),!0}return!1},d.prototype._canCache=function(v){return v.code<256},d.prototype._toCoordinateX=function(v){return v%this._width*this._config.scaledCharWidth},d.prototype._toCoordinateY=function(v){return Math.floor(v/this._width)*this._config.scaledCharHeight},d.prototype._drawFromCache=function(v,m,S,L){if(!m.isEmpty){var T=this._toCoordinateX(m.index),I=this._toCoordinateY(m.index);v.drawImage(m.inBitmap?this._bitmap:this._cacheCanvas,T,I,this._config.scaledCharWidth,this._config.scaledCharHeight,S,L,this._config.scaledCharWidth,this._config.scaledCharHeight)}},d.prototype._getColorFromAnsiIndex=function(v){return v<this._config.colors.ansi.length?this._config.colors.ansi[v]:u.DEFAULT_ANSI_COLORS[v]},d.prototype._getBackgroundColor=function(v){return this._config.allowTransparency?i:v.bg===c.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:v.bg<256?this._getColorFromAnsiIndex(v.bg):this._config.colors.background},d.prototype._getForegroundColor=function(v){return v.fg===c.INVERTED_DEFAULT_COLOR?o.color.opaque(this._config.colors.background):v.fg<256?this._getColorFromAnsiIndex(v.fg):this._config.colors.foreground},d.prototype._drawToCache=function(v,m){this._drawToCacheCount++,this._tmpCtx.save();var S=this._getBackgroundColor(v);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var L=v.bold?this._config.fontWeightBold:this._config.fontWeight,T=v.italic?"italic":"";this._tmpCtx.font=T+" "+L+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(v).css,v.dim&&(this._tmpCtx.globalAlpha=c.DIM_OPACITY),this._tmpCtx.fillText(v.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var I=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),A=!1;this._config.allowTransparency||(A=function(x,M){for(var D=!0,F=M.rgba>>>24,z=M.rgba>>>16&255,X=M.rgba>>>8&255,J=0;J<x.data.length;J+=4)x.data[J]===F&&x.data[J+1]===z&&x.data[J+2]===X?x.data[J+3]=0:D=!1;return D}(I,S));var C=this._toCoordinateX(m),y=this._toCoordinateY(m);this._cacheCtx.putImageData(I,C,y);var b={index:m,isEmpty:A,inBitmap:!1};return this._addGlyphToBitmap(b),b},d.prototype._addGlyphToBitmap=function(v){var m=this;!("createImageBitmap"in window)||t.isFirefox||t.isSafari||(this._glyphsWaitingOnBitmap.push(v),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return m._generateBitmap()},100)))},d.prototype._generateBitmap=function(){var v=this,m=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(S){v._bitmap=S;for(var L=0;L<m.length;L++)m[L].inBitmap=!0}),this._bitmapCommitTimeout=null},d}(f.BaseCharAtlas);h.DynamicCharAtlas=e;var a=function(s){function d(v,m){return s.call(this)||this}return p(d,s),d.prototype.draw=function(v,m,S,L){return!1},d}(f.BaseCharAtlas);h.NoneCharAtlas=a},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this._didWarmUp=!1}return p.prototype.dispose=function(){},p.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},p.prototype._doWarmUp=function(){},p.prototype.beginFrame=function(){},p}();h.BaseCharAtlas=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this._color={},this._rgba={}}return p.prototype.clear=function(){this._color={},this._rgba={}},p.prototype.setCss=function(c,f,u){this._rgba[c]||(this._rgba[c]={}),this._rgba[c][f]=u},p.prototype.getCss=function(c,f){return this._rgba[c]?this._rgba[c][f]:void 0},p.prototype.setColor=function(c,f,u){this._color[c]||(this._color[c]={}),this._color[c][f]=u},p.prototype.getColor=function(c,f){return this._color[c]?this._color[c][f]:void 0},p}();h.ColorContrastCache=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c){this.capacity=c,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return p.prototype._unlinkNode=function(c){var f=c.prev,u=c.next;c===this._head&&(this._head=u),c===this._tail&&(this._tail=f),f!==null&&(f.next=u),u!==null&&(u.prev=f)},p.prototype._appendNode=function(c){var f=this._tail;f!==null&&(f.next=c),c.prev=f,c.next=null,this._tail=c,this._head===null&&(this._head=c)},p.prototype.prealloc=function(c){for(var f=this._nodePool,u=0;u<c;u++)f.push({prev:null,next:null,key:null,value:null})},p.prototype.get=function(c){var f=this._map[c];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},p.prototype.peekValue=function(c){var f=this._map[c];return f!==void 0?f.value:null},p.prototype.peek=function(){var c=this._head;return c===null?null:c.value},p.prototype.set=function(c,f){var u=this._map[c];if(u!==void 0)u=this._map[c],this._unlinkNode(u),u.value=f;else if(this.size>=this.capacity)u=this._head,this._unlinkNode(u),delete this._map[u.key],u.key=c,u.value=f,this._map[c]=u;else{var _=this._nodePool;_.length>0?((u=_.pop()).key=c,u.value=f):u={prev:null,next:null,key:c,value:f},this._map[c]=u,this.size++}this._appendNode(u)},p}();h.LRUMap=l},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(f,u){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,t){_.__proto__=t}||function(_,t){for(var r in t)t.hasOwnProperty(r)&&(_[r]=t[r])})(f,u)},function(f,u){function _(){this.constructor=f}l(f,u),f.prototype=u===null?Object.create(u):(_.prototype=u.prototype,new _)});Object.defineProperty(h,"__esModule",{value:!0});var c=function(f){function u(_,t,r,o,i,n){var e=f.call(this,_,"selection",t,!0,r,o,i,n)||this;return e.bufferService=i,e.optionsService=n,e._clearState(),e}return p(u,f),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(_){f.prototype.resize.call(this,_),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(_,t,r){if(this._didStateChange(_,t,r,this._bufferService.buffer.ydisp))if(this._clearAll(),_&&t){var o=_[1]-this._bufferService.buffer.ydisp,i=t[1]-this._bufferService.buffer.ydisp,n=Math.max(o,0),e=Math.min(i,this._bufferService.rows-1);if(!(n>=this._bufferService.rows||e<0)){if(this._ctx.fillStyle=this._colors.selection.css,r){var a=_[0],s=t[0]-a,d=e-n+1;this._fillCells(a,n,s,d)}else{a=o===n?_[0]:0;var v=n===e?t[0]:this._bufferService.cols;this._fillCells(a,n,v-a,1);var m=Math.max(e-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,m),n!==e){var S=i===e?t[0]:this._bufferService.cols;this._fillCells(0,e,S,1)}}this._state.start=[_[0],_[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=r,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(_,t,r,o){return!this._areCoordinatesEqual(_,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||o!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(_,t){return!(!_||!t)&&_[0]===t[0]&&_[1]===t[1]},u}(g(13).BaseRenderLayer);h.SelectionRenderLayer=c},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(t,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)i.hasOwnProperty(n)&&(o[n]=i[n])})(t,r)},function(t,r){function o(){this.constructor=t}l(t,r),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(13),f=g(5),u=function(t){function r(o,i,n,e,a,s,d,v,m){var S=t.call(this,o,"cursor",i,!0,n,e,s,d)||this;return S._onRequestRefreshRowsEvent=a,S.bufferService=s,S.optionsService=d,S._coreService=v,S._coreBrowserService=m,S._cell=new f.CellData,S._state={x:0,y:0,isFocused:!1,style:"",width:0},S._cursorRenderers={bar:S._renderBarCursor.bind(S),block:S._renderBlockCursor.bind(S),underline:S._renderUnderlineCursor.bind(S)},S}return p(r,t),r.prototype.resize=function(o){t.prototype.resize.call(this,o),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},r.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var o,i=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new _(this._coreBrowserService.isFocused,function(){i._render(!0)})):((o=this._cursorBlinkStateManager)===null||o===void 0||o.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype.onGridChanged=function(o,i){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(o){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var i=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=i-this._bufferService.buffer.ydisp;if(n<0||n>=this._bufferService.rows)this._clearCursor();else{var e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(i).loadCell(e,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var a=this._optionsService.options.cursorStyle;return a&&a!=="block"?this._cursorRenderers[a](e,n,this._cell):this._renderBlurCursor(e,n,this._cell),this._ctx.restore(),this._state.x=e,this._state.y=n,this._state.isFocused=!1,this._state.style=a,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===e&&this._state.y===n&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](e,n,this._cell),this._ctx.restore(),this._state.x=e,this._state.y=n,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(o,i,this._optionsService.options.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(o,i,n.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(n,o,i),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(o,i),this._ctx.restore()},r.prototype._renderBlurCursor=function(o,i,n){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(o,i,n.getWidth(),1),this._ctx.restore()},r}(c.BaseRenderLayer);h.CursorRenderLayer=u;var _=function(){function t(r,o){this._renderCallback=o,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},t.prototype._restartInterval=function(r){var o=this;r===void 0&&(r=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(o._animationTimeRestarted){var i=600-(Date.now()-o._animationTimeRestarted);if(o._animationTimeRestarted=void 0,i>0)return void o._restartInterval(i)}o.isCursorVisible=!1,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0}),o._blinkInterval=window.setInterval(function(){if(o._animationTimeRestarted){var n=600-(Date.now()-o._animationTimeRestarted);return o._animationTimeRestarted=void 0,void o._restartInterval(n)}o.isCursorVisible=!o.isCursorVisible,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0})},600)},r)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(t,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)i.hasOwnProperty(n)&&(o[n]=i[n])})(t,r)},function(t,r){function o(){this.constructor=t}l(t,r),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(13),f=g(9),u=g(24),_=function(t){function r(o,i,n,e,a,s,d,v){var m=t.call(this,o,"link",i,!0,n,e,d,v)||this;return m.bufferService=d,m.optionsService=v,a.onLinkHover(function(S){return m._onLinkHover(S)}),a.onLinkLeave(function(S){return m._onLinkLeave(S)}),s.onLinkHover(function(S){return m._onLinkHover(S)}),s.onLinkLeave(function(S){return m._onLinkLeave(S)}),m}return p(r,t),r.prototype.resize=function(o){t.prototype.resize.call(this,o),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onLinkHover=function(o){if(o.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&u.is256Color(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var i=o.y1+1;i<o.y2;i++)this._fillBottomLineAtCells(0,i,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},r.prototype._onLinkLeave=function(o){this._clearCurrentLink()},r}(c.BaseRenderLayer);h.LinkRenderLayer=_},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(0),p=function(){function f(u,_,t,r){this._bufferService=u,this._logService=_,this._optionsService=t,this._unicodeService=r,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new l.EventEmitter,this._onLinkLeave=new l.EventEmitter,this._onLinkTooltip=new l.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(f.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),f.prototype.attachToDom=function(u,_){this._element=u,this._mouseZoneManager=_},f.prototype.linkifyRows=function(u,_){var t=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=u,this._rowsToLinkify.end=_):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,u),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,_)),this._mouseZoneManager.clearAll(u,_),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return t._linkifyRows()},f._timeBeforeLatency))},f.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var u=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var _=u.ydisp+this._rowsToLinkify.start;if(!(_>=u.lines.length)){for(var t=u.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,_,t,r,r);o.hasNext();)for(var i=o.next(),n=0;n<this._linkMatchers.length;n++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[n]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},f.prototype.registerLinkMatcher=function(u,_,t){if(t===void 0&&(t={}),!_)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:u,handler:_,matchIndex:t.matchIndex,validationCallback:t.validationCallback,hoverTooltipCallback:t.tooltipCallback,hoverLeaveCallback:t.leaveCallback,willLinkActivate:t.willLinkActivate,priority:t.priority||0};return this._addLinkMatcherToList(r),r.id},f.prototype._addLinkMatcherToList=function(u){if(this._linkMatchers.length!==0){for(var _=this._linkMatchers.length-1;_>=0;_--)if(u.priority<=this._linkMatchers[_].priority)return void this._linkMatchers.splice(_+1,0,u);this._linkMatchers.splice(0,0,u)}else this._linkMatchers.push(u)},f.prototype.deregisterLinkMatcher=function(u){for(var _=0;_<this._linkMatchers.length;_++)if(this._linkMatchers[_].id===u)return this._linkMatchers.splice(_,1),!0;return!1},f.prototype._doLinkifyRow=function(u,_,t){for(var r,o=this,i=new RegExp(t.regex.source,(t.regex.flags||"")+"g"),n=-1,e=function(){var s=r[typeof t.matchIndex!="number"?0:t.matchIndex];if(!s)return a._logService.debug("match found without corresponding matchIndex",r,t),"break";if(n=_.indexOf(s,n+1),i.lastIndex=n+s.length,n<0)return"break";var d=a._bufferService.buffer.stringIndexToBufferIndex(u,n);if(d[0]<0)return"break";var v=a._bufferService.buffer.lines.get(d[0]);if(!v)return"break";var m=v.getFg(d[1]),S=m?m>>9&511:void 0;t.validationCallback?t.validationCallback(s,function(L){o._rowsTimeoutId||L&&o._addLink(d[1],d[0]-o._bufferService.buffer.ydisp,s,t,S)}):a._addLink(d[1],d[0]-a._bufferService.buffer.ydisp,s,t,S)},a=this;(r=i.exec(_))!==null&&e()!=="break";);},f.prototype._addLink=function(u,_,t,r,o){var i=this;if(this._mouseZoneManager&&this._element){var n=this._unicodeService.getStringCellWidth(t),e=u%this._bufferService.cols,a=_+Math.floor(u/this._bufferService.cols),s=(e+n)%this._bufferService.cols,d=a+Math.floor((e+n)/this._bufferService.cols);s===0&&(s=this._bufferService.cols,d--),this._mouseZoneManager.add(new c(e+1,a+1,s+1,d+1,function(v){if(r.handler)return r.handler(v,t);var m=window.open();m?(m.opener=null,m.location.href=t):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onLinkHover.fire(i._createLinkHoverEvent(e,a,s,d,o)),i._element.classList.add("xterm-cursor-pointer")},function(v){i._onLinkTooltip.fire(i._createLinkHoverEvent(e,a,s,d,o)),r.hoverTooltipCallback&&r.hoverTooltipCallback(v,t,{start:{x:e,y:a},end:{x:s,y:d}})},function(){i._onLinkLeave.fire(i._createLinkHoverEvent(e,a,s,d,o)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(v){return!r.willLinkActivate||r.willLinkActivate(v,t)}))}},f.prototype._createLinkHoverEvent=function(u,_,t,r,o){return{x1:u,y1:_,x2:t,y2:r,cols:this._bufferService.cols,fg:o}},f._timeBeforeLatency=200,f}();h.Linkifier=p;var c=function(f,u,_,t,r,o,i,n,e){this.x1=f,this.y1=u,this.x2=_,this.y2=t,this.clickCallback=r,this.hoverCallback=o,this.tooltipCallback=i,this.leaveCallback=n,this.willLinkActivate=e};h.MouseZone=c},function(w,h,g){"use strict";var l=this&&this.__decorate||function(s,d,v,m){var S,L=arguments.length,T=L<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(s,d,v,m);else for(var I=s.length-1;I>=0;I--)(S=s[I])&&(T=(L<3?S(T):L>3?S(d,v,T):S(d,v))||T);return L>3&&T&&Object.defineProperty(d,v,T),T},p=this&&this.__param||function(s,d){return function(v,m){d(v,m,s)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(11),f=g(51),u=g(5),_=g(0),t=g(4),r=g(1),o=g(28),i=g(52),n=String.fromCharCode(160),e=new RegExp(n,"g"),a=function(){function s(d,v,m,S,L,T,I,A){var C=this;this._scrollLines=d,this._element=v,this._screenElement=m,this._charSizeService=S,this._bufferService=L,this._coreService=T,this._mouseService=I,this._optionsService=A,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new _.EventEmitter,this._onRedrawRequest=new _.EventEmitter,this._onSelectionChange=new _.EventEmitter,this._mouseMoveListener=function(y){return C._onMouseMove(y)},this._mouseUpListener=function(y){return C._onMouseUp(y)},this._coreService.onUserInput(function(){C.hasSelection&&C.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(function(y){return C._onTrim(y)}),this._bufferService.buffers.onBufferActivate(function(y){return C._onBufferActivate(y)}),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(s.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this._removeMouseDownListeners()},s.prototype.reset=function(){this.clearSelection()},s.prototype.disable=function(){this.clearSelection(),this._enabled=!1},s.prototype.enable=function(){this._enabled=!0},Object.defineProperty(s.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasSelection",{get:function(){var d=this._model.finalSelectionStart,v=this._model.finalSelectionEnd;return!(!d||!v||d[0]===v[0]&&d[1]===v[1])},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionText",{get:function(){var d=this._model.finalSelectionStart,v=this._model.finalSelectionEnd;if(!d||!v)return"";var m=this._bufferService.buffer,S=[];if(this._activeSelectionMode===3){if(d[0]===v[0])return"";for(var L=d[1];L<=v[1];L++){var T=m.translateBufferLineToString(L,!0,d[0],v[0]);S.push(T)}}else{var I=d[1]===v[1]?v[0]:void 0;for(S.push(m.translateBufferLineToString(d[1],!0,d[0],I)),L=d[1]+1;L<=v[1]-1;L++){var A=m.lines.get(L);T=m.translateBufferLineToString(L,!0),A&&A.isWrapped?S[S.length-1]+=T:S.push(T)}d[1]!==v[1]&&(A=m.lines.get(v[1]),T=m.translateBufferLineToString(v[1],!0,0,v[0]),A&&A.isWrapped?S[S.length-1]+=T:S.push(T))}return S.map(function(C){return C.replace(e," ")}).join(c.isWindows?`\r
`:`
`)},enumerable:!0,configurable:!0}),s.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},s.prototype.refresh=function(d){var v=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return v._refresh()})),c.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},s.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},s.prototype.isClickInSelection=function(d){var v=this._getMouseBufferCoords(d),m=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!!(m&&S&&v)&&this._areCoordsInSelection(v,m,S)},s.prototype._areCoordsInSelection=function(d,v,m){return d[1]>v[1]&&d[1]<m[1]||v[1]===m[1]&&d[1]===v[1]&&d[0]>=v[0]&&d[0]<m[0]||v[1]<m[1]&&d[1]===m[1]&&d[0]<m[0]||v[1]<m[1]&&d[1]===v[1]&&d[0]>=v[0]},s.prototype.selectWordAtCursor=function(d){var v=this._getMouseBufferCoords(d);v&&(this._selectWordAt(v,!1),this._model.selectionEnd=void 0,this.refresh(!0))},s.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},s.prototype.selectLines=function(d,v){this._model.clearSelection(),d=Math.max(d,0),v=Math.min(v,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,v],this.refresh(),this._onSelectionChange.fire()},s.prototype._onTrim=function(d){this._model.onTrim(d)&&this.refresh()},s.prototype._getMouseBufferCoords=function(d){var v=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(v)return v[0]--,v[1]--,v[1]+=this._bufferService.buffer.ydisp,v},s.prototype._getMouseEventScrollAmount=function(d){var v=o.getCoordsRelativeToElement(d,this._screenElement)[1],m=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return v>=0&&v<=m?0:(v>m&&(v-=m),v=Math.min(Math.max(v,-50),50),(v/=50)/Math.abs(v)+Math.round(14*v))},s.prototype.shouldForceSelection=function(d){return c.isMac?d.altKey&&this._optionsService.options.macOptionClickForcesSelection:d.shiftKey},s.prototype.onMouseDown=function(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._onIncrementalClick(d):d.detail===1?this._onSingleClick(d):d.detail===2?this._onDoubleClick(d):d.detail===3&&this._onTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}},s.prototype._addMouseDownListeners=function(){var d=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return d._dragScroll()},50)},s.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},s.prototype._onIncrementalClick=function(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))},s.prototype._onSingleClick=function(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),this._model.selectionStart){this._model.selectionEnd=void 0;var v=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);v&&v.length!==this._model.selectionStart[0]&&v.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},s.prototype._onDoubleClick=function(d){var v=this._getMouseBufferCoords(d);v&&(this._activeSelectionMode=1,this._selectWordAt(v,!0))},s.prototype._onTripleClick=function(d){var v=this._getMouseBufferCoords(d);v&&(this._activeSelectionMode=2,this._selectLineAt(v[1]))},s.prototype.shouldColumnSelect=function(d){return d.altKey&&!(c.isMac&&this._optionsService.options.macOptionClickForcesSelection)},s.prototype._onMouseMove=function(d){if(d.stopImmediatePropagation(),this._model.selectionStart){var v=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var m=this._bufferService.buffer;if(this._model.selectionEnd[1]<m.lines.length){var S=m.lines.get(this._model.selectionEnd[1]);S&&S.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}v&&v[0]===this._model.selectionEnd[0]&&v[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},s.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}},s.prototype._onMouseUp=function(d){var v=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&v<500){if(d.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var m=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(m&&m[0]!==void 0&&m[1]!==void 0){var S=i.moveToCellSequence(m[0]-1,m[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(S,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},s.prototype._onBufferActivate=function(d){var v=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(function(m){return v._onTrim(m)})},s.prototype._convertViewportColToCharacterIndex=function(d,v){for(var m=v[0],S=0;v[0]>=S;S++){var L=d.loadCell(S,this._workCell).getChars().length;this._workCell.getWidth()===0?m--:L>1&&v[0]!==S&&(m+=L-1)}return m},s.prototype.setSelection=function(d,v,m){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,v],this._model.selectionStartLength=m,this.refresh()},s.prototype._getWordAt=function(d,v,m,S){if(m===void 0&&(m=!0),S===void 0&&(S=!0),!(d[0]>=this._bufferService.cols)){var L=this._bufferService.buffer,T=L.lines.get(d[1]);if(T){var I=L.translateBufferLineToString(d[1],!1),A=this._convertViewportColToCharacterIndex(T,d),C=A,y=d[0]-A,b=0,x=0,M=0,D=0;if(I.charAt(A)===" "){for(;A>0&&I.charAt(A-1)===" ";)A--;for(;C<I.length&&I.charAt(C+1)===" ";)C++}else{var F=d[0],z=d[0];T.getWidth(F)===0&&(b++,F--),T.getWidth(z)===2&&(x++,z++);var X=T.getString(z).length;for(X>1&&(D+=X-1,C+=X-1);F>0&&A>0&&!this._isCharWordSeparator(T.loadCell(F-1,this._workCell));){T.loadCell(F-1,this._workCell);var J=this._workCell.getChars().length;this._workCell.getWidth()===0?(b++,F--):J>1&&(M+=J-1,A-=J-1),A--,F--}for(;z<T.length&&C+1<I.length&&!this._isCharWordSeparator(T.loadCell(z+1,this._workCell));){T.loadCell(z+1,this._workCell);var K=this._workCell.getChars().length;this._workCell.getWidth()===2?(x++,z++):K>1&&(D+=K-1,C+=K-1),C++,z++}}C++;var E=A+y-b+M,G=Math.min(this._bufferService.cols,C-A+b+x-M-D);if(v||I.slice(A,C).trim()!==""){if(m&&E===0&&T.getCodePoint(0)!==32){var B=L.lines.get(d[1]-1);if(B&&T.isWrapped&&B.getCodePoint(this._bufferService.cols-1)!==32){var W=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(W){var H=this._bufferService.cols-W.start;E-=H,G+=H}}}if(S&&E+G===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){var Y=L.lines.get(d[1]+1);if(Y&&Y.isWrapped&&Y.getCodePoint(0)!==32){var Z=this._getWordAt([0,d[1]+1],!1,!1,!0);Z&&(G+=Z.length)}}return{start:E,length:G}}}}},s.prototype._selectWordAt=function(d,v){var m=this._getWordAt(d,v);if(m){for(;m.start<0;)m.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[m.start,d[1]],this._model.selectionStartLength=m.length}},s.prototype._selectToWordAt=function(d){var v=this._getWordAt(d,!0);if(v){for(var m=d[1];v.start<0;)v.start+=this._bufferService.cols,m--;if(!this._model.areSelectionValuesReversed())for(;v.start+v.length>this._bufferService.cols;)v.length-=this._bufferService.cols,m++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?v.start:v.start+v.length,m]}},s.prototype._isCharWordSeparator=function(d){return d.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(d.getChars())>=0},s.prototype._selectLineAt=function(d){var v=this._bufferService.buffer.getWrappedRangeForLine(d);this._model.selectionStart=[0,v.first],this._model.selectionEnd=[this._bufferService.cols,v.last],this._model.selectionStartLength=0},l([p(3,t.ICharSizeService),p(4,r.IBufferService),p(5,r.ICoreService),p(6,t.IMouseService),p(7,r.IOptionsService)],s)}();h.SelectionService=a},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}return p.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(p.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),p.prototype.areSelectionValuesReversed=function(){var c=this.selectionStart,f=this.selectionEnd;return!(!c||!f)&&(c[1]>f[1]||c[1]===f[1]&&c[0]>f[0])},p.prototype.onTrim=function(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},p}();h.SelectionModel=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(12);function p(r,o,i,n){var e=r-c(i,r),a=o-c(i,o);return t(Math.abs(e-a)-function(s,d,v){for(var m=0,S=s-c(v,s),L=d-c(v,d),T=0;T<Math.abs(S-L);T++){var I=f(s,d)==="A"?-1:1,A=v.buffer.lines.get(S+I*T);A&&A.isWrapped&&m++}return m}(r,o,i),_(f(r,o),n))}function c(r,o){for(var i=0,n=r.buffer.lines.get(o),e=n&&n.isWrapped;e&&o>=0&&o<r.rows;)i++,e=(n=r.buffer.lines.get(--o))&&n.isWrapped;return i}function f(r,o){return r>o?"A":"B"}function u(r,o,i,n,e,a){for(var s=r,d=o,v="";s!==i||d!==n;)s+=e?1:-1,e&&s>a.cols-1?(v+=a.buffer.translateBufferLineToString(d,!1,r,s),s=0,r=0,d++):!e&&s<0&&(v+=a.buffer.translateBufferLineToString(d,!1,0,r+1),r=s=a.cols-1,d--);return v+a.buffer.translateBufferLineToString(d,!1,r,s)}function _(r,o){var i=o?"O":"[";return l.C0.ESC+i+r}function t(r,o){r=Math.floor(r);for(var i="",n=0;n<r;n++)i+=o;return i}h.moveToCellSequence=function(r,o,i,n){var e,a=i.buffer.x,s=i.buffer.y;if(!i.buffer.hasScrollback)return function(v,m,S,L,T,I){return p(m,L,T,I).length===0?"":t(u(v,m,v,m-c(T,m),!1,T).length,_("D",I))}(a,s,0,o,i,n)+p(s,o,i,n)+function(v,m,S,L,T,I){var A;A=p(m,L,T,I).length>0?L-c(T,L):m;var C=L,y=function(b,x,M,D,F,z){var X;return X=p(M,D,F,z).length>0?D-c(F,D):x,b<M&&X<=D||b>=M&&X<D?"C":"D"}(v,m,S,L,T,I);return t(u(v,A,S,C,y==="C",T).length,_(y,I))}(a,s,r,o,i,n);if(s===o)return e=a>r?"D":"C",t(Math.abs(a-r),_(e,n));e=s>o?"D":"C";var d=Math.abs(s-o);return t(function(v,m){return m.cols-v}(s>o?r:a,i)+(d-1)*i.cols+1+((s>o?a:r)-1),_(e,n))}},function(w,h,g){"use strict";var l=this&&this.__decorate||function(u,_,t,r){var o,i=arguments.length,n=i<3?_:r===null?r=Object.getOwnPropertyDescriptor(_,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(u,_,t,r);else for(var e=u.length-1;e>=0;e--)(o=u[e])&&(n=(i<3?o(n):i>3?o(_,t,n):o(_,t))||n);return i>3&&n&&Object.defineProperty(_,t,n),n},p=this&&this.__param||function(u,_){return function(t,r){_(t,r,u)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=function(){function u(_){this._optionsService=_}return Object.defineProperty(u,"audioContext",{get:function(){if(!u._audioContext){var _=window.AudioContext||window.webkitAudioContext;if(!_)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;u._audioContext=new _}return u._audioContext},enumerable:!0,configurable:!0}),u.prototype.playBellSound=function(){var _=u.audioContext;if(_){var t=_.createBufferSource();_.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(r){t.buffer=r,t.connect(_.destination),t.start(0)})}},u.prototype._base64ToArrayBuffer=function(_){for(var t=window.atob(_),r=t.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=t.charCodeAt(i);return o.buffer},u.prototype._removeMimeType=function(_){return _.split(",")[1]},u=l([p(0,c.IOptionsService)],u)}();h.SoundService=f},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),c=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,v=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,e,a);else for(var m=i.length-1;m>=0;m--)(s=i[m])&&(v=(d<3?s(v):d>3?s(n,e,v):s(n,e))||v);return d>3&&v&&Object.defineProperty(n,e,v),v},f=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(h,"__esModule",{value:!0});var u=g(2),_=g(8),t=g(4),r=g(1),o=function(i){function n(e,a,s,d,v){var m=i.call(this)||this;return m._element=e,m._screenElement=a,m._bufferService=s,m._mouseService=d,m._selectionService=v,m._zones=[],m._areZonesActive=!1,m._lastHoverCoords=[void 0,void 0],m._initialSelectionLength=0,m.register(_.addDisposableDomListener(m._element,"mousedown",function(S){return m._onMouseDown(S)})),m._mouseMoveListener=function(S){return m._onMouseMove(S)},m._mouseLeaveListener=function(S){return m._onMouseLeave(S)},m._clickListener=function(S){return m._onClick(S)},m}return p(n,i),n.prototype.dispose=function(){i.prototype.dispose.call(this),this._deactivate()},n.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},n.prototype.clearAll=function(e,a){if(this._zones.length!==0){e&&a||(e=0,a=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var d=this._zones[s];(d.y1>e&&d.y1<=a+1||d.y2>e&&d.y2<=a+1||d.y1<e&&d.y2>a+1)&&(this._currentZone&&this._currentZone===d&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},n.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},n.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},n.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},n.prototype._onHover=function(e){var a=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=setTimeout(function(){return a._onTooltip(e)},500)))},n.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var a=this._findZoneEventAt(e);a&&a.tooltipCallback&&a.tooltipCallback(e)},n.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var a=this._findZoneEventAt(e);a!=null&&a.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},n.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},n.prototype._onClick=function(e){var a=this._findZoneEventAt(e),s=this._getSelectionLength();a&&s===this._initialSelectionLength&&(a.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},n.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},n.prototype._findZoneEventAt=function(e){var a=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(a)for(var s=a[0],d=a[1],v=0;v<this._zones.length;v++){var m=this._zones[v];if(m.y1===m.y2){if(d===m.y1&&s>=m.x1&&s<m.x2)return m}else if(d===m.y1&&s>=m.x1||d===m.y2&&s<m.x2||d>m.y1&&d<m.y2)return m}},c([f(2,r.IBufferService),f(3,t.IMouseService),f(4,t.ISelectionService)],n)}(u.Disposable);h.MouseZoneManager=o},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(17),f=g(11),u=g(29),_=g(8),t=g(2),r=g(30),o=function(i){function n(e,a){var s=i.call(this)||this;s._terminal=e,s._renderService=a,s._liveRegionLineCount=0,s._charsToConsume=[],s._charsToAnnounce="",s._accessibilityTreeRoot=document.createElement("div"),s._accessibilityTreeRoot.classList.add("xterm-accessibility"),s._rowContainer=document.createElement("div"),s._rowContainer.classList.add("xterm-accessibility-tree"),s._rowContainer.setAttribute("role","list"),s._rowElements=[];for(var d=0;d<s._terminal.rows;d++)s._rowElements[d]=s._createAccessibilityTreeNode(),s._rowContainer.appendChild(s._rowElements[d]);return s._topBoundaryFocusListener=function(v){return s._onBoundaryFocus(v,0)},s._bottomBoundaryFocusListener=function(v){return s._onBoundaryFocus(v,1)},s._rowElements[0].addEventListener("focus",s._topBoundaryFocusListener),s._rowElements[s._rowElements.length-1].addEventListener("focus",s._bottomBoundaryFocusListener),s._refreshRowsDimensions(),s._accessibilityTreeRoot.appendChild(s._rowContainer),s._renderRowsDebouncer=new u.RenderDebouncer(s._renderRows.bind(s)),s._refreshRows(),s._liveRegion=document.createElement("div"),s._liveRegion.classList.add("live-region"),s._liveRegion.setAttribute("aria-live","assertive"),s._accessibilityTreeRoot.appendChild(s._liveRegion),s._terminal.element.insertAdjacentElement("afterbegin",s._accessibilityTreeRoot),s.register(s._renderRowsDebouncer),s.register(s._terminal.onResize(function(v){return s._onResize(v.rows)})),s.register(s._terminal.onRender(function(v){return s._refreshRows(v.start,v.end)})),s.register(s._terminal.onScroll(function(){return s._refreshRows()})),s.register(s._terminal.onA11yChar(function(v){return s._onChar(v)})),s.register(s._terminal.onLineFeed(function(){return s._onChar(`
`)})),s.register(s._terminal.onA11yTab(function(v){return s._onTab(v)})),s.register(s._terminal.onKey(function(v){return s._onKey(v.key)})),s.register(s._terminal.onBlur(function(){return s._clearLiveRegion()})),s.register(s._renderService.onDimensionsChange(function(){return s._refreshRowsDimensions()})),s._screenDprMonitor=new r.ScreenDprMonitor,s.register(s._screenDprMonitor),s._screenDprMonitor.setListener(function(){return s._refreshRowsDimensions()}),s.register(_.addDisposableDomListener(window,"resize",function(){return s._refreshRowsDimensions()})),s}return p(n,i),n.prototype.dispose=function(){i.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},n.prototype._onBoundaryFocus=function(e,a){var s=e.target,d=this._rowElements[a===0?1:this._rowElements.length-2];if(s.getAttribute("aria-posinset")!==(a===0?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===d){var v,m;if(a===0?(v=s,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(v=this._rowElements.shift(),m=s,this._rowContainer.removeChild(v)),v.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){var S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else S=this._createAccessibilityTreeNode(),this._rowElements.push(S),this._rowContainer.appendChild(S);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},n.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},n.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},n.prototype._onTab=function(e){for(var a=0;a<e;a++)this._onChar(" ")},n.prototype._onChar=function(e){var a=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){a._accessibilityTreeRoot.appendChild(a._liveRegion)},0))},n.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},n.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},n.prototype._refreshRows=function(e,a){this._renderRowsDebouncer.refresh(e,a,this._terminal.rows)},n.prototype._renderRows=function(e,a){for(var s=this._terminal.buffer,d=s.lines.length.toString(),v=e;v<=a;v++){var m=s.translateBufferLineToString(s.ydisp+v,!0),S=(s.ydisp+v+1).toString(),L=this._rowElements[v];L&&(m.length===0?L.innerHTML="&nbsp;":L.textContent=m,L.setAttribute("aria-posinset",S),L.setAttribute("aria-setsize",d))}this._announceCharacters()},n.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},n.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},n.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},n}(t.Disposable);h.AccessibilityManager=o},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(s,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var S in m)m.hasOwnProperty(S)&&(v[S]=m[S])})(s,d)},function(s,d){function v(){this.constructor=s}l(s,d),s.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}),c=this&&this.__decorate||function(s,d,v,m){var S,L=arguments.length,T=L<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(s,d,v,m);else for(var I=s.length-1;I>=0;I--)(S=s[I])&&(T=(L<3?S(T):L>3?S(d,v,T):S(d,v))||T);return L>3&&T&&Object.defineProperty(d,v,T),T},f=this&&this.__param||function(s,d){return function(v,m){d(v,m,s)}};Object.defineProperty(h,"__esModule",{value:!0});var u=g(57),_=g(9),t=g(2),r=g(4),o=g(1),i=g(0),n=g(10),e=1,a=function(s){function d(v,m,S,L,T,I,A,C,y){var b=s.call(this)||this;return b._colors=v,b._element=m,b._screenElement=S,b._viewportElement=L,b._linkifier=T,b._linkifier2=I,b._charSizeService=A,b._optionsService=C,b._bufferService=y,b._terminalClass=e++,b._rowElements=[],b._onRequestRefreshRows=new i.EventEmitter,b._rowContainer=document.createElement("div"),b._rowContainer.classList.add("xterm-rows"),b._rowContainer.style.lineHeight="normal",b._rowContainer.setAttribute("aria-hidden","true"),b._refreshRowElements(b._bufferService.cols,b._bufferService.rows),b._selectionContainer=document.createElement("div"),b._selectionContainer.classList.add("xterm-selection"),b._selectionContainer.setAttribute("aria-hidden","true"),b.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},b._updateDimensions(),b._injectCss(),b._rowFactory=new u.DomRendererRowFactory(document,b._optionsService,b._colors),b._element.classList.add("xterm-dom-renderer-owner-"+b._terminalClass),b._screenElement.appendChild(b._rowContainer),b._screenElement.appendChild(b._selectionContainer),b._linkifier.onLinkHover(function(x){return b._onLinkHover(x)}),b._linkifier.onLinkLeave(function(x){return b._onLinkLeave(x)}),b._linkifier2.onLinkHover(function(x){return b._onLinkHover(x)}),b._linkifier2.onLinkLeave(function(x){return b._onLinkLeave(x)}),b}return p(d,s),Object.defineProperty(d.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),s.prototype.dispose.call(this)},d.prototype._updateDimensions=function(){var v=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach(function(S){S.style.width=v.dimensions.canvasWidth+"px",S.style.height=v.dimensions.actualCellHeight+"px",S.style.lineHeight=v.dimensions.actualCellHeight+"px",S.style.overflow="hidden"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var m=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=m,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},d.prototype.setColors=function(v){this._colors=v,this._injectCss()},d.prototype._injectCss=function(){var v=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var m=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";m+=this._terminalSelector+" span:not(."+u.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+u.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+u.ITALIC_CLASS+" { font-style: italic;}",m+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",m+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",m+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_BLINK_CLASS+":not(."+u.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_BLINK_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+u.CURSOR_CLASS+"."+u.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",m+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach(function(S,L){m+=v._terminalSelector+" .xterm-fg-"+L+" { color: "+S.css+"; }"+v._terminalSelector+" .xterm-bg-"+L+" { background-color: "+S.css+"; }"}),m+=this._terminalSelector+" .xterm-fg-"+_.INVERTED_DEFAULT_COLOR+" { color: "+n.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+_.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=m},d.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},d.prototype._refreshRowElements=function(v,m){for(var S=this._rowElements.length;S<=m;S++){var L=document.createElement("div");this._rowContainer.appendChild(L),this._rowElements.push(L)}for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop())},d.prototype.onResize=function(v,m){this._refreshRowElements(v,m),this._updateDimensions()},d.prototype.onCharSizeChanged=function(){this._updateDimensions()},d.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},d.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},d.prototype.onSelectionChanged=function(v,m,S){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(v&&m){var L=v[1]-this._bufferService.buffer.ydisp,T=m[1]-this._bufferService.buffer.ydisp,I=Math.max(L,0),A=Math.min(T,this._bufferService.rows-1);if(!(I>=this._bufferService.rows||A<0)){var C=document.createDocumentFragment();if(S)C.appendChild(this._createSelectionElement(I,v[0],m[0],A-I+1));else{var y=L===I?v[0]:0,b=I===A?m[0]:this._bufferService.cols;C.appendChild(this._createSelectionElement(I,y,b));var x=A-I-1;if(C.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,x)),I!==A){var M=T===A?m[0]:this._bufferService.cols;C.appendChild(this._createSelectionElement(A,0,M))}}this._selectionContainer.appendChild(C)}}},d.prototype._createSelectionElement=function(v,m,S,L){L===void 0&&(L=1);var T=document.createElement("div");return T.style.height=L*this.dimensions.actualCellHeight+"px",T.style.top=v*this.dimensions.actualCellHeight+"px",T.style.left=m*this.dimensions.actualCellWidth+"px",T.style.width=this.dimensions.actualCellWidth*(S-m)+"px",T},d.prototype.onCursorMove=function(){},d.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},d.prototype.clear=function(){this._rowElements.forEach(function(v){return v.innerHTML=""})},d.prototype.renderRows=function(v,m){for(var S=this._bufferService.buffer.ybase+this._bufferService.buffer.y,L=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),T=this._optionsService.options.cursorBlink,I=v;I<=m;I++){var A=this._rowElements[I];A.innerHTML="";var C=I+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.lines.get(C),b=this._optionsService.options.cursorStyle;A.appendChild(this._rowFactory.createRow(y,C===S,b,L,T,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(d.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0}),d.prototype.registerCharacterJoiner=function(v){return-1},d.prototype.deregisterCharacterJoiner=function(v){return!1},d.prototype._onLinkHover=function(v){this._setCellUnderline(v.x1,v.x2,v.y1,v.y2,v.cols,!0)},d.prototype._onLinkLeave=function(v){this._setCellUnderline(v.x1,v.x2,v.y1,v.y2,v.cols,!1)},d.prototype._setCellUnderline=function(v,m,S,L,T,I){for(;v!==m||S!==L;){var A=this._rowElements[S];if(!A)return;var C=A.children[v];C&&(C.style.textDecoration=I?"underline":"none"),++v>=T&&(v=0,S++)}},c([f(6,r.ICharSizeService),f(7,o.IOptionsService),f(8,o.IBufferService)],d)}(t.Disposable);h.DomRenderer=a},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(9),p=g(3),c=g(5),f=g(10);h.BOLD_CLASS="xterm-bold",h.DIM_CLASS="xterm-dim",h.ITALIC_CLASS="xterm-italic",h.UNDERLINE_CLASS="xterm-underline",h.CURSOR_CLASS="xterm-cursor",h.CURSOR_BLINK_CLASS="xterm-cursor-blink",h.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",h.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",h.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var u=function(){function t(r,o,i){this._document=r,this._optionsService=o,this._colors=i,this._workCell=new c.CellData}return t.prototype.setColors=function(r){this._colors=r},t.prototype.createRow=function(r,o,i,n,e,a,s){for(var d=this._document.createDocumentFragment(),v=0,m=Math.min(r.length,s)-1;m>=0;m--)if(r.loadCell(m,this._workCell).getCode()!==p.NULL_CELL_CODE||o&&m===n){v=m+1;break}for(m=0;m<v;m++){r.loadCell(m,this._workCell);var S=this._workCell.getWidth();if(S!==0){var L=this._document.createElement("span");if(S>1&&(L.style.width=a*S+"px"),o&&m===n)switch(L.classList.add(h.CURSOR_CLASS),e&&L.classList.add(h.CURSOR_BLINK_CLASS),i){case"bar":L.classList.add(h.CURSOR_STYLE_BAR_CLASS);break;case"underline":L.classList.add(h.CURSOR_STYLE_UNDERLINE_CLASS);break;default:L.classList.add(h.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&L.classList.add(h.BOLD_CLASS),this._workCell.isItalic()&&L.classList.add(h.ITALIC_CLASS),this._workCell.isDim()&&L.classList.add(h.DIM_CLASS),this._workCell.isUnderline()&&L.classList.add(h.UNDERLINE_CLASS),this._workCell.isInvisible()?L.textContent=p.WHITESPACE_CELL_CHAR:L.textContent=this._workCell.getChars()||p.WHITESPACE_CELL_CHAR;var T=this._workCell.getFgColor(),I=this._workCell.getFgColorMode(),A=this._workCell.getBgColor(),C=this._workCell.getBgColorMode(),y=!!this._workCell.isInverse();if(y){var b=T;T=A,A=b;var x=I;I=C,C=x}switch(I){case 16777216:case 33554432:this._workCell.isBold()&&T<8&&this._optionsService.options.drawBoldTextInBrightColors&&(T+=8),this._applyMinimumContrast(L,this._colors.background,this._colors.ansi[T])||L.classList.add("xterm-fg-"+T);break;case 50331648:var M=f.rgba.toColor(T>>16&255,T>>8&255,255&T);this._applyMinimumContrast(L,this._colors.background,M)||this._addStyle(L,"color:#"+_(T.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(L,this._colors.background,this._colors.foreground)||y&&L.classList.add("xterm-fg-"+l.INVERTED_DEFAULT_COLOR)}switch(C){case 16777216:case 33554432:L.classList.add("xterm-bg-"+A);break;case 50331648:this._addStyle(L,"background-color:#"+_(A.toString(16),"0",6));break;case 0:default:y&&L.classList.add("xterm-bg-"+l.INVERTED_DEFAULT_COLOR)}d.appendChild(L)}}return d},t.prototype._applyMinimumContrast=function(r,o,i){if(this._optionsService.options.minimumContrastRatio===1)return!1;var n=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return n===void 0&&(n=f.color.ensureContrastRatio(o,i,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,n!=null?n:null)),!!n&&(this._addStyle(r,"color:"+n.css),!0)},t.prototype._addStyle=function(r,o){r.setAttribute("style",""+(r.getAttribute("style")||"")+o+";")},t}();function _(t,r,o){for(;t.length<o;)t=r+t;return t}h.DomRendererRowFactory=u},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(12),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};h.evaluateKeyboardEvent=function(c,f,u,_){var t={type:0,cancel:!1,key:void 0},r=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?t.key=f?l.C0.ESC+"OA":l.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?t.key=f?l.C0.ESC+"OD":l.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?t.key=f?l.C0.ESC+"OC":l.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(t.key=f?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(c.shiftKey){t.key=l.C0.BS;break}if(c.altKey){t.key=l.C0.ESC+l.C0.DEL;break}t.key=l.C0.DEL;break;case 9:if(c.shiftKey){t.key=l.C0.ESC+"[Z";break}t.key=l.C0.HT,t.cancel=!0;break;case 13:t.key=l.C0.CR,t.cancel=!0;break;case 27:t.key=l.C0.ESC,t.cancel=!0;break;case 37:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"D",t.key===l.C0.ESC+"[1;3D"&&(t.key=l.C0.ESC+(u?"b":"[1;5D"))):t.key=f?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"C",t.key===l.C0.ESC+"[1;3C"&&(t.key=l.C0.ESC+(u?"f":"[1;5C"))):t.key=f?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"A",u||t.key!==l.C0.ESC+"[1;3A"||(t.key=l.C0.ESC+"[1;5A")):t.key=f?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"B",u||t.key!==l.C0.ESC+"[1;3B"||(t.key=l.C0.ESC+"[1;5B")):t.key=f?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(t.key=l.C0.ESC+"[2~");break;case 46:t.key=r?l.C0.ESC+"[3;"+(r+1)+"~":l.C0.ESC+"[3~";break;case 36:t.key=r?l.C0.ESC+"[1;"+(r+1)+"H":f?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:t.key=r?l.C0.ESC+"[1;"+(r+1)+"F":f?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:c.shiftKey?t.type=2:t.key=l.C0.ESC+"[5~";break;case 34:c.shiftKey?t.type=3:t.key=l.C0.ESC+"[6~";break;case 112:t.key=r?l.C0.ESC+"[1;"+(r+1)+"P":l.C0.ESC+"OP";break;case 113:t.key=r?l.C0.ESC+"[1;"+(r+1)+"Q":l.C0.ESC+"OQ";break;case 114:t.key=r?l.C0.ESC+"[1;"+(r+1)+"R":l.C0.ESC+"OR";break;case 115:t.key=r?l.C0.ESC+"[1;"+(r+1)+"S":l.C0.ESC+"OS";break;case 116:t.key=r?l.C0.ESC+"[15;"+(r+1)+"~":l.C0.ESC+"[15~";break;case 117:t.key=r?l.C0.ESC+"[17;"+(r+1)+"~":l.C0.ESC+"[17~";break;case 118:t.key=r?l.C0.ESC+"[18;"+(r+1)+"~":l.C0.ESC+"[18~";break;case 119:t.key=r?l.C0.ESC+"[19;"+(r+1)+"~":l.C0.ESC+"[19~";break;case 120:t.key=r?l.C0.ESC+"[20;"+(r+1)+"~":l.C0.ESC+"[20~";break;case 121:t.key=r?l.C0.ESC+"[21;"+(r+1)+"~":l.C0.ESC+"[21~";break;case 122:t.key=r?l.C0.ESC+"[23;"+(r+1)+"~":l.C0.ESC+"[23~";break;case 123:t.key=r?l.C0.ESC+"[24;"+(r+1)+"~":l.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(u&&!_||!c.altKey||c.metaKey)u&&!c.altKey&&!c.ctrlKey&&c.metaKey?c.keyCode===65&&(t.type=1):c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?t.key=c.key:c.key&&c.ctrlKey&&c.key==="_"&&(t.key=l.C0.US);else{var o=p[c.keyCode],i=o&&o[c.shiftKey?1:0];if(i)t.key=l.C0.ESC+i;else if(c.keyCode>=65&&c.keyCode<=90){var n=c.ctrlKey?c.keyCode-64:c.keyCode+32;t.key=l.C0.ESC+String.fromCharCode(n)}}else c.keyCode>=65&&c.keyCode<=90?t.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?t.key=l.C0.NUL:c.keyCode>=51&&c.keyCode<=55?t.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?t.key=l.C0.DEL:c.keyCode===219?t.key=l.C0.ESC:c.keyCode===220?t.key=l.C0.FS:c.keyCode===221&&(t.key=l.C0.GS)}return t}},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(3);h.updateWindowsModeWrappedState=function(p){var c=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),f=c==null?void 0:c.get(p.cols-1),u=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);u&&f&&(u.isWrapped=f[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&f[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(a,s){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var m in v)v.hasOwnProperty(m)&&(d[m]=v[m])})(a,s)},function(a,s){function d(){this.constructor=a}l(a,s),a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}),c=this&&this.__decorate||function(a,s,d,v){var m,S=arguments.length,L=S<3?s:v===null?v=Object.getOwnPropertyDescriptor(s,d):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(a,s,d,v);else for(var T=a.length-1;T>=0;T--)(m=a[T])&&(L=(S<3?m(L):S>3?m(s,d,L):m(s,d))||L);return S>3&&L&&Object.defineProperty(s,d,L),L},f=this&&this.__param||function(a,s){return function(d,v){s(d,v,a)}};Object.defineProperty(h,"__esModule",{value:!0});var u=g(29),_=g(0),t=g(2),r=g(30),o=g(8),i=g(1),n=g(4),e=function(a){function s(d,v,m,S,L){var T=a.call(this)||this;if(T._renderer=d,T._rowCount=v,T.screenElement=m,T.optionsService=S,T.charSizeService=L,T._isPaused=!1,T._needsFullRefresh=!1,T._canvasWidth=0,T._canvasHeight=0,T._onDimensionsChange=new _.EventEmitter,T._onRender=new _.EventEmitter,T._onRefreshRequest=new _.EventEmitter,T._renderDebouncer=new u.RenderDebouncer(function(A,C){return T._renderRows(A,C)}),T.register(T._renderDebouncer),T._screenDprMonitor=new r.ScreenDprMonitor,T._screenDprMonitor.setListener(function(){return T.onDevicePixelRatioChange()}),T.register(T._screenDprMonitor),T.register(S.onOptionChange(function(){return T._renderer.onOptionsChanged()})),T.register(L.onCharSizeChange(function(){return T.onCharSizeChanged()})),T._renderer.onRequestRefreshRows(function(A){return T.refreshRows(A.start,A.end)}),T.register(o.addDisposableDomListener(window,"resize",function(){return T.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var I=new IntersectionObserver(function(A){return T._onIntersectionChange(A[A.length-1])},{threshold:0});I.observe(m),T.register({dispose:function(){return I.disconnect()}})}return T}return p(s,a),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),s.prototype._onIntersectionChange=function(d){this._isPaused=d.intersectionRatio===0,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(d,v){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(d,v,this._rowCount)},s.prototype._renderRows=function(d,v){this._renderer.renderRows(d,v),this._onRender.fire({start:d,end:v})},s.prototype.resize=function(d,v){this._rowCount=v,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){this._renderer.dispose(),a.prototype.dispose.call(this)},s.prototype.setRenderer=function(d){var v=this;this._renderer.dispose(),this._renderer=d,this._renderer.onRequestRefreshRows(function(m){return v.refreshRows(m.start,m.end)}),this.refreshRows(0,this._rowCount-1)},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.setColors=function(d){this._renderer.setColors(d),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(d,v){this._renderer.onResize(d,v),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(d,v,m){this._renderer.onSelectionChanged(d,v,m)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},s.prototype.registerCharacterJoiner=function(d){return this._renderer.registerCharacterJoiner(d)},s.prototype.deregisterCharacterJoiner=function(d){return this._renderer.deregisterCharacterJoiner(d)},c([f(3,i.IOptionsService),f(4,n.ICharSizeService)],s)}(t.Disposable);h.RenderService=e},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(0),p=g(11),c=g(31);h.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",h.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:h.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var f=["cols","rows"],u=function(){function _(t){var r=this;this._onOptionChange=new l.EventEmitter,this.options=c.clone(h.DEFAULT_OPTIONS),Object.keys(t).forEach(function(o){if(o in r.options){var i=t[o];r.options[o]=i}})}return Object.defineProperty(_.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),_.prototype.setOption=function(t,r){if(!(t in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');if(f.indexOf(t)!==-1)throw new Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==r&&(r=this._sanitizeAndValidateOption(t,r),this.options[t]!==r&&(this.options[t]=r,this._onOptionChange.fire(t)))},_.prototype._sanitizeAndValidateOption=function(t,r){switch(t){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":r||(r=h.DEFAULT_OPTIONS[t]);break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(t+" cannot be less than 1, value: "+r);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(t+" cannot be less than 0, value: "+r);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(t+" cannot be less than or equal to 0, value: "+r)}return r},_.prototype.getOption=function(t){if(!(t in h.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return this.options[t]},_}();h.OptionsService=u},function(w,h,g){"use strict";var l=this&&this.__decorate||function(t,r,o,i){var n,e=arguments.length,a=e<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(e<3?n(a):e>3?n(r,o,a):n(r,o))||a);return e>3&&a&&Object.defineProperty(r,o,a),a},p=this&&this.__param||function(t,r){return function(o,i){r(o,i,t)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=g(0),u=function(){function t(r,o,i){this.document=r,this.parentElement=o,this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new _(r,o,this._optionsService)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),t.prototype.measure=function(){var r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())},l([p(2,c.IOptionsService)],t)}();h.CharSizeService=u;var _=function(){function t(r,o,i){this._document=r,this._parentElement=o,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return t.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._measureElement.getBoundingClientRect();return r.width!==0&&r.height!==0&&(this._result.width=r.width,this._result.height=Math.ceil(r.height)),this._result},t}()},function(w,h,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=g(64);h.MINIMUM_COLS=2,h.MINIMUM_ROWS=1;var u=function(){function _(t){this._optionsService=t,this.cols=Math.max(t.options.cols,h.MINIMUM_COLS),this.rows=Math.max(t.options.rows,h.MINIMUM_ROWS),this.buffers=new f.BufferSet(t,this)}return Object.defineProperty(_.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),_.prototype.resize=function(t,r){this.cols=t,this.rows=r},_.prototype.reset=function(){this.buffers=new f.BufferSet(this._optionsService,this)},l([p(0,c.IOptionsService)],_)}();h.BufferService=u},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(65),p=g(0),c=function(){function f(u,_){this.optionsService=u,this.bufferService=_,this._onBufferActivate=new p.EventEmitter,this._normal=new l.Buffer(!0,u,_),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,u,_),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(f.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),f.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},f.prototype.activateAltBuffer=function(u){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(u),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},f.prototype.resize=function(u,_){this._normal.resize(u,_),this._alt.resize(u,_)},f.prototype.setupTabStops=function(u){this._normal.setupTabStops(u),this._alt.setupTabStops(u)},f}();h.BufferSet=c},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(66),p=g(16),c=g(5),f=g(3),u=g(67),_=g(68),t=g(18);h.MAX_BUFFER_SIZE=4294967295;var r=function(){function i(n,e,a){this._hasScrollback=n,this._optionsService=e,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=t.DEFAULT_CHARSET,this.markers=[],this._nullCell=c.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=c.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return i.prototype.getNullCell=function(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},i.prototype.getWhitespaceCell=function(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},i.prototype.getBlankLine=function(n,e){return new p.BufferLine(this._bufferService.cols,this.getNullCell(n),e)},Object.defineProperty(i.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCursorInViewport",{get:function(){var n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows},enumerable:!0,configurable:!0}),i.prototype._getCorrectBufferLength=function(n){if(!this._hasScrollback)return n;var e=n+this._optionsService.options.scrollback;return e>h.MAX_BUFFER_SIZE?h.MAX_BUFFER_SIZE:e},i.prototype.fillViewportRows=function(n){if(this.lines.length===0){n===void 0&&(n=p.DEFAULT_ATTR_DATA);for(var e=this._rows;e--;)this.lines.push(this.getBlankLine(n))}},i.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},i.prototype.resize=function(n,e){var a=this.getNullCell(p.DEFAULT_ATTR_DATA),s=this._getCorrectBufferLength(e);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<n)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(n,a);var v=0;if(this._rows<e)for(var m=this._rows;m<e;m++)this.lines.length<e+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(n,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+v+1?(this.ybase--,v++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(n,a)));else for(m=this._rows;m>e;m--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){var S=this.lines.length-s;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=s}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,e-1),v&&(this.y+=v),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(n,e),this._cols>n))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(n,a);this._cols=n,this._rows=e},Object.defineProperty(i.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),i.prototype._reflow=function(n,e){this._cols!==n&&(n>this._cols?this._reflowLarger(n,e):this._reflowSmaller(n,e))},i.prototype._reflowLarger=function(n,e){var a=u.reflowLargerGetLinesToRemove(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(a.length>0){var s=u.reflowLargerCreateNewLayout(this.lines,a);u.reflowLargerApplyNewLayout(this.lines,s.layout),this._reflowLargerAdjustViewport(n,e,s.countRemoved)}},i.prototype._reflowLargerAdjustViewport=function(n,e,a){for(var s=this.getNullCell(p.DEFAULT_ATTR_DATA),d=a;d-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new p.BufferLine(n,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)},i.prototype._reflowSmaller=function(n,e){for(var a=this.getNullCell(p.DEFAULT_ATTR_DATA),s=[],d=0,v=this.lines.length-1;v>=0;v--){var m=this.lines.get(v);if(!(!m||!m.isWrapped&&m.getTrimmedLength()<=n)){for(var S=[m];m.isWrapped&&v>0;)m=this.lines.get(--v),S.unshift(m);var L=this.ybase+this.y;if(!(L>=v&&L<v+S.length)){var T,I=S[S.length-1].getTrimmedLength(),A=u.reflowSmallerGetNewLineLengths(S,this._cols,n),C=A.length-S.length;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+C):Math.max(0,this.lines.length-this.lines.maxLength+C);for(var y=[],b=0;b<C;b++){var x=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);y.push(x)}y.length>0&&(s.push({start:v+S.length+d,newLines:y}),d+=y.length),S.push.apply(S,y);var M=A.length-1,D=A[M];D===0&&(D=A[--M]);for(var F=S.length-C-1,z=I;F>=0;){var X=Math.min(z,D);if(S[M].copyCellsFrom(S[F],z-X,D-X,X,!0),(D-=X)==0&&(D=A[--M]),(z-=X)==0){F--;var J=Math.max(F,0);z=u.getWrappedLineTrimmedLength(S,J,this._cols)}}for(b=0;b<S.length;b++)A[b]<n&&S[b].setCell(A[b],a);for(var K=C-T;K-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+C,this.ybase+e-1)}}}if(s.length>0){var E=[],G=[];for(b=0;b<this.lines.length;b++)G.push(this.lines.get(b));var B=this.lines.length,W=B-1,H=0,Y=s[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);var Z=0;for(b=Math.min(this.lines.maxLength-1,B+d-1);b>=0;b--)if(Y&&Y.start>W+Z){for(var te=Y.newLines.length-1;te>=0;te--)this.lines.set(b--,Y.newLines[te]);b++,E.push({index:W+1,amount:Y.newLines.length}),Z+=Y.newLines.length,Y=s[++H]}else this.lines.set(b,G[W--]);var ae=0;for(b=E.length-1;b>=0;b--)E[b].index+=ae,this.lines.onInsertEmitter.fire(E[b]),ae+=E[b].amount;var oe=Math.max(0,B+d-this.lines.maxLength);oe>0&&this.lines.onTrimEmitter.fire(oe)}},i.prototype.stringIndexToBufferIndex=function(n,e,a){for(a===void 0&&(a=!1);e;){var s=this.lines.get(n);if(!s)return[-1,-1];for(var d=a?s.getTrimmedLength():s.length,v=0;v<d;++v)if(s.get(v)[f.CHAR_DATA_WIDTH_INDEX]&&(e-=s.get(v)[f.CHAR_DATA_CHAR_INDEX].length||1),e<0)return[n,v];n++}return[n,0]},i.prototype.translateBufferLineToString=function(n,e,a,s){a===void 0&&(a=0);var d=this.lines.get(n);return d?d.translateToString(e,a,s):""},i.prototype.getWrappedRangeForLine=function(n){for(var e=n,a=n;e>0&&this.lines.get(e).isWrapped;)e--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:e,last:a}},i.prototype.setupTabStops=function(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.options.tabStopWidth)this.tabs[n]=!0},i.prototype.prevStop=function(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n},i.prototype.nextStop=function(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n},i.prototype.addMarker=function(n){var e=this,a=new _.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(function(s){a.line-=s,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(function(s){a.line>=s.index&&(a.line+=s.amount)})),a.register(this.lines.onDelete(function(s){a.line>=s.index&&a.line<s.index+s.amount&&a.dispose(),a.line>s.index&&(a.line-=s.amount)})),a.register(a.onDispose(function(){return e._removeMarker(a)})),a},i.prototype._removeMarker=function(n){this.markers.splice(this.markers.indexOf(n),1)},i.prototype.iterator=function(n,e,a,s,d){return new o(this,n,e,a,s,d)},i}();h.Buffer=r;var o=function(){function i(n,e,a,s,d,v){a===void 0&&(a=0),s===void 0&&(s=n.lines.length),d===void 0&&(d=0),v===void 0&&(v=0),this._buffer=n,this._trimRight=e,this._startIndex=a,this._endIndex=s,this._startOverscan=d,this._endOverscan=v,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return i.prototype.hasNext=function(){return this._current<this._endIndex},i.prototype.next=function(){var n=this._buffer.getWrappedRangeForLine(this._current);n.first<this._startIndex-this._startOverscan&&(n.first=this._startIndex-this._startOverscan),n.last>this._endIndex+this._endOverscan&&(n.last=this._endIndex+this._endOverscan),n.first=Math.max(n.first,0),n.last=Math.min(n.last,this._buffer.lines.length);for(var e="",a=n.first;a<=n.last;++a)e+=this._buffer.translateBufferLineToString(a,this._trimRight);return this._current=n.last+1,{range:n,content:e}},i}();h.BufferStringIterator=o},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(0),p=function(){function c(f){this._maxLength=f,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(c.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxLength",{get:function(){return this._maxLength},set:function(f){if(this._maxLength!==f){for(var u=new Array(f),_=0;_<Math.min(f,this.length);_++)u[_]=this._array[this._getCyclicIndex(_)];this._array=u,this._maxLength=f,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._length},set:function(f){if(f>this._length)for(var u=this._length;u<f;u++)this._array[u]=void 0;this._length=f},enumerable:!0,configurable:!0}),c.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},c.prototype.set=function(f,u){this._array[this._getCyclicIndex(f)]=u},c.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},c.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(c.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),c.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},c.prototype.splice=function(f,u){for(var _=[],t=2;t<arguments.length;t++)_[t-2]=arguments[t];if(u){for(var r=f;r<this._length-u;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+u)];this._length-=u}for(r=this._length-1;r>=f;r--)this._array[this._getCyclicIndex(r+_.length)]=this._array[this._getCyclicIndex(r)];for(r=0;r<_.length;r++)this._array[this._getCyclicIndex(f+r)]=_[r];if(this._length+_.length>this._maxLength){var o=this._length+_.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=_.length},c.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},c.prototype.shiftElements=function(f,u,_){if(!(u<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(var t=u-1;t>=0;t--)this.set(f+t+_,this.get(f+t));var r=f+u+_-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(t=0;t<u;t++)this.set(f+t+_,this.get(f+t))}},c.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},c}();h.CircularList=p},function(w,h,g){"use strict";function l(p,c,f){if(c===p.length-1)return p[c].getTrimmedLength();var u=!p[c].hasContent(f-1)&&p[c].getWidth(f-1)===1,_=p[c+1].getWidth(0)===2;return u&&_?f-1:f}Object.defineProperty(h,"__esModule",{value:!0}),h.reflowLargerGetLinesToRemove=function(p,c,f,u,_){for(var t=[],r=0;r<p.length-1;r++){var o=r,i=p.get(++o);if(i.isWrapped){for(var n=[p.get(r)];o<p.length&&i.isWrapped;)n.push(i),i=p.get(++o);if(u>=r&&u<o)r+=n.length-1;else{for(var e=0,a=l(n,e,c),s=1,d=0;s<n.length;){var v=l(n,s,c),m=v-d,S=f-a,L=Math.min(m,S);n[e].copyCellsFrom(n[s],d,a,L,!1),(a+=L)===f&&(e++,a=0),(d+=L)===v&&(s++,d=0),a===0&&e!==0&&n[e-1].getWidth(f-1)===2&&(n[e].copyCellsFrom(n[e-1],f-1,a++,1,!1),n[e-1].setCell(f-1,_))}n[e].replaceCells(a,f,_);for(var T=0,I=n.length-1;I>0&&(I>e||n[I].getTrimmedLength()===0);I--)T++;T>0&&(t.push(r+n.length-T),t.push(T)),r+=n.length-1}}}return t},h.reflowLargerCreateNewLayout=function(p,c){for(var f=[],u=0,_=c[u],t=0,r=0;r<p.length;r++)if(_===r){var o=c[++u];p.onDeleteEmitter.fire({index:r-t,amount:o}),r+=o-1,t+=o,_=c[++u]}else f.push(r);return{layout:f,countRemoved:t}},h.reflowLargerApplyNewLayout=function(p,c){for(var f=[],u=0;u<c.length;u++)f.push(p.get(c[u]));for(u=0;u<f.length;u++)p.set(u,f[u]);p.length=c.length},h.reflowSmallerGetNewLineLengths=function(p,c,f){for(var u=[],_=p.map(function(a,s){return l(p,s,c)}).reduce(function(a,s){return a+s}),t=0,r=0,o=0;o<_;){if(_-o<f){u.push(_-o);break}t+=f;var i=l(p,r,c);t>i&&(t-=i,r++);var n=p[r].getWidth(t-1)===2;n&&t--;var e=n?f-1:f;u.push(e),o+=e}return u},h.getWrappedLineTrimmedLength=l},function(w,h,g){"use strict";var l,p=this&&this.__extends||(l=function(u,_){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(u,_)},function(u,_){function t(){this.constructor=u}l(u,_),u.prototype=_===null?Object.create(_):(t.prototype=_.prototype,new t)});Object.defineProperty(h,"__esModule",{value:!0});var c=g(0),f=function(u){function _(t){var r=u.call(this)||this;return r.line=t,r._id=_._nextId++,r.isDisposed=!1,r._onDispose=new c.EventEmitter,r}return p(_,u),Object.defineProperty(_.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},_._nextId=1,_}(g(2).Disposable);h.Marker=f},function(w,h,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(4),f=g(28),u=function(){function _(t,r){this._renderService=t,this._charSizeService=r}return _.prototype.getCoords=function(t,r,o,i,n){return f.getCoords(t,r,o,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,n)},_.prototype.getRawByteCoords=function(t,r,o,i){var n=this.getCoords(t,r,o,i);return f.getRawByteCoords(n)},l([p(0,c.IRenderService),p(1,c.ICharSizeService)],_)}();h.MouseService=u},function(w,h,g){"use strict";var l=this&&this.__decorate||function(r,o,i,n){var e,a=arguments.length,s=a<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,o,i,n);else for(var d=r.length-1;d>=0;d--)(e=r[d])&&(s=(a<3?e(s):a>3?e(o,i,s):e(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},p=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=g(0),u=g(31),_=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,origin:!1,wraparound:!0}),t=function(){function r(o,i,n,e){this._scrollToBottom=o,this._bufferService=i,this._logService=n,this._optionsService=e,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=new f.EventEmitter,this._onUserInput=new f.EventEmitter,this._onBinary=new f.EventEmitter,this.decPrivateModes=u.clone(_)}return Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),r.prototype.reset=function(){this.decPrivateModes=u.clone(_)},r.prototype.triggerDataEvent=function(o,i){if(i===void 0&&(i=!1),!this._optionsService.options.disableStdin){var n=this._bufferService.buffer;n.ybase!==n.ydisp&&this._scrollToBottom(),i&&this._onUserInput.fire(),this._logService.debug('sending data "'+o+'"',function(){return o.split("").map(function(e){return e.charCodeAt(0)})}),this._onData.fire(o)}},r.prototype.triggerBinaryEvent=function(o){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+o+'"',function(){return o.split("").map(function(i){return i.charCodeAt(0)})}),this._onBinary.fire(o))},l([p(1,c.IBufferService),p(2,c.ILogService),p(3,c.IOptionsService)],r)}();h.CoreService=t},function(w,h,g){"use strict";var l=this&&this.__decorate||function(r,o,i,n){var e,a=arguments.length,s=a<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,o,i,n);else for(var d=r.length-1;d>=0;d--)(e=r[d])&&(s=(a<3?e(s):a>3?e(o,i,s):e(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},p=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}},c=this&&this.__spreadArrays||function(){for(var r=0,o=0,i=arguments.length;o<i;o++)r+=arguments[o].length;var n=Array(r),e=0;for(o=0;o<i;o++)for(var a=arguments[o],s=0,d=a.length;s<d;s++,e++)n[e]=a[s];return n};Object.defineProperty(h,"__esModule",{value:!0});var f,u=g(1);(function(r){r[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r[r.OFF=4]="OFF"})(f=h.LogLevel||(h.LogLevel={}));var _={debug:f.DEBUG,info:f.INFO,warn:f.WARN,error:f.ERROR,off:f.OFF},t=function(){function r(o){var i=this;this._optionsService=o,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){n==="logLevel"&&i._updateLogLevel()})}return r.prototype._updateLogLevel=function(){this._logLevel=_[this._optionsService.options.logLevel]},r.prototype._evalLazyOptionalParams=function(o){for(var i=0;i<o.length;i++)typeof o[i]=="function"&&(o[i]=o[i]())},r.prototype._log=function(o,i,n){this._evalLazyOptionalParams(n),o.call.apply(o,c([console,"xterm.js: "+i],n))},r.prototype.debug=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.DEBUG&&this._log(console.log,o,i)},r.prototype.info=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.INFO&&this._log(console.info,o,i)},r.prototype.warn=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.WARN&&this._log(console.warn,o,i)},r.prototype.error=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.ERROR&&this._log(console.error,o,i)},l([p(0,u.IOptionsService)],r)}();h.LogService=t},function(w,h,g){"use strict";var l=this&&this.__decorate||function(u,_,t,r){var o,i=arguments.length,n=i<3?_:r===null?r=Object.getOwnPropertyDescriptor(_,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(u,_,t,r);else for(var e=u.length-1;e>=0;e--)(o=u[e])&&(n=(i<3?o(n):i>3?o(_,t,n):o(_,t))||n);return i>3&&n&&Object.defineProperty(_,t,n),n},p=this&&this.__param||function(u,_){return function(t,r){_(t,r,u)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=function(){function u(_){this._bufferService=_,this.clearRange()}return Object.defineProperty(u.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),u.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},u.prototype.markDirty=function(_){_<this._start?this._start=_:_>this._end&&(this._end=_)},u.prototype.markRangeDirty=function(_,t){if(_>t){var r=_;_=t,t=r}_<this._start&&(this._start=_),t>this._end&&(this._end=t)},u.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([p(0,c.IBufferService)],u)}();h.DirtyRowService=f},function(w,h,g){"use strict";var l=this&&this.__spreadArrays||function(){for(var _=0,t=0,r=arguments.length;t<r;t++)_+=arguments[t].length;var o=Array(_),i=0;for(t=0;t<r;t++)for(var n=arguments[t],e=0,a=n.length;e<a;e++,i++)o[i]=n[e];return o};Object.defineProperty(h,"__esModule",{value:!0});var p=g(1),c=g(14),f=function(){function _(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._entries=new Map;for(var o=0,i=t;o<i.length;o++){var n=i[o],e=n[0],a=n[1];this.set(e,a)}}return _.prototype.set=function(t,r){var o=this._entries.get(t);return this._entries.set(t,r),o},_.prototype.forEach=function(t){this._entries.forEach(function(r,o){return t(o,r)})},_.prototype.has=function(t){return this._entries.has(t)},_.prototype.get=function(t){return this._entries.get(t)},_}();h.ServiceCollection=f;var u=function(){function _(){this._services=new f,this._services.set(p.IInstantiationService,this)}return _.prototype.setService=function(t,r){this._services.set(t,r)},_.prototype.getService=function(t){return this._services.get(t)},_.prototype.createInstance=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];for(var i=c.getServiceDependencies(t).sort(function(m,S){return m.index-S.index}),n=[],e=0,a=i;e<a.length;e++){var s=a[e],d=this._services.get(s.id);if(!d)throw new Error("[createInstance] "+t.name+" depends on UNKNOWN service "+s.id+".");n.push(d)}var v=i.length>0?i[0].index:r.length;if(r.length!==v)throw new Error("[createInstance] First service dependency of "+t.name+" at position "+(v+1)+" conflicts with "+r.length+" static arguments");return new(t.bind.apply(t,l([void 0],l(r,n))))},_}();h.InstantiationService=u},function(w,h,g){"use strict";var l=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,v=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(i,n,e,a);else for(var m=i.length-1;m>=0;m--)(s=i[m])&&(v=(d<3?s(v):d>3?s(n,e,v):s(n,e))||v);return d>3&&v&&Object.defineProperty(n,e,v),v},p=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(h,"__esModule",{value:!0});var c=g(1),f=g(0),u={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(i){return i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)}},VT200:{events:19,restrict:function(i){return i.action!==32}},DRAG:{events:23,restrict:function(i){return i.action!==32||i.button!==3}},ANY:{events:31,restrict:function(i){return!0}}};function _(i,n){var e=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(e|=64,e|=i.action):(e|=3&i.button,4&i.button&&(e|=64),8&i.button&&(e|=128),i.action===32?e|=32:i.action!==0||n||(e|=3)),e}var t=String.fromCharCode,r={DEFAULT:function(i){var n=[_(i,!1)+32,i.col+32,i.row+32];return n[0]>255||n[1]>255||n[2]>255?"":"\x1B[M"+t(n[0])+t(n[1])+t(n[2])},SGR:function(i){var n=i.action===0&&i.button!==4?"m":"M";return"\x1B[<"+_(i,!0)+";"+i.col+";"+i.row+n}},o=function(){function i(n,e){var a=this;this._bufferService=n,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null,Object.keys(u).forEach(function(s){return a.addProtocol(s,u[s])}),Object.keys(r).forEach(function(s){return a.addEncoding(s,r[s])}),this.reset()}return i.prototype.addProtocol=function(n,e){this._protocols[n]=e},i.prototype.addEncoding=function(n,e){this._encodings[n]=e},Object.defineProperty(i.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(n){if(!this._protocols[n])throw new Error('unknown protocol "'+n+'"');this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(n){if(!this._encodings[n])throw new Error('unknown encoding "'+n+'"');this._activeEncoding=n},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(i.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),i.prototype.triggerMouseEvent=function(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,n))||!this._protocols[this._activeProtocol].restrict(n))return!1;var e=this._encodings[this._activeEncoding](n);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=n,!0},i.prototype.explainEvents=function(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}},i.prototype._compareEvents=function(n,e){return n.col===e.col&&n.row===e.row&&n.button===e.button&&n.action===e.action&&n.ctrl===e.ctrl&&n.alt===e.alt&&n.shift===e.shift},l([p(0,c.IBufferService),p(1,c.ICoreService)],i)}();h.CoreMouseService=o},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c){this._action=c,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return p.prototype.writeSync=function(c){if(this._writeBuffer.length){for(var f=this._bufferOffset;f<this._writeBuffer.length;++f){var u=this._writeBuffer[f],_=this._callbacks[f];this._action(u),_&&_()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(c)},p.prototype.write=function(c,f){var u=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return u._innerWrite()})),this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f)},p.prototype._innerWrite=function(){for(var c=this,f=Date.now();this._writeBuffer.length>this._bufferOffset;){var u=this._writeBuffer[this._bufferOffset],_=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(u),this._pendingData-=u.length,_&&_(),Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return c._innerWrite()},0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},p}();h.WriteBuffer=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(0),p=function(){function c(f){this._bufferService=f,this._linkProviders=[],this._linkCacheDisposables=[],this._onLinkHover=new l.EventEmitter,this._onLinkLeave=new l.EventEmitter}return Object.defineProperty(c.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),c.prototype.registerLinkProvider=function(f){var u=this;return this._linkProviders.push(f),{dispose:function(){var _=u._linkProviders.indexOf(f);_!==-1&&u._linkProviders.splice(_,1)}}},c.prototype.attachToDom=function(f,u,_){this._element=f,this._mouseService=u,this._renderService=_,this._element.addEventListener("mousemove",this._onMouseMove.bind(this)),this._element.addEventListener("click",this._onMouseDown.bind(this))},c.prototype._onMouseMove=function(f){if(this._lastMouseEvent=f,this._element&&this._mouseService){var u=this._positionFromMouseEvent(f,this._element,this._mouseService);u&&(this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._onHover(u),this._lastBufferCell=u))}},c.prototype._onHover=function(f){this._currentLink?this._linkAtPosition(this._currentLink,f)||(this._clearCurrentLink(),this._askForLink(f)):this._askForLink(f)},c.prototype._askForLink=function(f){var u=this,_=new Map,t=!1;this._linkProviders.forEach(function(r,o){r.provideLink(f,function(i){_.set(o,i);for(var n=!1,e=0;e<o;e++)_.has(e)&&!_.get(e)||(n=!0);if(!n&&i&&(t=!0,u._handleNewLink(i)),_.size===u._linkProviders.length&&!t)for(e=0;e<_.size;e++){var a=_.get(e);if(a){u._handleNewLink(a);break}}})})},c.prototype._onMouseDown=function(f){if(this._element&&this._mouseService&&this._currentLink){var u=this._positionFromMouseEvent(f,this._element,this._mouseService);u&&this._linkAtPosition(this._currentLink,u)&&this._currentLink.activate(f,this._currentLink.text)}},c.prototype._clearCurrentLink=function(f,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!f||!u||this._currentLink.range.start.y>=f&&this._currentLink.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink,this._lastMouseEvent),this._currentLink=void 0,this._linkCacheDisposables.forEach(function(_){return _.dispose()}),this._linkCacheDisposables=[])},c.prototype._handleNewLink=function(f){var u=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(f,_)&&(this._currentLink=f,this._linkHover(this._element,f,this._lastMouseEvent),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRender(function(t){u._clearCurrentLink(t.start+1+u._bufferService.buffer.ydisp,t.end+1+u._bufferService.buffer.ydisp)})))}},c.prototype._linkHover=function(f,u,_){var t=u.range,r=this._bufferService.buffer.ydisp;this._onLinkHover.fire(this._createLinkHoverEvent(t.start.x-1,t.start.y-r-1,t.end.x,t.end.y-r-1,void 0)),f.classList.add("xterm-cursor-pointer"),u.hover&&u.hover(_,u.text)},c.prototype._linkLeave=function(f,u,_){var t=u.range,r=this._bufferService.buffer.ydisp;this._onLinkLeave.fire(this._createLinkHoverEvent(t.start.x-1,t.start.y-r-1,t.end.x,t.end.y-r-1,void 0)),f.classList.remove("xterm-cursor-pointer"),u.leave&&u.leave(_,u.text)},c.prototype._linkAtPosition=function(f,u){var _=f.range.start.y===f.range.end.y,t=f.range.start.y<u.y,r=f.range.end.y>u.y;return(_&&f.range.start.x<=u.x&&f.range.end.x>=u.x||t&&f.range.end.x>=u.x||r&&f.range.start.x<=u.x||t&&r)&&f.range.start.y<=u.y&&f.range.end.y>=u.y},c.prototype._positionFromMouseEvent=function(f,u,_){var t=_.getCoords(f,u,this._bufferService.cols,this._bufferService.rows);if(t)return{x:t[0],y:t[1]+this._bufferService.buffer.ydisp}},c.prototype._createLinkHoverEvent=function(f,u,_,t,r){return{x1:f,y1:u,x2:_,y2:t,cols:this._bufferService.cols,fg:r}},c}();h.Linkifier2=p},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(c){this._textarea=c}return Object.defineProperty(p.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),p}();h.CoreBrowserService=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=g(0),p=g(79),c=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var u=new p.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(u){if(!this._providers[u])throw new Error('unknown Unicode version "'+u+'"');this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)},enumerable:!0,configurable:!0}),f.prototype.register=function(u){this._providers[u.version]=u},f.prototype.wcwidth=function(u){return this._activeProvider.wcwidth(u)},f.prototype.getStringCellWidth=function(u){for(var _=0,t=u.length,r=0;r<t;++r){var o=u.charCodeAt(r);if(55296<=o&&o<=56319){if(++r>=t)return _+this.wcwidth(o);var i=u.charCodeAt(r);56320<=i&&i<=57343?o=1024*(o-55296)+i-56320+65536:_+=this.wcwidth(i)}_+=this.wcwidth(o)}return _},f}();h.UnicodeService=c},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l,p=g(15),c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u=function(){function _(){if(this.version="6",!l){l=new Uint8Array(65536),p.fill(l,1),l[0]=0,p.fill(l,0,1,32),p.fill(l,0,127,160),p.fill(l,2,4352,4448),l[9001]=2,l[9002]=2,p.fill(l,2,11904,42192),l[12351]=1,p.fill(l,2,44032,55204),p.fill(l,2,63744,64256),p.fill(l,2,65040,65050),p.fill(l,2,65072,65136),p.fill(l,2,65280,65377),p.fill(l,2,65504,65511);for(var t=0;t<c.length;++t)p.fill(l,0,c[t][0],c[t][1]+1)}}return _.prototype.wcwidth=function(t){return t<32?0:t<127?1:t<65536?l[t]:function(r,o){var i,n=0,e=o.length-1;if(r<o[0][0]||r>o[e][1])return!1;for(;e>=n;)if(r>o[i=n+e>>1][1])n=i+1;else{if(!(r<o[i][0]))return!0;e=i-1}return!1}(t,f)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1},_}();h.UnicodeV6=u},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this.charsets=[],this.glevel=0}return p.prototype.reset=function(){this.charset=void 0,this.charsets=[],this.glevel=0},p.prototype.setgLevel=function(c){this.glevel=c,this.charset=this.charsets[c]},p.prototype.setgCharset=function(c,f){this.charsets[c]=f,this.glevel===c&&(this.charset=f)},p}();h.CharsetService=l},function(w,h,g){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var l=function(){function p(){this._addons=[]}return p.prototype.dispose=function(){for(var c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()},p.prototype.loadAddon=function(c,f){var u=this,_={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=function(){return u._wrappedAddonDispose(_)},f.activate(c)},p.prototype._wrappedAddonDispose=function(c){if(!c.isDisposed){for(var f=-1,u=0;u<this._addons.length;u++)if(this._addons[u]===c){f=u;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(f,1)}},p}();h.AddonManager=l}])},function(P,j,R){"use strict";var w=R(30),h=R(26);w({target:"Array",proto:!0,forced:[].forEach!=h},{forEach:h})},function(P,j,R){var w=R(1),h=R(10).f,g=R(6),l=R(34),p=R(9),c=R(39),f=R(49);P.exports=function(u,_){var t,r,o,i,n,e=u.target,a=u.global,s=u.stat;if(t=a?w:s?w[e]||p(e,{}):(w[e]||{}).prototype)for(r in _){if(i=_[r],o=u.noTargetGet?(n=h(t,r))&&n.value:t[r],!f(a?r:e+(s?".":"#")+r,u.forced)&&o!==void 0){if(typeof i==typeof o)continue;c(i,o)}(u.sham||o&&o.sham)&&g(i,"sham",!0),l(t,r,i,u)}}},function(P,j){var R;R=function(){return this}();try{R=R||new Function("return this")()}catch(w){typeof window=="object"&&(R=window)}P.exports=R},function(P,j,R){"use strict";var w={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,g=h&&!w.call({1:2},1);j.f=g?function(l){var p=h(this,l);return!!p&&p.enumerable}:w},function(P,j,R){var w=R(1),h=R(5),g=w.document,l=h(g)&&h(g.createElement);P.exports=function(p){return l?g.createElement(p):{}}},function(P,j,R){var w=R(1),h=R(6),g=R(3),l=R(9),p=R(19),c=R(35),f=c.get,u=c.enforce,_=String(String).split("String");(P.exports=function(t,r,o,i){var n=!!i&&!!i.unsafe,e=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;typeof o=="function"&&(typeof r!="string"||g(o,"name")||h(o,"name",r),u(o).source=_.join(typeof r=="string"?r:"")),t!==w?(n?!a&&t[r]&&(e=!0):delete t[r],e?t[r]=o:h(t,r,o)):e?t[r]=o:l(r,o)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||p(this)})},function(P,j,R){var w,h,g,l=R(36),p=R(1),c=R(5),f=R(6),u=R(3),_=R(37),t=R(23),r=p.WeakMap;if(l){var o=new r,i=o.get,n=o.has,e=o.set;w=function(s,d){return e.call(o,s,d),d},h=function(s){return i.call(o,s)||{}},g=function(s){return n.call(o,s)}}else{var a=_("state");t[a]=!0,w=function(s,d){return f(s,a,d),d},h=function(s){return u(s,a)?s[a]:{}},g=function(s){return u(s,a)}}P.exports={set:w,get:h,has:g,enforce:function(s){return g(s)?h(s):w(s,{})},getterFor:function(s){return function(d){var v;if(!c(d)||(v=h(d)).type!==s)throw TypeError("Incompatible receiver, "+s+" required");return v}}}},function(P,j,R){var w=R(1),h=R(19),g=w.WeakMap;P.exports=typeof g=="function"&&/native code/.test(h(g))},function(P,j,R){var w=R(21),h=R(22),g=w("keys");P.exports=function(l){return g[l]||(g[l]=h(l))}},function(P,j){P.exports=!1},function(P,j,R){var w=R(3),h=R(40),g=R(10),l=R(17);P.exports=function(p,c){for(var f=h(c),u=l.f,_=g.f,t=0;t<f.length;t++){var r=f[t];w(p,r)||u(p,r,_(c,r))}}},function(P,j,R){var w=R(41),h=R(43),g=R(48),l=R(18);P.exports=w("Reflect","ownKeys")||function(p){var c=h.f(l(p)),f=g.f;return f?c.concat(f(p)):c}},function(P,j,R){var w=R(42),h=R(1),g=function(l){return typeof l=="function"?l:void 0};P.exports=function(l,p){return arguments.length<2?g(w[l])||g(h[l]):w[l]&&w[l][p]||h[l]&&h[l][p]}},function(P,j,R){var w=R(1);P.exports=w},function(P,j,R){var w=R(44),h=R(47).concat("length","prototype");j.f=Object.getOwnPropertyNames||function(g){return w(g,h)}},function(P,j,R){var w=R(3),h=R(8),g=R(45).indexOf,l=R(23);P.exports=function(p,c){var f,u=h(p),_=0,t=[];for(f in u)!w(l,f)&&w(u,f)&&t.push(f);for(;c.length>_;)w(u,f=c[_++])&&(~g(t,f)||t.push(f));return t}},function(P,j,R){var w=R(8),h=R(24),g=R(46),l=function(p){return function(c,f,u){var _,t=w(c),r=h(t.length),o=g(u,r);if(p&&f!=f){for(;r>o;)if((_=t[o++])!=_)return!0}else for(;r>o;o++)if((p||o in t)&&t[o]===f)return p||o||0;return!p&&-1}};P.exports={includes:l(!0),indexOf:l(!1)}},function(P,j,R){var w=R(25),h=Math.max,g=Math.min;P.exports=function(l,p){var c=w(l);return c<0?h(c+p,0):g(c,p)}},function(P,j){P.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(P,j){j.f=Object.getOwnPropertySymbols},function(P,j,R){var w=R(2),h=/#|\.prototype\./,g=function(u,_){var t=p[l(u)];return t==f||t!=c&&(typeof _=="function"?w(_):!!_)},l=g.normalize=function(u){return String(u).replace(h,".").toLowerCase()},p=g.data={},c=g.NATIVE="N",f=g.POLYFILL="P";P.exports=g},function(P,j,R){var w=R(51),h=R(12),g=R(53),l=R(24),p=R(54),c=[].push,f=function(u){var _=u==1,t=u==2,r=u==3,o=u==4,i=u==6,n=u==5||i;return function(e,a,s,d){for(var v,m,S=g(e),L=h(S),T=w(a,s,3),I=l(L.length),A=0,C=d||p,y=_?C(e,I):t?C(e,0):void 0;I>A;A++)if((n||A in L)&&(m=T(v=L[A],A,S),u)){if(_)y[A]=m;else if(m)switch(u){case 3:return!0;case 5:return v;case 6:return A;case 2:c.call(y,v)}else if(o)return!1}return i?-1:r||o?o:y}};P.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},function(P,j,R){var w=R(52);P.exports=function(h,g,l){if(w(h),g===void 0)return h;switch(l){case 0:return function(){return h.call(g)};case 1:return function(p){return h.call(g,p)};case 2:return function(p,c){return h.call(g,p,c)};case 3:return function(p,c,f){return h.call(g,p,c,f)}}return function(){return h.apply(g,arguments)}}},function(P,j){P.exports=function(R){if(typeof R!="function")throw TypeError(String(R)+" is not a function");return R}},function(P,j,R){var w=R(14);P.exports=function(h){return Object(w(h))}},function(P,j,R){var w=R(5),h=R(55),g=R(56)("species");P.exports=function(l,p){var c;return h(l)&&(typeof(c=l.constructor)!="function"||c!==Array&&!h(c.prototype)?w(c)&&(c=c[g])===null&&(c=void 0):c=void 0),new(c===void 0?Array:c)(p===0?0:p)}},function(P,j,R){var w=R(13);P.exports=Array.isArray||function(h){return w(h)=="Array"}},function(P,j,R){var w=R(1),h=R(21),g=R(3),l=R(22),p=R(27),c=R(57),f=h("wks"),u=w.Symbol,_=c?u:u&&u.withoutSetter||l;P.exports=function(t){return g(f,t)||(p&&g(u,t)?f[t]=u[t]:f[t]=_("Symbol."+t)),f[t]}},function(P,j,R){var w=R(27);P.exports=w&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(P,j,R){"use strict";var w=R(2);P.exports=function(h,g){var l=[][h];return!!l&&w(function(){l.call(null,g||function(){throw 1},1)})}},function(P,j,R){var w=R(4),h=R(2),g=R(3),l=Object.defineProperty,p={},c=function(f){throw f};P.exports=function(f,u){if(g(p,f))return p[f];u||(u={});var _=[][f],t=!!g(u,"ACCESSORS")&&u.ACCESSORS,r=g(u,0)?u[0]:c,o=g(u,1)?u[1]:void 0;return p[f]=!!_&&!h(function(){if(t&&!w)return!0;var i={length:-1};t?l(i,1,{enumerable:!0,get:c}):i[1]=1,_.call(i,r,o)})}},function(P,j,R){var w=R(1),h=R(61),g=R(26),l=R(6);for(var p in h){var c=w[p],f=c&&c.prototype;if(f&&f.forEach!==g)try{l(f,"forEach",g)}catch(u){f.forEach=g}}},function(P,j){P.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(P,j,R){"use strict";var w=R(63),h=typeof Symbol=="function"&&Symbol.for,g=h?Symbol.for("react.element"):60103,l=h?Symbol.for("react.portal"):60106,p=h?Symbol.for("react.fragment"):60107,c=h?Symbol.for("react.strict_mode"):60108,f=h?Symbol.for("react.profiler"):60114,u=h?Symbol.for("react.provider"):60109,_=h?Symbol.for("react.context"):60110,t=h?Symbol.for("react.forward_ref"):60112,r=h?Symbol.for("react.suspense"):60113,o=h?Symbol.for("react.memo"):60115,i=h?Symbol.for("react.lazy"):60116,n=typeof Symbol=="function"&&Symbol.iterator;function e(B){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+B,H=1;H<arguments.length;H++)W+="&args[]="+encodeURIComponent(arguments[H]);return"Minified React error #"+B+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s={};function d(B,W,H){this.props=B,this.context=W,this.refs=s,this.updater=H||a}function v(){}function m(B,W,H){this.props=B,this.context=W,this.refs=s,this.updater=H||a}d.prototype.isReactComponent={},d.prototype.setState=function(B,W){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error(e(85));this.updater.enqueueSetState(this,B,W,"setState")},d.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")},v.prototype=d.prototype;var S=m.prototype=new v;S.constructor=m,w(S,d.prototype),S.isPureReactComponent=!0;var L={current:null},T=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function A(B,W,H){var Y,Z={},te=null,ae=null;if(W!=null)for(Y in W.ref!==void 0&&(ae=W.ref),W.key!==void 0&&(te=""+W.key),W)T.call(W,Y)&&!I.hasOwnProperty(Y)&&(Z[Y]=W[Y]);var oe=arguments.length-2;if(oe===1)Z.children=H;else if(1<oe){for(var U=Array(oe),O=0;O<oe;O++)U[O]=arguments[O+2];Z.children=U}if(B&&B.defaultProps)for(Y in oe=B.defaultProps)Z[Y]===void 0&&(Z[Y]=oe[Y]);return{$$typeof:g,type:B,key:te,ref:ae,props:Z,_owner:L.current}}function C(B){return typeof B=="object"&&B!==null&&B.$$typeof===g}var y=/\/+/g,b=[];function x(B,W,H,Y){if(b.length){var Z=b.pop();return Z.result=B,Z.keyPrefix=W,Z.func=H,Z.context=Y,Z.count=0,Z}return{result:B,keyPrefix:W,func:H,context:Y,count:0}}function M(B){B.result=null,B.keyPrefix=null,B.func=null,B.context=null,B.count=0,10>b.length&&b.push(B)}function D(B,W,H){return B==null?0:function Y(Z,te,ae,oe){var U=typeof Z;U!=="undefined"&&U!=="boolean"||(Z=null);var O=!1;if(Z===null)O=!0;else switch(U){case"string":case"number":O=!0;break;case"object":switch(Z.$$typeof){case g:case l:O=!0}}if(O)return ae(oe,Z,te===""?"."+F(Z,0):te),1;if(O=0,te=te===""?".":te+":",Array.isArray(Z))for(var k=0;k<Z.length;k++){var q=te+F(U=Z[k],k);O+=Y(U,q,ae,oe)}else if(Z===null||typeof Z!="object"?q=null:q=typeof(q=n&&Z[n]||Z["@@iterator"])=="function"?q:null,typeof q=="function")for(Z=q.call(Z),k=0;!(U=Z.next()).done;)O+=Y(U=U.value,q=te+F(U,k++),ae,oe);else if(U==="object")throw ae=""+Z,Error(e(31,ae==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ae,""));return O}(B,"",W,H)}function F(B,W){return typeof B=="object"&&B!==null&&B.key!=null?function(H){var Y={"=":"=0",":":"=2"};return"$"+(""+H).replace(/[=:]/g,function(Z){return Y[Z]})}(B.key):W.toString(36)}function z(B,W){B.func.call(B.context,W,B.count++)}function X(B,W,H){var Y=B.result,Z=B.keyPrefix;B=B.func.call(B.context,W,B.count++),Array.isArray(B)?J(B,Y,H,function(te){return te}):B!=null&&(C(B)&&(B=function(te,ae){return{$$typeof:g,type:te.type,key:ae,ref:te.ref,props:te.props,_owner:te._owner}}(B,Z+(!B.key||W&&W.key===B.key?"":(""+B.key).replace(y,"$&/")+"/")+H)),Y.push(B))}function J(B,W,H,Y,Z){var te="";H!=null&&(te=(""+H).replace(y,"$&/")+"/"),D(B,X,W=x(W,te,Y,Z)),M(W)}var K={current:null};function E(){var B=K.current;if(B===null)throw Error(e(321));return B}var G={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:L,IsSomeRendererActing:{current:!1},assign:w};j.Children={map:function(B,W,H){if(B==null)return B;var Y=[];return J(B,Y,null,W,H),Y},forEach:function(B,W,H){if(B==null)return B;D(B,z,W=x(null,null,W,H)),M(W)},count:function(B){return D(B,function(){return null},null)},toArray:function(B){var W=[];return J(B,W,null,function(H){return H}),W},only:function(B){if(!C(B))throw Error(e(143));return B}},j.Component=d,j.Fragment=p,j.Profiler=f,j.PureComponent=m,j.StrictMode=c,j.Suspense=r,j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,j.cloneElement=function(B,W,H){if(B==null)throw Error(e(267,B));var Y=w({},B.props),Z=B.key,te=B.ref,ae=B._owner;if(W!=null){if(W.ref!==void 0&&(te=W.ref,ae=L.current),W.key!==void 0&&(Z=""+W.key),B.type&&B.type.defaultProps)var oe=B.type.defaultProps;for(U in W)T.call(W,U)&&!I.hasOwnProperty(U)&&(Y[U]=W[U]===void 0&&oe!==void 0?oe[U]:W[U])}var U=arguments.length-2;if(U===1)Y.children=H;else if(1<U){oe=Array(U);for(var O=0;O<U;O++)oe[O]=arguments[O+2];Y.children=oe}return{$$typeof:g,type:B.type,key:Z,ref:te,props:Y,_owner:ae}},j.createContext=function(B,W){return W===void 0&&(W=null),(B={$$typeof:_,_calculateChangedBits:W,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:B},B.Consumer=B},j.createElement=A,j.createFactory=function(B){var W=A.bind(null,B);return W.type=B,W},j.createRef=function(){return{current:null}},j.forwardRef=function(B){return{$$typeof:t,render:B}},j.isValidElement=C,j.lazy=function(B){return{$$typeof:i,_ctor:B,_status:-1,_result:null}},j.memo=function(B,W){return{$$typeof:o,type:B,compare:W===void 0?null:W}},j.useCallback=function(B,W){return E().useCallback(B,W)},j.useContext=function(B,W){return E().useContext(B,W)},j.useDebugValue=function(){},j.useEffect=function(B,W){return E().useEffect(B,W)},j.useImperativeHandle=function(B,W,H){return E().useImperativeHandle(B,W,H)},j.useLayoutEffect=function(B,W){return E().useLayoutEffect(B,W)},j.useMemo=function(B,W){return E().useMemo(B,W)},j.useReducer=function(B,W,H){return E().useReducer(B,W,H)},j.useRef=function(B){return E().useRef(B)},j.useState=function(B){return E().useState(B)},j.version="16.13.1"},function(P,j,R){"use strict";var w=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function l(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}P.exports=function(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var c={},f=0;f<10;f++)c["_"+String.fromCharCode(f)]=f;if(Object.getOwnPropertyNames(c).map(function(_){return c[_]}).join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(_){u[_]=_}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch(_){return!1}}()?Object.assign:function(p,c){for(var f,u,_=l(p),t=1;t<arguments.length;t++){for(var r in f=Object(arguments[t]))h.call(f,r)&&(_[r]=f[r]);if(w){u=w(f);for(var o=0;o<u.length;o++)g.call(f,u[o])&&(_[u[o]]=f[u[o]])}}return _}},function(P,j,R){"use strict";var w=R(65);function h(){}function g(){}g.resetWarningCache=h,P.exports=function(){function l(f,u,_,t,r,o){if(o!==w){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function p(){return l}l.isRequired=l;var c={array:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:p,element:l,elementType:l,instanceOf:p,node:l,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:g,resetWarningCache:h};return c.PropTypes=c,c}},function(P,j,R){"use strict";P.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(P,j,R){var w=R(67),h=R(68);typeof(h=h.__esModule?h.default:h)=="string"&&(h=[[P.i,h,""]]);var g={insert:"head",singleton:!1};w(h,g),P.exports=h.locals||{}},function(P,j,R){"use strict";var w,h=function(){return w===void 0&&(w=!!(window&&document&&document.all&&!window.atob)),w},g=function(){var e={};return function(a){if(e[a]===void 0){var s=document.querySelector(a);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(d){s=null}e[a]=s}return e[a]}}(),l=[];function p(e){for(var a=-1,s=0;s<l.length;s++)if(l[s].identifier===e){a=s;break}return a}function c(e,a){for(var s={},d=[],v=0;v<e.length;v++){var m=e[v],S=a.base?m[0]+a.base:m[0],L=s[S]||0,T="".concat(S," ").concat(L);s[S]=L+1;var I=p(T),A={css:m[1],media:m[2],sourceMap:m[3]};I!==-1?(l[I].references++,l[I].updater(A)):l.push({identifier:T,updater:n(A,a),references:1}),d.push(T)}return d}function f(e){var a=document.createElement("style"),s=e.attributes||{};if(s.nonce===void 0){var d=R.nc;d&&(s.nonce=d)}if(Object.keys(s).forEach(function(m){a.setAttribute(m,s[m])}),typeof e.insert=="function")e.insert(a);else{var v=g(e.insert||"head");if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(a)}return a}var u,_=(u=[],function(e,a){return u[e]=a,u.filter(Boolean).join(`
`)});function t(e,a,s,d){var v=s?"":d.media?"@media ".concat(d.media," {").concat(d.css,"}"):d.css;if(e.styleSheet)e.styleSheet.cssText=_(a,v);else{var m=document.createTextNode(v),S=e.childNodes;S[a]&&e.removeChild(S[a]),S.length?e.insertBefore(m,S[a]):e.appendChild(m)}}function r(e,a,s){var d=s.css,v=s.media,m=s.sourceMap;if(v?e.setAttribute("media",v):e.removeAttribute("media"),m&&btoa&&(d+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),e.styleSheet)e.styleSheet.cssText=d;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(d))}}var o=null,i=0;function n(e,a){var s,d,v;if(a.singleton){var m=i++;s=o||(o=f(a)),d=t.bind(null,s,m,!1),v=t.bind(null,s,m,!0)}else s=f(a),d=r.bind(null,s,a),v=function(){(function(S){if(S.parentNode===null)return!1;S.parentNode.removeChild(S)})(s)};return d(e),function(S){if(S){if(S.css===e.css&&S.media===e.media&&S.sourceMap===e.sourceMap)return;d(e=S)}else v()}}P.exports=function(e,a){(a=a||{}).singleton||typeof a.singleton=="boolean"||(a.singleton=h());var s=c(e=e||[],a);return function(d){if(d=d||[],Object.prototype.toString.call(d)==="[object Array]"){for(var v=0;v<s.length;v++){var m=p(s[v]);l[m].references--}for(var S=c(d,a),L=0;L<s.length;L++){var T=p(s[L]);l[T].references===0&&(l[T].updater(),l.splice(T,1))}s=S}}}},function(P,j,R){(j=R(69)(!1)).push([P.i,`/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */

/**
 *  Default styles for xterm.js
 */

.xterm {
    font-feature-settings: "liga" 0;
    position: relative;
    user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
}

.xterm.focus,
.xterm:focus {
    outline: none;
}

.xterm .xterm-helpers {
    position: absolute;
    top: 0;
    /**
     * The z-index of the helpers must be higher than the canvases in order for
     * IMEs to appear on top.
     */
    z-index: 5;
}

.xterm .xterm-helper-textarea {
    /*
     * HACK: to fix IE's blinking cursor
     * Move textarea out of the screen to the far left, so that the cursor is not visible.
     */
    position: absolute;
    opacity: 0;
    left: -9999em;
    top: 0;
    width: 0;
    height: 0;
    z-index: -5;
    /** Prevent wrapping so the IME appears against the textarea at the correct position */
    white-space: nowrap;
    overflow: hidden;
    resize: none;
}

.xterm .composition-view {
    /* TODO: Composition position got messed up somewhere */
    background: #000;
    color: #FFF;
    display: none;
    position: absolute;
    white-space: nowrap;
    z-index: 1;
}

.xterm .composition-view.active {
    display: block;
}

.xterm .xterm-viewport {
    /* On OS X this is required in order for the scroll bar to appear fully opaque */
    background-color: #000;
    overflow-y: scroll;
    cursor: default;
    position: absolute;
    right: 0;
    left: 0;
    top: 0;
    bottom: 0;
}

.xterm .xterm-screen {
    position: relative;
}

.xterm .xterm-screen canvas {
    position: absolute;
    left: 0;
    top: 0;
}

.xterm .xterm-scroll-area {
    visibility: hidden;
}

.xterm-char-measure-element {
    display: inline-block;
    visibility: hidden;
    position: absolute;
    top: 0;
    left: -9999em;
    line-height: normal;
}

.xterm {
    cursor: text;
}

.xterm.enable-mouse-events {
    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */
    cursor: default;
}

.xterm.xterm-cursor-pointer {
    cursor: pointer;
}

.xterm.column-select.focus {
    /* Column selection mode */
    cursor: crosshair;
}

.xterm .xterm-accessibility,
.xterm .xterm-message {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 10;
    color: transparent;
}

.xterm .live-region {
    position: absolute;
    left: -9999px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

.xterm-dim {
    opacity: 0.5;
}

.xterm-underline {
    text-decoration: underline;
}
`,""]),P.exports=j},function(P,j,R){"use strict";P.exports=function(w){var h=[];return h.toString=function(){return this.map(function(g){var l=function(p,c){var f=p[1]||"",u=p[3];if(!u)return f;if(c&&typeof btoa=="function"){var _=(r=u,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(i," */")),t=u.sources.map(function(n){return"/*# sourceURL=".concat(u.sourceRoot||"").concat(n," */")});return[f].concat(t).concat([_]).join(`
`)}var r,o,i;return[f].join(`
`)}(g,w);return g[2]?"@media ".concat(g[2]," {").concat(l,"}"):l}).join("")},h.i=function(g,l,p){typeof g=="string"&&(g=[[null,g,""]]);var c={};if(p)for(var f=0;f<this.length;f++){var u=this[f][0];u!=null&&(c[u]=!0)}for(var _=0;_<g.length;_++){var t=[].concat(g[_]);p&&c[t[0]]||(l&&(t[2]?t[2]="".concat(l," and ").concat(t[2]):t[2]=l),h.push(t))}},h}},function(P,j,R){"use strict";R.r(j),R.d(j,"XTerm",function(){return f}),R(29),R(60);var w,h=R(7),g=R(0),l=R.n(g),p=(R(66),R(28)),c=(w=function(u,_){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(u,_)},function(u,_){function t(){this.constructor=u}w(u,_),u.prototype=_===null?Object.create(_):(t.prototype=_.prototype,new t)}),f=function(u){function _(t){var r=u.call(this,t)||this;return r.terminalRef=h.createRef(),r.onData=r.onData.bind(r),r.onCursorMove=r.onCursorMove.bind(r),r.onKey=r.onKey.bind(r),r.onBinary=r.onBinary.bind(r),r.onLineFeed=r.onLineFeed.bind(r),r.onScroll=r.onScroll.bind(r),r.onSelectionChange=r.onSelectionChange.bind(r),r.onRender=r.onRender.bind(r),r.onResize=r.onResize.bind(r),r.onTitleChange=r.onTitleChange.bind(r),r.setupTerminal(),r}return c(_,u),_.prototype.setupTerminal=function(){var t=this;this.terminal=new p.Terminal(this.props.options),this.props.addons&&this.props.addons.forEach(function(r){t.terminal.loadAddon(r)}),this.terminal.onBinary(this.onBinary),this.terminal.onCursorMove(this.onCursorMove),this.terminal.onData(this.onData),this.terminal.onKey(this.onKey),this.terminal.onLineFeed(this.onLineFeed),this.terminal.onScroll(this.onScroll),this.terminal.onSelectionChange(this.onSelectionChange),this.terminal.onRender(this.onRender),this.terminal.onResize(this.onResize),this.terminal.onTitleChange(this.onTitleChange),this.props.customKeyEventHandler&&this.terminal.attachCustomKeyEventHandler(this.props.customKeyEventHandler)},_.prototype.componentDidMount=function(){this.terminalRef.current&&this.terminal.open(this.terminalRef.current)},_.prototype.componentWillUnmount=function(){this.terminal.dispose()},_.prototype.onBinary=function(t){this.props.onBinary&&this.props.onBinary(t)},_.prototype.onCursorMove=function(){this.props.onCursorMove&&this.props.onCursorMove()},_.prototype.onData=function(t){this.props.onData&&this.props.onData(t)},_.prototype.onKey=function(t){this.props.onKey&&this.props.onKey(t)},_.prototype.onLineFeed=function(){this.props.onLineFeed&&this.props.onLineFeed()},_.prototype.onScroll=function(t){this.props.onScroll&&this.props.onScroll(t)},_.prototype.onSelectionChange=function(){this.props.onSelectionChange&&this.props.onSelectionChange()},_.prototype.onRender=function(t){this.props.onRender&&this.props.onRender(t)},_.prototype.onResize=function(t){this.props.onResize&&this.props.onResize(t)},_.prototype.onTitleChange=function(t){this.props.onTitleChange&&this.props.onTitleChange(t)},_.prototype.render=function(){return h.createElement("div",{className:this.props.className,ref:this.terminalRef})},_.propTypes={className:l.a.string,options:l.a.object,addons:l.a.array,onBinary:l.a.func,onCursorMove:l.a.func,onData:l.a.func,onKey:l.a.func,onLineFeed:l.a.func,onScroll:l.a.func,onSelectionChange:l.a.func,onRender:l.a.func,onResize:l.a.func,onTitleChange:l.a.func,customKeyEventHandler:l.a.func},_}(h.Component)}]);const ee=Q.XTerm},64836:function(ie){function V(N){return N&&N.__esModule?N:{default:N}}ie.exports=V,ie.exports.__esModule=!0,ie.exports.default=ie.exports},18698:function(ie){function V(N){"@babel/helpers - typeof";return ie.exports=V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},ie.exports.__esModule=!0,ie.exports.default=ie.exports,V(N)}ie.exports=V,ie.exports.__esModule=!0,ie.exports.default=ie.exports},97582:function(ie,V,N){"use strict";N.r(V),N.d(V,{__assign:function(){return P},__asyncDelegator:function(){return d},__asyncGenerator:function(){return s},__asyncValues:function(){return v},__await:function(){return a},__awaiter:function(){return f},__classPrivateFieldGet:function(){return I},__classPrivateFieldIn:function(){return C},__classPrivateFieldSet:function(){return A},__createBinding:function(){return _},__decorate:function(){return R},__esDecorate:function(){return h},__exportStar:function(){return t},__extends:function(){return ee},__generator:function(){return u},__importDefault:function(){return T},__importStar:function(){return L},__makeTemplateObject:function(){return m},__metadata:function(){return c},__param:function(){return w},__propKey:function(){return l},__read:function(){return o},__rest:function(){return j},__runInitializers:function(){return g},__setFunctionName:function(){return p},__spread:function(){return i},__spreadArray:function(){return e},__spreadArrays:function(){return n},__values:function(){return r}});var Q=function(y,b){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,M){x.__proto__=M}||function(x,M){for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(x[D]=M[D])},Q(y,b)};function ee(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");Q(y,b);function x(){this.constructor=y}y.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}var P=function(){return P=Object.assign||function(b){for(var x,M=1,D=arguments.length;M<D;M++){x=arguments[M];for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(b[F]=x[F])}return b},P.apply(this,arguments)};function j(y,b){var x={};for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&b.indexOf(M)<0&&(x[M]=y[M]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,M=Object.getOwnPropertySymbols(y);D<M.length;D++)b.indexOf(M[D])<0&&Object.prototype.propertyIsEnumerable.call(y,M[D])&&(x[M[D]]=y[M[D]]);return x}function R(y,b,x,M){var D=arguments.length,F=D<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,x):M,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,b,x,M);else for(var X=y.length-1;X>=0;X--)(z=y[X])&&(F=(D<3?z(F):D>3?z(b,x,F):z(b,x))||F);return D>3&&F&&Object.defineProperty(b,x,F),F}function w(y,b){return function(x,M){b(x,M,y)}}function h(y,b,x,M,D,F){function z(te){if(te!==void 0&&typeof te!="function")throw new TypeError("Function expected");return te}for(var X=M.kind,J=X==="getter"?"get":X==="setter"?"set":"value",K=!b&&y?M.static?y:y.prototype:null,E=b||(K?Object.getOwnPropertyDescriptor(K,M.name):{}),G,B=!1,W=x.length-1;W>=0;W--){var H={};for(var Y in M)H[Y]=Y==="access"?{}:M[Y];for(var Y in M.access)H.access[Y]=M.access[Y];H.addInitializer=function(te){if(B)throw new TypeError("Cannot add initializers after decoration has completed");F.push(z(te||null))};var Z=(0,x[W])(X==="accessor"?{get:E.get,set:E.set}:E[J],H);if(X==="accessor"){if(Z===void 0)continue;if(Z===null||typeof Z!="object")throw new TypeError("Object expected");(G=z(Z.get))&&(E.get=G),(G=z(Z.set))&&(E.set=G),(G=z(Z.init))&&D.unshift(G)}else(G=z(Z))&&(X==="field"?D.unshift(G):E[J]=G)}K&&Object.defineProperty(K,M.name,E),B=!0}function g(y,b,x){for(var M=arguments.length>2,D=0;D<b.length;D++)x=M?b[D].call(y,x):b[D].call(y);return M?x:void 0}function l(y){return typeof y=="symbol"?y:"".concat(y)}function p(y,b,x){return typeof b=="symbol"&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:x?"".concat(x," ",b):b})}function c(y,b){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(y,b)}function f(y,b,x,M){function D(F){return F instanceof x?F:new x(function(z){z(F)})}return new(x||(x=Promise))(function(F,z){function X(E){try{K(M.next(E))}catch(G){z(G)}}function J(E){try{K(M.throw(E))}catch(G){z(G)}}function K(E){E.done?F(E.value):D(E.value).then(X,J)}K((M=M.apply(y,b||[])).next())})}function u(y,b){var x={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},M,D,F,z;return z={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function X(K){return function(E){return J([K,E])}}function J(K){if(M)throw new TypeError("Generator is already executing.");for(;z&&(z=0,K[0]&&(x=0)),x;)try{if(M=1,D&&(F=K[0]&2?D.return:K[0]?D.throw||((F=D.return)&&F.call(D),0):D.next)&&!(F=F.call(D,K[1])).done)return F;switch(D=0,F&&(K=[K[0]&2,F.value]),K[0]){case 0:case 1:F=K;break;case 4:return x.label++,{value:K[1],done:!1};case 5:x.label++,D=K[1],K=[0];continue;case 7:K=x.ops.pop(),x.trys.pop();continue;default:if(F=x.trys,!(F=F.length>0&&F[F.length-1])&&(K[0]===6||K[0]===2)){x=0;continue}if(K[0]===3&&(!F||K[1]>F[0]&&K[1]<F[3])){x.label=K[1];break}if(K[0]===6&&x.label<F[1]){x.label=F[1],F=K;break}if(F&&x.label<F[2]){x.label=F[2],x.ops.push(K);break}F[2]&&x.ops.pop(),x.trys.pop();continue}K=b.call(y,x)}catch(E){K=[6,E],D=0}finally{M=F=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}}var _=Object.create?function(y,b,x,M){M===void 0&&(M=x);var D=Object.getOwnPropertyDescriptor(b,x);(!D||("get"in D?!b.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return b[x]}}),Object.defineProperty(y,M,D)}:function(y,b,x,M){M===void 0&&(M=x),y[M]=b[x]};function t(y,b){for(var x in y)x!=="default"&&!Object.prototype.hasOwnProperty.call(b,x)&&_(b,y,x)}function r(y){var b=typeof Symbol=="function"&&Symbol.iterator,x=b&&y[b],M=0;if(x)return x.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(y,b){var x=typeof Symbol=="function"&&y[Symbol.iterator];if(!x)return y;var M=x.call(y),D,F=[],z;try{for(;(b===void 0||b-- >0)&&!(D=M.next()).done;)F.push(D.value)}catch(X){z={error:X}}finally{try{D&&!D.done&&(x=M.return)&&x.call(M)}finally{if(z)throw z.error}}return F}function i(){for(var y=[],b=0;b<arguments.length;b++)y=y.concat(o(arguments[b]));return y}function n(){for(var y=0,b=0,x=arguments.length;b<x;b++)y+=arguments[b].length;for(var M=Array(y),D=0,b=0;b<x;b++)for(var F=arguments[b],z=0,X=F.length;z<X;z++,D++)M[D]=F[z];return M}function e(y,b,x){if(x||arguments.length===2)for(var M=0,D=b.length,F;M<D;M++)(F||!(M in b))&&(F||(F=Array.prototype.slice.call(b,0,M)),F[M]=b[M]);return y.concat(F||Array.prototype.slice.call(b))}function a(y){return this instanceof a?(this.v=y,this):new a(y)}function s(y,b,x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=x.apply(y,b||[]),D,F=[];return D={},z("next"),z("throw"),z("return"),D[Symbol.asyncIterator]=function(){return this},D;function z(B){M[B]&&(D[B]=function(W){return new Promise(function(H,Y){F.push([B,W,H,Y])>1||X(B,W)})})}function X(B,W){try{J(M[B](W))}catch(H){G(F[0][3],H)}}function J(B){B.value instanceof a?Promise.resolve(B.value.v).then(K,E):G(F[0][2],B)}function K(B){X("next",B)}function E(B){X("throw",B)}function G(B,W){B(W),F.shift(),F.length&&X(F[0][0],F[0][1])}}function d(y){var b,x;return b={},M("next"),M("throw",function(D){throw D}),M("return"),b[Symbol.iterator]=function(){return this},b;function M(D,F){b[D]=y[D]?function(z){return(x=!x)?{value:a(y[D](z)),done:!1}:F?F(z):z}:F}}function v(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=y[Symbol.asyncIterator],x;return b?b.call(y):(y=typeof r=="function"?r(y):y[Symbol.iterator](),x={},M("next"),M("throw"),M("return"),x[Symbol.asyncIterator]=function(){return this},x);function M(F){x[F]=y[F]&&function(z){return new Promise(function(X,J){z=y[F](z),D(X,J,z.done,z.value)})}}function D(F,z,X,J){Promise.resolve(J).then(function(K){F({value:K,done:X})},z)}}function m(y,b){return Object.defineProperty?Object.defineProperty(y,"raw",{value:b}):y.raw=b,y}var S=Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b};function L(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var x in y)x!=="default"&&Object.prototype.hasOwnProperty.call(y,x)&&_(b,y,x);return S(b,y),b}function T(y){return y&&y.__esModule?y:{default:y}}function I(y,b,x,M){if(x==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof b=="function"?y!==b||!M:!b.has(y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return x==="m"?M:x==="a"?M.call(y):M?M.value:b.get(y)}function A(y,b,x,M,D){if(M==="m")throw new TypeError("Private method is not writable");if(M==="a"&&!D)throw new TypeError("Private accessor was defined without a setter");if(typeof b=="function"?y!==b||!D:!b.has(y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return M==="a"?D.call(y,x):D?D.value=x:b.set(y,x),x}function C(y,b){if(b===null||typeof b!="object"&&typeof b!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof y=="function"?b===y:y.has(b)}V.default={__extends:ee,__assign:P,__rest:j,__decorate:R,__param:w,__metadata:c,__awaiter:f,__generator:u,__createBinding:_,__exportStar:t,__values:r,__read:o,__spread:i,__spreadArrays:n,__spreadArray:e,__await:a,__asyncGenerator:s,__asyncDelegator:d,__asyncValues:v,__makeTemplateObject:m,__importStar:L,__importDefault:T,__classPrivateFieldGet:I,__classPrivateFieldSet:A,__classPrivateFieldIn:C}}}]);
